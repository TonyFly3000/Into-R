[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "About",
    "section": "",
    "text": "R is based heavily on the S language, first developed in the 1960s and 1970s by researchers at Bell Laboratories in New Jersey\nR’s developers—Ross Ihaka and Robert Gentleman at the Univer- sity of Auckland in New Zealand—released it in the early 1990s under the\nGNU public license. (The software was named for Ross and Robert’s shared first initial.)\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n Back to top"
  },
  {
    "objectID": "intro/1 basic R.html#get-current-directory",
    "href": "intro/1 basic R.html#get-current-directory",
    "title": "Basic R",
    "section": "1.1 get current directory",
    "text": "1.1 get current directory\n\n\nCode\ngetwd()",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#get-all-file-name-under-current-directory",
    "href": "intro/1 basic R.html#get-all-file-name-under-current-directory",
    "title": "Basic R",
    "section": "1.2 get all file name under current directory",
    "text": "1.2 get all file name under current directory\n\n\nCode\nlist.files()\n\n\n [1] \"1 basic R.qmd\"                 \"1 basic R.rmarkdown\"          \n [3] \"1-basic-R.rmarkdown\"           \"2 probability.qmd\"            \n [5] \"3 Statistics.qmd\"              \"5 R boook.qmd\"                \n [7] \"6 data analytic in R book.qmd\" \"7 error handling.qmd\"         \n [9] \"hotels.csv\"                    \"images\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#get-all-file-name-under-currrents-parent-directory",
    "href": "intro/1 basic R.html#get-all-file-name-under-currrents-parent-directory",
    "title": "Basic R",
    "section": "1.3 get all file name under currrents parent directory",
    "text": "1.3 get all file name under currrents parent directory\n\n\nCode\nlist.files(\"../\")\n\n\n [1] \"_freeze\"               \"_publish.yml\"          \"_quarto.yml\"          \n [4] \"_site\"                 \"data manipulation\"     \"docs\"                 \n [7] \"foldableCodeBlcok.lua\" \"images\"                \"index.qmd\"            \n[10] \"intro\"                 \"Intro R.Rproj\"         \"other\"                \n[13] \"Plot\"                  \"Publish\"               \"Rlogo.png\"            \n[16] \"sidebar.png\"           \"styles.css\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#get-file-info",
    "href": "intro/1 basic R.html#get-file-info",
    "title": "Basic R",
    "section": "1.4 get file info",
    "text": "1.4 get file info\n\n\nCode\nfile.info(\"6 data analytic in R book.qmd\")",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#create-folder",
    "href": "intro/1 basic R.html#create-folder",
    "title": "Basic R",
    "section": "1.5 create folder",
    "text": "1.5 create folder\n\n\nCode\ndir.create('testing_folder')",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#delete-folderfile",
    "href": "intro/1 basic R.html#delete-folderfile",
    "title": "Basic R",
    "section": "1.6 delete folder/file",
    "text": "1.6 delete folder/file\n\n\nCode\nfile.remove('testing_folder')",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#copy-file",
    "href": "intro/1 basic R.html#copy-file",
    "title": "Basic R",
    "section": "1.7 copy file",
    "text": "1.7 copy file\n\n\nCode\nlibrary(fs)\nfile_copy('test.csv', 'test2.csv')",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#download-file-from-internet",
    "href": "intro/1 basic R.html#download-file-from-internet",
    "title": "Basic R",
    "section": "1.8 download file from internet",
    "text": "1.8 download file from internet\n\n\nCode\nurl=\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv\"\n\ndownload.file(url = url, destfile = \"hotels.csv\")",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#download-table-from-internet",
    "href": "intro/1 basic R.html#download-table-from-internet",
    "title": "Basic R",
    "section": "1.9 download table from internet",
    "text": "1.9 download table from internet\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(janitor)\n\nnba_wiki_url='https://en.wikipedia.org/wiki/List_of_NBA_champions'\n  \nnba_wiki_data001=nba_wiki_url %&gt;% read_html() %&gt;% html_table()\n\nnba_wiki_data002=nba_wiki_data001[[2]] %&gt;% clean_names()\n\nnba_wiki_data003=nba_wiki_data002 %&gt;%filter(!row_number() %in% c(1, 5)) %&gt;% mutate(year=str_sub(year, 1, 4))\n\ntail(nba_wiki_data003)\n\n\n# A tibble: 6 × 8\n  year  western_champion      coach result eastern_champion coach_2 finals_mvp_a\n  &lt;chr&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;       \n1 2019  Golden State Warrior… Stev… 2–4    Toronto Raptors… Nick N… Kawhi Leona…\n2 2020  Los Angeles Lakers (… Fran… 4–2    Miami Heat (5) … Erik S… LeBron James\n3 2021  Phoenix Suns (2) (3,… Mont… 2–4    Milwaukee Bucks… Mike B… Giannis Ant…\n4 2022  Golden State Warrior… Stev… 4–2    Boston Celtics … Ime Ud… Stephen Cur…\n5 2023  Denver Nuggets (1) (… Mich… 4–1    Miami Heat (8) … Erik S… Nikola Jokić\n6 2024  Dallas Mavericks (5)… Jaso… 1–4    Boston Celtics … Joe Ma… Jaylen Brown\n# ℹ 1 more variable:\n#   mw_parser_output_tooltip_dotted_border_bottom_1px_dotted_cursor_help_ref &lt;chr&gt;",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#for-loop",
    "href": "intro/1 basic R.html#for-loop",
    "title": "Basic R",
    "section": "4.1 for Loop",
    "text": "4.1 for Loop\n\n\nCode\nfor (x in 1:4) {\n  print(x)\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n[1] 4\n\n\nwith break statement\n\n\nCode\nfor (x in 1:6) {\n  if (x == 4) {break}\n  print(x)\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n\n\nwith next statement\n\n\nCode\nfor (x in 1:6) {\n  if (x == 4) {next}\n  print(x)\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n[1] 5\n[1] 6",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#error-handling-on-for-loopprint-out-error",
    "href": "intro/1 basic R.html#error-handling-on-for-loopprint-out-error",
    "title": "Basic R",
    "section": "4.2 Error handling on for Loop:print out error",
    "text": "4.2 Error handling on for Loop:print out error\n\n\nCode\nstuff &lt;- list(12, 9, 2, \"cat\", 25, 10, \"bird\")\n#stuff\n\n\n\n\nCode\nloop_num=0\n\nfor (i in 1:6) {\n  loop_num=loop_num+1\n  tryCatch (print(1+i),\n           \n           error = function(e){\n           message(paste(\"An error occurred for loop num\", loop_num,\":\\n\"), e)\n             \n         })\n}\n\n\n[1] 2\n[1] 3\n[1] 4\n[1] 5\n[1] 6\n[1] 7",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#while-loop",
    "href": "intro/1 basic R.html#while-loop",
    "title": "Basic R",
    "section": "4.3 while Loop",
    "text": "4.3 while Loop\n\n\nCode\ni &lt;- 1\nwhile (i &lt; 6) {\n  print(i)\n  i &lt;- i + 1\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n[1] 4\n[1] 5\n\n\nwith break statement\n\n\nCode\ni &lt;- 1\nwhile (i &lt; 6) {\n  print(i)\n  i &lt;- i + 1\n  if (i == 4) {break}\n}\n\n\n[1] 1\n[1] 2\n[1] 3\n\n\nwith next statement\n\n\nCode\ni =1\n\nwhile (i &lt; 6) {\n  i &lt;- i + 1\n  if (i == 4){next}\n  print(i)\n}\n\n\n[1] 2\n[1] 3\n[1] 5\n[1] 6",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#error-handling-on-whie-loop-try-when-the-error-gone",
    "href": "intro/1 basic R.html#error-handling-on-whie-loop-try-when-the-error-gone",
    "title": "Basic R",
    "section": "4.4 Error handling on whie Loop: try when the error gone",
    "text": "4.4 Error handling on whie Loop: try when the error gone\n\n\nCode\ni=0\na=0\nwhile (i &lt; 4) {\n  a=a+1\n  print(i)\n  tryCatch({\n  asdfgaergae5gh5hae5h\n    i=i+1\n  },error = function(msg){print('eeeeeeee')\n    i=i-1\n    print(paste0(\"new i : \",i))\n   \n    })\n   if(a&gt;10){break}\n  }\n\n\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"\n[1] 0\n[1] \"eeeeeeee\"\n[1] \"new i : -1\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#without-arguments",
    "href": "intro/1 basic R.html#without-arguments",
    "title": "Basic R",
    "section": "5.1 without Arguments",
    "text": "5.1 without Arguments\n\n\nCode\nmy_function &lt;- function() { \n  print(\"Hello World!\")\n}\n\nmy_function()\n\n\n[1] \"Hello World!\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#with-arguments",
    "href": "intro/1 basic R.html#with-arguments",
    "title": "Basic R",
    "section": "5.2 with Arguments",
    "text": "5.2 with Arguments\n\n\nCode\nadding_ten &lt;- function(x) { \n  a=x+10\n  return(a)\n}\n\nadding_ten(5)\n\n\n[1] 15",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#with-default-arguments",
    "href": "intro/1 basic R.html#with-default-arguments",
    "title": "Basic R",
    "section": "5.3 with default Arguments",
    "text": "5.3 with default Arguments\n\n\nCode\nadding_ten &lt;- function(x=10) { \n  a=x+10\n  return(a)\n}\n\n#if not define x, then x=10\n\nadding_ten()\n\n\n[1] 20",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-function-arguments",
    "href": "intro/1 basic R.html#check-function-arguments",
    "title": "Basic R",
    "section": "5.4 check function Arguments",
    "text": "5.4 check function Arguments\n\n\nCode\nargs(adding_ten)\n\n\nfunction (x = 10) \nNULL\n\n\nMany functions exhibit variadic behavior. That is, they can accept any num- ber of arguments, and it’s up to the user to decide how many arguments to provide. The functions c, data.frame, and list are all like this. When you call a function like data.frame, you can specify any number of members as arguments.\n\n\nCode\nargs(data.frame)\n\n\nfunction (..., row.names = NULL, check.rows = FALSE, check.names = TRUE, \n    fix.empty.names = TRUE, stringsAsFactors = FALSE) \nNULL",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#warning-in-function",
    "href": "intro/1 basic R.html#warning-in-function",
    "title": "Basic R",
    "section": "5.5 warning in function",
    "text": "5.5 warning in function\nprint out warning\n\n\nCode\nadding_ten &lt;- function(x=10) { \n  a=x+10\n  if(a&gt;50){\n    warning('its better than 50')\n  }\n  return(a)\n}\n\n\n\n\nCode\nadding_ten(100)\n\n\n[1] 110",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#stop-in-function",
    "href": "intro/1 basic R.html#stop-in-function",
    "title": "Basic R",
    "section": "5.6 stop in function",
    "text": "5.6 stop in function\nprint out stop error message\n\n\nCode\nadding_ten &lt;- function(x=10) { \n  a=x+10\n  if(a&gt;50){\n    stop('its better than 50')\n  }\n  return(a)\n}\n\n\n\n\nCode\nadding_ten(100)",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#use-try-to-by-pass-error",
    "href": "intro/1 basic R.html#use-try-to-by-pass-error",
    "title": "Basic R",
    "section": "5.7 use try to by pass error",
    "text": "5.7 use try to by pass error\n\n\nCode\ntry(adding_ten(100))\n\n\n[1] 110\n\n\nCode\n5+10\n\n\n[1] 15",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-r-version",
    "href": "intro/1 basic R.html#check-r-version",
    "title": "Basic R",
    "section": "7.1 check R version",
    "text": "7.1 check R version\n\n\nCode\nversion\n\n\n               _                           \nplatform       aarch64-apple-darwin20      \narch           aarch64                     \nos             darwin20                    \nsystem         aarch64, darwin20           \nstatus                                     \nmajor          4                           \nminor          4.1                         \nyear           2024                        \nmonth          06                          \nday            14                          \nsvn rev        86737                       \nlanguage       R                           \nversion.string R version 4.4.1 (2024-06-14)\nnickname       Race for Your Life",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#install-r-package",
    "href": "intro/1 basic R.html#install-r-package",
    "title": "Basic R",
    "section": "7.2 install R package",
    "text": "7.2 install R package\n\n7.2.1 install from Cran\n99% of the time will install pacakge from The Comprehensive R Archive Network(cran).https://cran.r-project.org/\n\n\n\nCode\ninstall.packages('tidyverse')\n\n\n\n\n7.2.2 install from Github\n\n\nCode\npak::pkg_install(\"tidymodels/learntidymodels\")\n\n\n\n\n7.2.3 install from .tar.gz\n\n\nCode\ninstall.packages(\"https://cran.r-project.org/src/contrib/Archive/maptools/maptools_1.1-8.tar.gz\")\n\n\n\n\n7.2.4 install from Bioconductor\n\n\nCode\npak::pkg_install(\"text2vec\")\n\n\n\n\n7.2.5 install from local\n\n\nCode\npak::local_install(\"cli\")",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-one-package-version",
    "href": "intro/1 basic R.html#check-one-package-version",
    "title": "Basic R",
    "section": "7.3 check one package version",
    "text": "7.3 check one package version\n\n\nCode\npackageVersion(\"tidyverse\")\n\n\n[1] '2.0.0'",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-pacakge-relationship",
    "href": "intro/1 basic R.html#check-pacakge-relationship",
    "title": "Basic R",
    "section": "7.4 check pacakge relationship",
    "text": "7.4 check pacakge relationship\n\n\nCode\npak::pkg_deps_explain(\"tibble\", \"rlang\")\n\n\ntibble -&gt; lifecycle -&gt; rlang\ntibble -&gt; pillar -&gt; lifecycle -&gt; rlang\ntibble -&gt; pillar -&gt; rlang\ntibble -&gt; pillar -&gt; vctrs -&gt; lifecycle -&gt; rlang\ntibble -&gt; pillar -&gt; vctrs -&gt; rlang\ntibble -&gt; rlang\ntibble -&gt; vctrs -&gt; lifecycle -&gt; rlang\ntibble -&gt; vctrs -&gt; rlang",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-pacakge-dependencies",
    "href": "intro/1 basic R.html#check-pacakge-dependencies",
    "title": "Basic R",
    "section": "7.5 check pacakge dependencies",
    "text": "7.5 check pacakge dependencies\n\n\nCode\npak::pkg_deps_tree(\"tibble\")\n\n\ntibble 3.2.1 ✨🔧 ⬇ (688.89 kB)\n├─fansi 1.0.6 ✨🔧 ⬇ (383.06 kB)\n├─lifecycle 1.0.4 ✨ ⬇ (124.78 kB)\n│ ├─cli 3.6.4 ✨🔧 ⬇ (1.45 MB)\n│ ├─glue 1.8.0 ✨🔧 ⬇ (173.70 kB)\n│ └─rlang 1.1.5 ✨🔧 ⬇ (1.90 MB)\n├─magrittr 2.0.3 ✨🔧 ⬇ (233.52 kB)\n├─pillar 1.10.1 ✨ ⬇ (657.46 kB)\n│ ├─cli\n│ ├─glue\n│ ├─lifecycle\n│ ├─rlang\n│ ├─utf8 1.2.4 ✨🔧 ⬇ (206.91 kB)\n│ └─vctrs 0.6.5 ✨🔧 ⬇ (1.89 MB)\n│   ├─cli\n│   ├─glue\n│   ├─lifecycle\n│   └─rlang\n├─pkgconfig 2.0.3 ✨ ⬇ (18.45 kB)\n├─rlang\n└─vctrs\n\nKey:  ✨ new |  ⬇ download | 🔧 compile",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-current-loaded-package",
    "href": "intro/1 basic R.html#check-current-loaded-package",
    "title": "Basic R",
    "section": "7.6 check current loaded package",
    "text": "7.6 check current loaded package\n\n\nCode\nsessionInfo()\n\n\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] janitor_2.2.0   rvest_1.0.4     lubridate_1.9.4 forcats_1.0.0  \n [5] stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2     readr_2.1.5    \n [9] tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] utf8_1.2.4        generics_0.1.3    xml2_1.3.6        stringi_1.8.4    \n [5] hms_1.1.3         digest_0.6.37     magrittr_2.0.3    evaluate_1.0.1   \n [9] grid_4.4.1        timechange_0.3.0  fastmap_1.2.0     jsonlite_1.8.9   \n[13] processx_3.8.4    chromote_0.4.0    ps_1.8.1          promises_1.3.0   \n[17] httr_1.4.7        scales_1.3.0      cli_3.6.4         rlang_1.1.5      \n[21] pak_0.8.0         munsell_0.5.1     withr_3.0.2       yaml_2.3.10      \n[25] tools_4.4.1       tzdb_0.4.0        colorspace_2.1-1  curl_6.2.0       \n[29] vctrs_0.6.5       R6_2.6.1          lifecycle_1.0.4   snakecase_0.11.1 \n[33] htmlwidgets_1.6.4 callr_3.7.6       pkgconfig_2.0.3   pillar_1.10.1    \n[37] later_1.3.2       gtable_0.3.6      glue_1.8.0        Rcpp_1.0.13-1    \n[41] xfun_0.48         tidyselect_1.2.1  rstudioapi_0.17.1 knitr_1.48       \n[45] htmltools_0.5.8.1 websocket_1.4.2   rmarkdown_2.28    compiler_4.4.1",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-all-package-version",
    "href": "intro/1 basic R.html#check-all-package-version",
    "title": "Basic R",
    "section": "7.7 check all package version",
    "text": "7.7 check all package version\n\n\nCode\nip = as.data.frame(installed.packages()[,c(1,3:4)])\nip = ip[is.na(ip$Priority),1:2,drop=FALSE]\nhead(ip)\n\n\n                Package  Version\nabind             abind    1.4-8\nannotater     annotater    0.2.3\nanytime         anytime    0.3.9\narrow             arrow 17.0.0.1\nAsioHeaders AsioHeaders 1.22.1-2\naskpass         askpass    1.2.1",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#check-package-install-loaciton",
    "href": "intro/1 basic R.html#check-package-install-loaciton",
    "title": "Basic R",
    "section": "7.8 check package install loaciton",
    "text": "7.8 check package install loaciton\n\n\nCode\n.libPaths()\n\n\n[1] \"/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library\"",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#uninstall-pacakge",
    "href": "intro/1 basic R.html#uninstall-pacakge",
    "title": "Basic R",
    "section": "7.9 uninstall pacakge",
    "text": "7.9 uninstall pacakge\n\n\nCode\nremove.packages('xxxxx')",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#centrality-mean-median-mode",
    "href": "intro/1 basic R.html#centrality-mean-median-mode",
    "title": "Basic R",
    "section": "10.1 Centrality: Mean, Median, Mode",
    "text": "10.1 Centrality: Mean, Median, Mode",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#spread-variance-standard-deviation-and-the-interquartile-range",
    "href": "intro/1 basic R.html#spread-variance-standard-deviation-and-the-interquartile-range",
    "title": "Basic R",
    "section": "10.2 Spread: Variance, Standard Deviation, and the Interquartile Range",
    "text": "10.2 Spread: Variance, Standard Deviation, and the Interquartile Range",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#covariance-and-correlation",
    "href": "intro/1 basic R.html#covariance-and-correlation",
    "title": "Basic R",
    "section": "10.3 Covariance and Correlation",
    "text": "10.3 Covariance and Correlation\nWhen analyzing data, it’s often useful to be able to investigate the rela- tionship between two numeric variables to assess trends. For example, you might expect height and weight observations to have a noticeable positive relationship—taller people tend to weigh more. Conversely, you might imag- ine that handspan and length of hair would have less of an association. One of the simplest and most common ways such associations are quantified and compared is through the idea of correlation, for which you need the covariance. The covariance expresses how much two numeric variables “change together” and the nature of that relationship,",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "intro/1 basic R.html#correlationpearsons-product-moment-correlation-coefficient",
    "href": "intro/1 basic R.html#correlationpearsons-product-moment-correlation-coefficient",
    "title": "Basic R",
    "section": "10.4 Correlation,Pearson’s product-moment correlation coefficient",
    "text": "10.4 Correlation,Pearson’s product-moment correlation coefficient\nPearson’s sample correlation coef- ficient ρxy is computed by dividing the sample covariance by the product of the standard deviation of each data set\n\nSome Correlation Example:\n\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] janitor_2.2.0   rvest_1.0.4     lubridate_1.9.4 forcats_1.0.0  \n [5] stringr_1.5.1   dplyr_1.1.4     purrr_1.0.2     readr_2.1.5    \n [9] tidyr_1.3.1     tibble_3.2.1    ggplot2_3.5.1   tidyverse_2.0.0\n\nloaded via a namespace (and not attached):\n [1] utf8_1.2.4        generics_0.1.3    xml2_1.3.6        stringi_1.8.4    \n [5] hms_1.1.3         digest_0.6.37     magrittr_2.0.3    evaluate_1.0.1   \n [9] grid_4.4.1        timechange_0.3.0  fastmap_1.2.0     jsonlite_1.8.9   \n[13] processx_3.8.4    chromote_0.4.0    ps_1.8.1          promises_1.3.0   \n[17] httr_1.4.7        scales_1.3.0      cli_3.6.4         rlang_1.1.5      \n[21] pak_0.8.0         munsell_0.5.1     withr_3.0.2       yaml_2.3.10      \n[25] tools_4.4.1       tzdb_0.4.0        colorspace_2.1-1  curl_6.2.0       \n[29] vctrs_0.6.5       R6_2.6.1          lifecycle_1.0.4   snakecase_0.11.1 \n[33] htmlwidgets_1.6.4 callr_3.7.6       pkgconfig_2.0.3   pillar_1.10.1    \n[37] later_1.3.2       gtable_0.3.6      glue_1.8.0        Rcpp_1.0.13-1    \n[41] xfun_0.48         tidyselect_1.2.1  rstudioapi_0.17.1 knitr_1.48       \n[45] htmltools_0.5.8.1 websocket_1.4.2   rmarkdown_2.28    compiler_4.4.1",
    "crumbs": [
      "Intro",
      "Basic R"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html",
    "href": "Publish/4 email/1 email.html",
    "title": "Email",
    "section": "",
    "text": "Code\nlibrary(blastula)\nlibrary(keyring)\n\n\n\n\n\n\n\n\nCode\ncreate_smtp_creds_key(\n  id = \"gmail001_creds\",\n  provider = \"gmail\",\n  user = \"verykoala@gmail.com\",\n  overwrite = TRUE\n  )\n\n\n\n\n\n\n\nCode\n# create_smtp_creds_key(\n#   id = \"outlook001_creds\",\n#   provider = \"outlook\",\n#   user = \"jcpartner@outlook.com\",\n#   overwrite = TRUE\n#   )\n\ncreate_smtp_creds_file(file = \"ggnot_throwaway_creds\",\n                       user = \"jcpartner@outlook.com\",\n                       provider = \"outlook\")\n\n\n\n\nCode\n#delete_credential_key(\"gmail001_creds\")\n\n\n\n\nCode\nview_credential_keys()\n\n\n\n\n\n\n\n\nCode\nlibrary(blastula)\nmsg=compose_email(\n  body = md(\n  \"Hi there 👋,\n  \n  This is an email to let you now thatrunning job **finished**.\n\n  Best,&lt;br&gt;\n  Tony\"\n  )\n)\n\nmsg\n\n\n\n\n\n\n\n\n\nCode\nmsg %&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nlibrary(Microsoft365R)\noutl &lt;- get_personal_outlook()\n\n\n\n\nCode\n# list the most recent emails in your Inbox\n#outl$list_emails()\n\n\n\n\nCode\nem &lt;- outl$create_email(msg, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\n\n\n\n\nCode\nem$send()\n\n\n\n\n\n\n\n\nCode\nemail_obj=render_email('.quarto_email.Rmd')\n\n\n\n\nCode\nemail_obj\n\n\n\n\n\n\nCode\nemail_obj%&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nem &lt;- outl$create_email(email_obj, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#create-smtp-credentials",
    "href": "Publish/4 email/1 email.html#create-smtp-credentials",
    "title": "Email",
    "section": "",
    "text": "Code\ncreate_smtp_creds_key(\n  id = \"gmail001_creds\",\n  provider = \"gmail\",\n  user = \"verykoala@gmail.com\",\n  overwrite = TRUE\n  )\n\n\n\n\n\n\n\nCode\n# create_smtp_creds_key(\n#   id = \"outlook001_creds\",\n#   provider = \"outlook\",\n#   user = \"jcpartner@outlook.com\",\n#   overwrite = TRUE\n#   )\n\ncreate_smtp_creds_file(file = \"ggnot_throwaway_creds\",\n                       user = \"jcpartner@outlook.com\",\n                       provider = \"outlook\")\n\n\n\n\nCode\n#delete_credential_key(\"gmail001_creds\")\n\n\n\n\nCode\nview_credential_keys()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#email-content",
    "href": "Publish/4 email/1 email.html#email-content",
    "title": "Email",
    "section": "",
    "text": "Code\nlibrary(blastula)\nmsg=compose_email(\n  body = md(\n  \"Hi there 👋,\n  \n  This is an email to let you now thatrunning job **finished**.\n\n  Best,&lt;br&gt;\n  Tony\"\n  )\n)\n\nmsg",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#send-email",
    "href": "Publish/4 email/1 email.html#send-email",
    "title": "Email",
    "section": "",
    "text": "Code\nmsg %&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nlibrary(Microsoft365R)\noutl &lt;- get_personal_outlook()\n\n\n\n\nCode\n# list the most recent emails in your Inbox\n#outl$list_emails()\n\n\n\n\nCode\nem &lt;- outl$create_email(msg, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\n\n\n\n\nCode\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/4 email/1 email.html#send-email-with-quarto-content",
    "href": "Publish/4 email/1 email.html#send-email-with-quarto-content",
    "title": "Email",
    "section": "",
    "text": "Code\nemail_obj=render_email('.quarto_email.Rmd')\n\n\n\n\nCode\nemail_obj\n\n\n\n\n\n\nCode\nemail_obj%&gt;% \n  smtp_send(\n    from = 'verykoala@gmail.com',\n    to = \"jcflyingco@outlook.com\",\n    subject = \"Testing the email function\",\n    credentials = creds_key(id = \"gmail001_creds\")\n  )\n\n\n\n\n\n\n\nCode\nem &lt;- outl$create_email(email_obj, subject=\"Hello\", to=\"jcflyingco@outlook.com\")\nem$send()",
    "crumbs": [
      "Publish",
      "4 email",
      "Email"
    ]
  },
  {
    "objectID": "Publish/2 quarto/6 quarto parameters.html",
    "href": "Publish/2 quarto/6 quarto parameters.html",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto parameters"
    ]
  },
  {
    "objectID": "Publish/2 quarto/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "href": "Publish/2 quarto/6 quarto parameters.html#render-qmd-file-with-parameters-input",
    "title": "quarto parameters",
    "section": "",
    "text": "Code\nlibrary(quarto)\nquarto_render(\"_parameters in R.qmd\"\n,output_file='R.html'\n,execute_params = list(name='new me',key=9999))",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto parameters"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html",
    "href": "Publish/2 quarto/2 quarto blog.html",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---\n\n\n\n\n\n\n\nCode\n---\ndraft: true  \n  \n---\n\n\n\n\n\n\n\nCode\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true\n\n\n\n\n\n\n\nCode\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---\n\n\n\n\n\n\n\nCode\ndraft:true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#blog-post",
    "href": "Publish/2 quarto/2 quarto blog.html#blog-post",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"title\"\n\nauthor: \"name\"\ndate: \"2024-05-03\"\ncategories: [R,quarto]\nexecute:\n  warning: false\n  error: false\n  eval: false\n\nformat:\n  html:\n    toc: true\n    toc-location: left\n    code-fold: show\n    code-tools: true\n    number-sections: true\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    \n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#hide-post-from-main-page",
    "href": "Publish/2 quarto/2 quarto blog.html#hide-post-from-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ndraft: true  \n  \n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#quarto.yml",
    "href": "Publish/2 quarto/2 quarto blog.html#quarto.yml",
    "title": "quarto blog",
    "section": "",
    "text": "Code\nproject:\n  type: website\n\nwebsite:\n  title: \"tidystep\"\n  site-url: https://tidystep.netlify.app/\n  description: \"A blog for data stuff\"\n  favicon: \"profile3.png\"\n  google-analytics: \"G-2EQK8RFKFX\"\n  navbar:\n    right:\n      - about.qmd\n      - icon: github\n        href: https://github.com/TonyFly3000\n      - icon: twitter\n        href: https://twitter.com/TonyJCD\n      - icon: rss\n        href: index.xml\n\n  page-footer:\n    right: \"This blog is built with ❤️ and [Quarto](https://quarto.org/).\"\n\nformat:\n  html:\n    theme: \n      light: flatly\n      dark: darkly\n    css: styles.css\n    grid:\n      body-width: 1100px\n      margin-width: 300px\n      gutter-width: 1.5rem\n\neditor: visual\nexecute:\n  freeze: true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#index.qmd",
    "href": "Publish/2 quarto/2 quarto blog.html#index.qmd",
    "title": "quarto blog",
    "section": "",
    "text": "Code\n---\ntitle: \"微步数据\"\nlisting:\n  page-size: 8\n  contents: posts\n  sort: \"date desc\"\n  type: default\n  categories: true\n  sort-ui: true\n  filter-ui: false\n  fields: [image, date, title, author,categories]\n  feed: true\npage-layout: full\ntitle-block-banner: true\n---",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "href": "Publish/2 quarto/2 quarto blog.html#draft-postnot-include-in-the-main-page",
    "title": "quarto blog",
    "section": "",
    "text": "Code\ndraft:true",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto blog"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html",
    "href": "Publish/2 quarto/3 quarto website.html",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub\n\n\n\n\n\n\n\n\n\n_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "href": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-quarto-hub",
    "title": "quarto website",
    "section": "",
    "text": "you need to have quarto pub account https://quartopub.com/\n\n\nCode\nquarto publish quarto-pub",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-github-page",
    "href": "Publish/2 quarto/3 quarto website.html#publish-quarto-website-into-github-page",
    "title": "quarto website",
    "section": "",
    "text": "_quarto.yml\n\n#| eval: false\nproject:\n  type: website\n  output-dir: docs\n\n\n\n\n\n\n\n\n\nThe github site is created: https://your_github_name.github.io/repository_name/\n\n\n\nIn mac using {shift+command+.} to show hidden .gitignore file\nfor example,add *.parquet in .gitignore file to ignore all parquet file\n\n\n.gitignore\n\n#| eval: false\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n/.quarto/\n\n*.parquet",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto website"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/2 shiny photo editor.html",
    "href": "Publish/1 Shiny/2 shiny photo editor.html",
    "title": "Shiny in R:photo editor",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/photo_editor/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:photo editor"
    ]
  },
  {
    "objectID": "Publish/3 dashboard/1 dashboard.html",
    "href": "Publish/3 dashboard/1 dashboard.html",
    "title": "Dashboard",
    "section": "",
    "text": "quarto dashboard\n\n\n\nCode\n\n_dashboard_r.qmd\n\n---\ntitle: \"First quarto dashboard\"\nformat: dashboard\n---\n\n```{r}\na=1\na\n```\n\n\n\n\n\nReference:\nhttps://www.youtube.com/watch?v=HW7QbqI4fH0\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "3 dashboard",
      "Dashboard"
    ]
  },
  {
    "objectID": "other/1 google analytics/1 google analytics.html",
    "href": "other/1 google analytics/1 google analytics.html",
    "title": "google analytic in R",
    "section": "",
    "text": "1 package\n\n\nCode\n# Libraries\nlibrary(googleAnalyticsR)\nlibrary(gargle)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(lubridate)\n\n\n\n\n2 API\n\n\nCode\n# Access\nga_auth(email=\"verykoala@gmail.com\")\nga_account_list(\"ga4\")\n\n\n# A tibble: 4 × 4\n  account_name accountId property_name           propertyId\n  &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;                   &lt;chr&gt;     \n1 verykoala    30370450  verykoala - GA4         431072878 \n2 verykoala    30370450  drinking                431975107 \n3 Demo Account 54516992  GA4 - Flood-It!         153293282 \n4 Demo Account 54516992  GA4 - Google Merch Shop 213025502 \n\n\n\n\n3 download data\n\n\nCode\nmy_property_id &lt;- 431975107\nfrom_date &lt;- \"2023-01-01\"\nto_date &lt;- \"2024-12-31\"\n           \noverall &lt;- ga_data(\n  my_property_id,\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n  )\n\n\n\n\nCode\noverall\n\n\n# A tibble: 1 × 4\n  activeUsers newUsers sessions screenPageViews\n        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n1          92       99      472            2743\n\n\n\n\n4 image at the back into plotly\n\n\nCode\n# By Country\ncountry &lt;- ga_data(\n  my_property_id,\n  dimensions = c(\"country\"),\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n)\n\ncountry\n\n\n# A tibble: 18 × 5\n   country        activeUsers newUsers sessions screenPageViews\n   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n 1 Hong Kong               32       23      136             631\n 2 China                   28       31      279            1814\n 3 United States           15       12       20              95\n 4 Thailand                 6        2       14              87\n 5 Ireland                  5        5        5               5\n 6 Japan                    5        4        5              13\n 7 Macao                    4        4       20              58\n 8 Sweden                   4        4        4               4\n 9 United Kingdom           3        3        3               3\n10 (not set)                2        2        2               2\n11 Malaysia                 2        2        4               9\n12 Singapore                2        0        4              11\n13 South Korea              2        2        3               2\n14 Argentina                1        1        1               1\n15 Australia                1        1        1               1\n16 Canada                   1        1        1               3\n17 Iran                     1        1        1               3\n18 Taiwan                   1        1        1               1\n\n\n\n\n5 add image at the back into plotly\n\n\nCode\nfig &lt;- plot_ly(data=country,x = ~sessions,y=~country,text=~sessions, type = \"bar\",orientation = 'h')%&gt;% \n  layout(title = 'Vistors',yaxis = list(title='Regions',categoryorder = \"total ascending\"),\n         images = list(  \n      list(  \n        source = base64enc::dataURI(file = \"images/google_analytics-ar21.webp\")\n        ,xref = \"paper\"\n        ,yref = \"paper\" \n        ,x = 0.9\n        ,y = 0.3\n        ,sizex = 0.3\n        ,sizey = 0.3\n       ,xanchor=\"right\"  \n        ,layer = \"below\"\n      )  \n         \n         )\n)\n\nfig\n\n\n\n\n\n\n\n\nCode\nsample &lt;- ga_data(\n  my_property_id,\n  dimensions = c(\"date\",\"dayOfWeek\"),\n  metrics = c(\"activeUsers\", \"newUsers\",\"sessions\", \"screenPageViews\"),\n  date_range = c(from_date, to_date)\n) %&gt;% \narrange(desc(date)) %&gt;% mutate(weekend_date=floor_date(date, \"week\")+7)\n\nsample\n\n\n# A tibble: 100 × 7\n   date       dayOfWeek activeUsers newUsers sessions screenPageViews\n   &lt;date&gt;     &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;           &lt;dbl&gt;\n 1 2024-12-31 2                   2        2        2               2\n 2 2024-12-29 0                   2        0        4              11\n 3 2024-12-27 5                   2        0        5             215\n 4 2024-12-26 4                   2        1        2              23\n 5 2024-12-25 3                   3        1       10              37\n 6 2024-12-22 0                   2        0        3              39\n 7 2024-12-21 6                   2        0        5              20\n 8 2024-12-20 5                   4        2        7              63\n 9 2024-12-19 4                   2        0       11              39\n10 2024-12-18 3                   2        0        7              13\n# ℹ 90 more rows\n# ℹ 1 more variable: weekend_date &lt;date&gt;\n\n\nCode\nsample002=sample %&gt;% group_by(weekend_date) %&gt;% summarise(activeUsers=sum(activeUsers)\n                                                          ,sessions=sum(sessions))\n\n\n\n\nCode\nfig &lt;- plot_ly(data = sample002, x = ~weekend_date, y = ~sessions,mode = 'lines')%&gt;% layout(title = 'Vistors',images = list(  \n      list(  \n        source = base64enc::dataURI(file = \"images/google_analytics-ar21.webp\")\n        ,xref = \"paper\"\n        ,yref = \"paper\" \n        ,x = 0.4\n        ,y = 0.9\n        ,sizex = 0.3\n        ,sizey = 0.3\n       ,xanchor=\"left\"  \n      )  \n    )\n    ) \nfig\n\n\n\n\n\n\n\n\n6 reference:\nhttps://www.listendata.com/2023/09/how-to-use-google-analytics-in-r.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "1 google analytics",
      "google analytic in R"
    ]
  },
  {
    "objectID": "other/6 other/2 translation.html",
    "href": "other/6 other/2 translation.html",
    "title": "Translation",
    "section": "",
    "text": "Code\nlibrary(polyglotr)\n\n\n\n1 Translation word\n\n\nCode\nword_translation &lt;- linguee_word_translation(\"fruit\", source_language = \"en\", target_language = \"zh\")\n\nword_translation\n\n\n[1] \"水果\" \"果香\" \"果子\" \"果品\" \"实\"   \"檎\"  \n\n\n\n\n2 translate sentences\n\n\nCode\ngoogle_get_supported_languages()\n\n\n# A tibble: 194 × 2\n   Language  `ISO-639 code`\n   &lt;chr&gt;     &lt;chr&gt;         \n 1 Abkhaz    ab            \n 2 Acehnese  ace           \n 3 Acholi    ach           \n 4 Afrikaans af            \n 5 Albanian  sq            \n 6 Alur      alz           \n 7 Amharic   am            \n 8 Arabic    ar            \n 9 Armenian  hy            \n10 Assamese  as            \n# ℹ 184 more rows\n\n\n\n\nCode\ntexts &lt;- c(\"Hello, how are you?\", \n           \"I love programming!\", \n           \"This is a test.\")\n\nlanguages &lt;- c(\"es\", \"fr\", \"zh-CN\")\n\n\ncreate_translation_table(texts, languages)\n\n\n        original_word                           es                          fr\n1 Hello, how are you?           ¿Hola, cómo estás? Bonjour comment allez-vous?\n2 I love programming! ¡Me encanta la programación!   J'adore la programmation!\n3     This is a test.          Esta es una prueba.           Ceci est un test.\n           zh-CN\n1       你好吗？\n2   我喜欢编程！\n3 这是一个测试。\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "6 other",
      "Translation"
    ]
  },
  {
    "objectID": "intro/3 Statistics.html",
    "href": "intro/3 Statistics.html",
    "title": "Statistics",
    "section": "",
    "text": "1 Statistics\n\n\n\n2 Variable\n\n\n\n3 Categorical variable\n\n\n\n4 Quantitative variable\n\n\n\n5 Variance vs Standard deviation\n\n\n\n6 Reference\nhttps://www.youtube.com/watch?v=MXaJ7sa7q-8\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.4 compiler_4.4.1    fastmap_1.2.0     cli_3.6.4        \n [5] tools_4.4.1       htmltools_0.5.8.1 rstudioapi_0.17.1 yaml_2.3.10      \n [9] rmarkdown_2.28    knitr_1.48        jsonlite_1.8.9    xfun_0.48        \n[13] digest_0.6.37     rlang_1.1.5       evaluate_1.0.1   \n\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Intro",
      "Statistics"
    ]
  },
  {
    "objectID": "intro/2 probability.html",
    "href": "intro/2 probability.html",
    "title": "Probability",
    "section": "",
    "text": "Probability is the branch of mathematics concerning events and numerical descriptions of how likely they are to occur. The probability of an event is a number between 0 and 1; the larger the probability, the more likely an event is to occur.",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#draw-10-number-from-1-to-10",
    "href": "intro/2 probability.html#draw-10-number-from-1-to-10",
    "title": "Probability",
    "section": "1.1 draw 10 number from 1 to 10",
    "text": "1.1 draw 10 number from 1 to 10\n\n\nCode\na=sample(1:10,10, replace=T) \na\n\n\n [1]  9  7  1  6  8  8  9  8 10  1\n\n\neach number around 10%\n\n\nCode\nas.data.frame(table(a))\n\n\n   a Freq\n1  1    2\n2  6    1\n3  7    1\n4  8    3\n5  9    2\n6 10    1",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#draw-10000-number-from-1-to-10",
    "href": "intro/2 probability.html#draw-10000-number-from-1-to-10",
    "title": "Probability",
    "section": "1.2 draw 10,000 number from 1 to 10",
    "text": "1.2 draw 10,000 number from 1 to 10\n\n\nCode\na=sample(1:10,10000, replace=T) \n\n\neach number around 10%\n\n\nCode\nas.data.frame(table(a))\n\n\n    a Freq\n1   1  986\n2   2 1027\n3   3 1030\n4   4  975\n5   5 1023\n6   6  967\n7   7  943\n8   8  998\n9   9 1052\n10 10  999",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#permutationsorder-dose-matter-2-number-from-4-number",
    "href": "intro/2 probability.html#permutationsorder-dose-matter-2-number-from-4-number",
    "title": "Probability",
    "section": "2.1 Permutations(order dose matter), 2 number from 4 number",
    "text": "2.1 Permutations(order dose matter), 2 number from 4 number\n\n\nCode\nlibrary(gtools)\nall_num=4\nchoose=2\n\nres&lt;- permutations(n= all_num, r = choose, v = c(1:all_num))\nres\n\n\n      [,1] [,2]\n [1,]    1    2\n [2,]    1    3\n [3,]    1    4\n [4,]    2    1\n [5,]    2    3\n [6,]    2    4\n [7,]    3    1\n [8,]    3    2\n [9,]    3    4\n[10,]    4    1\n[11,]    4    2\n[12,]    4    3\n\n\n\n\nCode\nprint (nrow(res))\n\n\n[1] 12\n\n\nall_num!/choose!\n4!/2!\n\n\nCode\n(4*3*2*1)/(2*1)\n\n\n[1] 12\n\n\nor\n\n\nCode\nfactorial(4) / factorial(2)\n\n\n[1] 12",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#combinationsorder-no-matter-2-number-from-4-number",
    "href": "intro/2 probability.html#combinationsorder-no-matter-2-number-from-4-number",
    "title": "Probability",
    "section": "2.2 Combinations(order no matter), 2 number from 4 number",
    "text": "2.2 Combinations(order no matter), 2 number from 4 number\n\n\nCode\nlibrary(gtools)\nall_num=4\nchoose=2\n\nres&lt;- combinations(n= all_num, r = choose, v = c(1:all_num))\nres\n\n\n     [,1] [,2]\n[1,]    1    2\n[2,]    1    3\n[3,]    1    4\n[4,]    2    3\n[5,]    2    4\n[6,]    3    4\n\n\n\n\nCode\nprint (nrow(res))\n\n\n[1] 6\n\n\nall_num!/((all_num-choose)! * choose!\n4!/((4-2)! * 2!)\n\n\nCode\n(4*3*2*1)/((2*1)*(2*1))\n\n\n[1] 6\n\n\nor\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#soluition-1pat-least-onep1-snoringp2-snoringp3-snoringp4-snoring",
    "href": "intro/2 probability.html#soluition-1pat-least-onep1-snoringp2-snoringp3-snoringp4-snoring",
    "title": "Probability",
    "section": "3.1 soluition 1:P(at least one)=P(1 snoring)+P(2 snoring)+P(3 snoring)+P(4 snoring)",
    "text": "3.1 soluition 1:P(at least one)=P(1 snoring)+P(2 snoring)+P(3 snoring)+P(4 snoring)\n\n3.1.1 0 snoring\n\n\nCode\np0=(0.8*0.8*0.8*0.8)\np0\n\n\n[1] 0.4096\n\n\n\n\n3.1.2 1 snoring\n\n\nCode\np1=(0.2*0.8*0.8*0.8)*4\np1\n\n\n[1] 0.4096\n\n\n\n\n3.1.3 2 snoring\nchoose 2 from 4: factorial(4) / (factorial(4-2)*factorial(2))\ntotal 6 Permutations\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6\n\n\n\n\nCode\np2=(0.2*0.2*0.8*0.8)*6\np2\n\n\n[1] 0.1536\n\n\n\n\n3.1.4 3 snoring\nchoose 3 from 4 Combinations(order matter),factorial(4) / (factorial(4-3)*factorial(3))\n4 Combinations:\n\n\nCode\nfactorial(4) / (factorial(4-3)*factorial(3))\n\n\n[1] 4\n\n\n\n\nCode\np3=(0.2*0.2*0.2*0.8)*4\np3\n\n\n[1] 0.0256\n\n\n\n\n3.1.5 4 snoring\n\n\nCode\np4=(0.2*0.2*0.2*0.2)\np4\n\n\n[1] 0.0016\n\n\n\n\n3.1.6 at least one:\n\n\nCode\nP_at_least_one=p1+p2+p3+p4\nP_at_least_one\n\n\n[1] 0.5904",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#solution-2pat-least-one1-pno-one-snoring",
    "href": "intro/2 probability.html#solution-2pat-least-one1-pno-one-snoring",
    "title": "Probability",
    "section": "3.2 solution 2:P(at least one)=1-P(no one snoring)",
    "text": "3.2 solution 2:P(at least one)=1-P(no one snoring)\n\n\nCode\nP_at_least_one2=1-0.8*0.8*0.8*0.8\nP_at_least_one2\n\n\n[1] 0.5904",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-1.what-is-probability-of-choose-4-number-from-4-number-and-0-correctall-wrong.",
    "href": "intro/2 probability.html#question-1.what-is-probability-of-choose-4-number-from-4-number-and-0-correctall-wrong.",
    "title": "Probability",
    "section": "4.1 Question 1.what is probability of choose 4 number from 4 number and 0 correct(all wrong).",
    "text": "4.1 Question 1.what is probability of choose 4 number from 4 number and 0 correct(all wrong).\n\n4.1.1 permutations(order matter)\n4!=432*1=24 combination\n\n\nCode\n4*3*2*1\n\n\n[1] 24\n\n\n\n\n4.1.2 Derangement\n\nor\n\nThere are 9 Derangement(all wrong)\n\n\nCode\ne=2.71828\n#D(4)=(4!+1)/e\n\nD_4=floor((4*3*2*1+1)/e)\nD_4\n\n\n[1] 9\n\n\nSo the all wrong probability of choose 4 number from 4 number is\n\n\nCode\nQ1=(floor((4*3*2*1+1)/e))/(4*3*2*1)\nQ1\n\n\n[1] 0.375",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-2.-what-is-probability-of-choose-4-number-from-4-number-and-only-1-correct",
    "href": "intro/2 probability.html#question-2.-what-is-probability-of-choose-4-number-from-4-number-and-only-1-correct",
    "title": "Probability",
    "section": "4.2 Question 2. what is probability of choose 4 number from 4 number and only 1 correct",
    "text": "4.2 Question 2. what is probability of choose 4 number from 4 number and only 1 correct\n\n4.2.1 permutations(order matter)\n4!=432*1=24 combination\n\n\nCode\n4*3*2*1\n\n\n[1] 24\n\n\n\n\n4.2.2 Derangement\nany of the 4 number can be correct, and remaining 3 number all wrong and it become the D(3) Derangement problem\n\n\nCode\ne=2.71828\n#D(3)=(3!+1)/e\n\nD_3=floor((3*2*1+1)/e)\nD_3\n\n\n[1] 2\n\n\nSo the probability of choose 4 number from 4 number and only 1 correct is\n\n\nCode\nQ2=(4*2)/(4*3*2*1)\nQ2\n\n\n[1] 0.3333333",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-3.-what-is-probability-of-choose-4-number-from-4-number-and-only-2-correct",
    "href": "intro/2 probability.html#question-3.-what-is-probability-of-choose-4-number-from-4-number-and-only-2-correct",
    "title": "Probability",
    "section": "4.3 Question 3. what is probability of choose 4 number from 4 number and only 2 correct",
    "text": "4.3 Question 3. what is probability of choose 4 number from 4 number and only 2 correct\nthe problem is same as choose 2 number from 4 number.total 6 Combinations(order no matter)\n\n\nCode\nfactorial(4) / (factorial(4-2)*factorial(2))\n\n\n[1] 6\n\n\nSo the probability of choose 4 number from 4 number and only 2 correct is\n\n\nCode\nQ3=6/(4*3*2*1)\nQ3\n\n\n[1] 0.25",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-4.what-is-probability-of-choose-4-number-from-4-number-and-only-3-correct",
    "href": "intro/2 probability.html#question-4.what-is-probability-of-choose-4-number-from-4-number-and-only-3-correct",
    "title": "Probability",
    "section": "4.4 Question 4.what is probability of choose 4 number from 4 number and only 3 correct",
    "text": "4.4 Question 4.what is probability of choose 4 number from 4 number and only 3 correct\nIts same as all correct. since 3 correct the last one will be also correct\n\n\nCode\nQ4=1/(4*3*2*1)\nQ4\n\n\n[1] 0.04166667",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#question-5.what-is-probability-of-choose-4-number-from-4-number-and-4-correctall-correct",
    "href": "intro/2 probability.html#question-5.what-is-probability-of-choose-4-number-from-4-number-and-4-correctall-correct",
    "title": "Probability",
    "section": "4.5 Question 5.what is probability of choose 4 number from 4 number and 4 correct(all correct)",
    "text": "4.5 Question 5.what is probability of choose 4 number from 4 number and 4 correct(all correct)\nIts same as all correct. since 3 correct the last one will be also correct\nSo all event total probability is 1\n\n\nCode\nQ1+Q2+Q3+Q4\n\n\n[1] 1",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#binomial-distribution",
    "href": "intro/2 probability.html#binomial-distribution",
    "title": "Probability",
    "section": "5.1 Binomial distribution",
    "text": "5.1 Binomial distribution\nthe binomial distribution with parameters n and p is the discrete probability distribution of the number of successes in a sequence of n independent experiments, each asking a yes–no question, and each with its own Boolean-valued outcome: success (with probability p) or failure (with probability 1-p)\nfor a single trial, i.e., n = 1, the binomial distribution is a Bernoulli distribution\n\n5.1.1 Probability density function (pdf)\n1 people snoring Probability\n\n\nCode\nn = 4 # number of people in a room\np = 0.2 # snoring\n\ndbinom(x=1, size=n, prob=p) # 1 people snoring Probability\n\n\n[1] 0.4096\n\n\n1,2,3,4 people snoring Probability\n\n\nCode\nn = 4 # number of people in a room\np = 0.2 # snoring\n\ndbinom(x=c(0,1,2,3,4), size=n, prob=p) # 1 people snoring Probability\n\n\n[1] 0.4096 0.4096 0.1536 0.0256 0.0016\n\n\nsum of all event Probability is always 1\n\n\nCode\nsum(dbinom(x=c(0,1,2,3,4), size=n, prob=p))\n\n\n[1] 1\n\n\n\n\n5.1.2 Probability function\n&lt;=1 people snoring\n\n\nCode\npbinom(q=1, size=n,prob=p, lower.tail=TRUE) \n\n\n[1] 0.8192\n\n\n\n\n5.1.3 generate 10000 number from 0 to 4 with Probability=0.2\n\n\nCode\na=rbinom(1000,size=4,0.2) \n\ntable(a)\n\n\na\n  0   1   2   3 \n418 397 160  25",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#normal-distributionalso-called-gaussian-distribution",
    "href": "intro/2 probability.html#normal-distributionalso-called-gaussian-distribution",
    "title": "Probability",
    "section": "5.2 Normal Distribution(also called Gaussian distribution)",
    "text": "5.2 Normal Distribution(also called Gaussian distribution)\nX is a random variable following a normal distribution with mean μ and variance σ2\n68% within 1 standard deviation\n95% within 2 standard deviation\n99.7% within 3 standard deviation\n\n5.2.1 Z score and standard Normal Distribution\nstandard Normal Distribution is special Normal Distribution with mean=0 and standard deviation =1\n\nZ table\n\n\n\n5.2.2 Standardization\ntransfer any normal Distribution into standard Normal Distribution\n\nformula:\n\n\n\n5.2.3 R function\n\n\n\n5.2.4 Probability Density Function (pdf)\n\ncomputes the pdf at location 0 of N(0,4),normal distribution with mean 1 and variance 4.\nsd is the standard deviation, which is the square root of the variance.\n\n\nCode\ndnorm(0, mean = 1, sd = 2)\n\n\n[1] 0.1760327\n\n\n\n\n5.2.5 cumulative distribution function(cdf)\n\nProbability of &lt;=70 from Normal Distribtion with mean=75 and sd=5\nsmaller than 1 standard deviation from the mean\n\n\nCode\npnorm(q=70,mean=75,sd=5)\n\n\n[1] 0.1586553\n\n\nProbability of &gt;=80 from Normal Distribtion with mean=75 and sd=5\nlarger than 1 standard deviation from the mean\n\n\nCode\n1-pnorm(q=80,mean=75,sd=5)\n\n\n[1] 0.1586553\n\n\n\n\n5.2.6 quantile function\n\nQ1\n\n\nCode\nqnorm(p=0.25,mean=75,sd=5)\n\n\n[1] 71.62755\n\n\nQ3\n\n\nCode\nqnorm(p=0.75,mean=75,sd=5)\n\n\n[1] 78.37245\n\n\n\n\n5.2.7 random number generator\n\n\n\n5.2.8 generate 1000 number from Normal Distribtion with mean=75 and sd=5\n\n\nCode\nnd=rnorm(n=1000,mean=75,sd=5)\nnd=sort(nd)\n\n\n\n\nCode\nmean(nd)\n\n\n[1] 74.8938\n\n\n\n\nCode\nsd(nd)\n\n\n[1] 5.212053\n\n\n\n\nCode\nhist(nd)\n\n\n\n\n\n\n\n\n\n\n\nCode\ndens=dnorm(nd,mean=mean(nd),sd=sd(nd))\n\n\n\n\nCode\nplot(nd,dens,type='l')\n\n\n\n\n\n\n\n\n\n\n\n5.2.9 check data normally distributed\n\n\nCode\nnd_data=rnorm(n=1000,mean=0,sd=2)\nnd_data=sort(nd_data)\n\n\n\n\nCode\nnon_nd_data=seq(1:1000)\nnon_nd_data=sort(non_nd_data)\n\n\n\n5.2.9.1 method 1 :histogram\n\n\nCode\n#define plotting region\npar(mfrow=c(1,2)) \n\n#create histogram for both datasets\nhist(nd_data, col='steelblue', main='Normal')\nhist(non_nd_data, col='steelblue', main='Non-normal')\n\n\n\n\n\n\n\n\n\n\n\n5.2.9.2 method 2 :Q-Q plot\n\n\nCode\n#define plotting region\npar(mfrow=c(1,2)) \n\n#create Q-Q plot for both datasets\nqqnorm(nd_data, main='Normal')\nqqline(nd_data)\n\nqqnorm(non_nd_data, main='Non-normal')\nqqline(non_nd_data)\n\n\n\n\n\n\n\n\n\n\n\n5.2.9.3 Method 3: Shapiro-Wilk Test\nnull hypothesis (H0):The data is normally distributed.\nif p-value =&gt;0.05 then normally distributed\n\n\nCode\n#perform shapiro-wilk test\nshapiro.test(nd_data)\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  nd_data\nW = 0.99895, p-value = 0.8451\n\n\nif p-value &lt;0.05 then not normally distributed(reject the null hypothesis)\n\n\nCode\n#perform shapiro-wilk test\nshapiro.test(non_nd_data)\n\n\n\n    Shapiro-Wilk normality test\n\ndata:  non_nd_data\nW = 0.95481, p-value &lt; 2.2e-16",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#student-t-distribution",
    "href": "intro/2 probability.html#student-t-distribution",
    "title": "Probability",
    "section": "5.3 student t distribution",
    "text": "5.3 student t distribution\n\n\n5.3.1 one sample t test\n\n\n5.3.2 two sample t test\n\n\n5.3.3 Paired t test\n\n\n5.3.4 Pearson correlation coefficient",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#f-distribution",
    "href": "intro/2 probability.html#f-distribution",
    "title": "Probability",
    "section": "5.4 F distribution",
    "text": "5.4 F distribution\n\n5.4.1 ANOVA",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#chi-square",
    "href": "intro/2 probability.html#chi-square",
    "title": "Probability",
    "section": "5.5 Chi-square",
    "text": "5.5 Chi-square\n\n5.5.1 Chi-square goodness of fit test\n\n\n5.5.2 Chi-square test of independence",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "intro/2 probability.html#poisson-distribution",
    "href": "intro/2 probability.html#poisson-distribution",
    "title": "Probability",
    "section": "5.6 Poisson Distribution",
    "text": "5.6 Poisson Distribution",
    "crumbs": [
      "Intro",
      "Probability"
    ]
  },
  {
    "objectID": "Plot/5 Map/3 leaflet US.html",
    "href": "Plot/5 Map/3 leaflet US.html",
    "title": "US map",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(chromote)\nlibrary(janitor)\nlibrary(tidygeocoder)\nlibrary(leaflet)\nlibrary(sf)\n\n\n\n\nCode\nlibrary(maps)\nmapStates = map(\"state\", fill = TRUE, plot = FALSE)\n\n\n\n\nCode\njson_data=read_sf(\"us-states.json\")\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\n2 map\n\n\nCode\ndata001=read_csv('./data/us shooting dagta001.csv')\n\n\n\n\nCode\ndata001=sample_n(data001,10) %&gt;% clean_names() %&gt;% mutate(full_adress=paste(address,city_or_county,state))\n\n\n\n\nCode\nglimpse(data001)\n\n\nRows: 10\nColumns: 12\n$ incident_id       &lt;dbl&gt; 2781501, 2789603, 2779827, 2788820, 2782337, 2786468…\n$ incident_date     &lt;chr&gt; \"December 18, 2023\", \"December 29, 2023\", \"December …\n$ state             &lt;chr&gt; \"District of Columbia\", \"New York\", \"California\", \"M…\n$ city_or_county    &lt;chr&gt; \"Washington\", \"Syracuse\", \"Los Angeles\", \"Yazoo City…\n$ address           &lt;chr&gt; \"44th St NE and Eads St NE\", \"611 2nd North St\", \"S …\n$ victims_killed    &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 0\n$ victims_injured   &lt;dbl&gt; 1, 1, 1, 1, 0, 0, 0, 1, 1, 1\n$ suspects_killed   &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0\n$ suspects_injured  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 0, 0, 0\n$ suspects_arrested &lt;dbl&gt; 0, 1, 0, 1, 0, 1, 1, 0, 0, 0\n$ operations        &lt;chr&gt; \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/…\n$ full_adress       &lt;chr&gt; \"44th St NE and Eads St NE Washington District of Co…\n\n\n\n\n3 search all address to latitude, longitude\n\n\nCode\n# geocode the addresses\ndata002 &lt;- data001 %&gt;%\n  geocode(full_adress, method = 'arcgis', lat = latitude , long = longitude)\n\nglimpse(data002)\n\n\nRows: 10\nColumns: 14\n$ incident_id       &lt;dbl&gt; 2781501, 2789603, 2779827, 2788820, 2782337, 2786468…\n$ incident_date     &lt;chr&gt; \"December 18, 2023\", \"December 29, 2023\", \"December …\n$ state             &lt;chr&gt; \"District of Columbia\", \"New York\", \"California\", \"M…\n$ city_or_county    &lt;chr&gt; \"Washington\", \"Syracuse\", \"Los Angeles\", \"Yazoo City…\n$ address           &lt;chr&gt; \"44th St NE and Eads St NE\", \"611 2nd North St\", \"S …\n$ victims_killed    &lt;dbl&gt; 0, 0, 0, 0, 0, 1, 0, 0, 0, 0\n$ victims_injured   &lt;dbl&gt; 1, 1, 1, 1, 0, 0, 0, 1, 1, 1\n$ suspects_killed   &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0\n$ suspects_injured  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 0, 0, 0\n$ suspects_arrested &lt;dbl&gt; 0, 1, 0, 1, 0, 1, 1, 0, 0, 0\n$ operations        &lt;chr&gt; \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/A\", \"N/…\n$ full_adress       &lt;chr&gt; \"44th St NE and Eads St NE Washington District of Co…\n$ latitude          &lt;dbl&gt; 38.89555, 43.07529, 34.01009, 32.86100, 37.26622, 39…\n$ longitude         &lt;dbl&gt; -76.93921, -76.16025, -118.28723, -90.40963, -79.970…\n\n\n\n\nCode\ndata003=data002 %&gt;% filter(is.na(latitude)==FALSE,(is.na(longitude)==FALSE))\n\n\n\n\n4 map\n\n\nCode\nm &lt;- leaflet(data=mapStates) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers( lng=data003$longitude, lat=data003$latitude, popup=data003$state)%&gt;% \n  addPolygons(fillColor = topo.colors(10, alpha = NULL), stroke = FALSE)\n\nm  \n\n\n\n\n\n\n\n\n5 US gdp by State\n\n\nCode\nglimpse(mapStates)\n\n\nList of 4\n $ x    : num [1:15599] -87.5 -87.5 -87.5 -87.5 -87.6 ...\n $ y    : num [1:15599] 30.4 30.4 30.4 30.3 30.3 ...\n $ range: num [1:4] -124.7 -67 25.1 49.4\n $ names: chr [1:63] \"alabama\" \"arizona\" \"arkansas\" \"california\" ...\n - attr(*, \"class\")= chr \"map\"\n\n\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\nper_gdp_usd=read_excel('US state gpd 2022.xlsx') %&gt;% mutate(names=str_replace(names,'\\\\*','') %&gt;% str_trim() )\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"names\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"magma\", NULL)\n\n\nm &lt;- leaflet(map_sf002) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n   addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_2022_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_2022_usd, \"（千 美元）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", round(map_sf002$per_2022_usd/1000), \"K &lt;br/&gt;\",\n       \"总gpd 美元：\", round(map_sf002$total_2022_usd), \"M &lt;br/&gt;\"\n\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_2022_usd, opacity = 1.0\n    )\n  \n\n\n\nm  \n\n\n\n\n\n\n\n\n6 resouce:\nhttps://www.gunviolencearchive.org/reports/mass-shooting?page=8&year=2023\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "US map"
    ]
  },
  {
    "objectID": "Plot/5 Map/4 HK whisky bar.html",
    "href": "Plot/5 Map/4 HK whisky bar.html",
    "title": "HK whisk bar",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(chromote)\nlibrary(janitor)\nlibrary(tidygeocoder)\nlibrary(leaflet)\nlibrary(sf)\n\n\n\n\nCode\nbar_name=c('Maltcask@太子','House Welley@中環','Casky@灣仔')\nbar_address=c('169 Sai Yeung Choi St N, Mong Kok,Hongkong','97 Wellington St, Central,Hongkong','20-24 Lockhart Road, Wan Chai,Hongkong')\n\nbar_logo=c('https://img.shoplineapp.com/media/image_clips/62f16f8d7df01b0025a82bad/original.png','https://static.wixstatic.com/media/2d390e_27d0b3da21a94459bccf741600782591~mv2.jpg/v1/fill/w_160,h_160,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/Grey.jpg','https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQsSelY2PRVxaxyU_Ydf9CHgtUrClzpxpqJ2g&s')\n\n\ndata001=tibble(bar_name,bar_address,bar_logo)\n\n\n\n\n2 search all address to latitude, longitude\n\n\nCode\n# geocode the addresses\ndata002 =data001 %&gt;% geocode(bar_address, method = 'osm',lat = latitude , long = longitude)\n\nglimpse(data002)\n\n\nRows: 3\nColumns: 5\n$ bar_name    &lt;chr&gt; \"Maltcask@太子\", \"House Welley@中環\", \"Casky@灣仔\"\n$ bar_address &lt;chr&gt; \"169 Sai Yeung Choi St N, Mong Kok,Hongkong\", \"97 Wellingt…\n$ bar_logo    &lt;chr&gt; \"https://img.shoplineapp.com/media/image_clips/62f16f8d7df…\n$ latitude    &lt;dbl&gt; 22.32539, 22.28360, 22.27811\n$ longitude   &lt;dbl&gt; 114.1688, 114.1543, 114.1727\n\n\n\n\n3 map\n\n\nCode\n# Choose Icon:\nleafIcons &lt;- icons(data002$bar_logo,iconWidth =60, iconHeight = 50)\n\n\nm &lt;- leaflet() %&gt;%\n  \n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers(lng=data002$longitude, lat=data002$latitude,icon = leafIcons)\n \n\nm  \n\n\n\n\n\n\n\n\nCode\nm &lt;- leaflet(height=2000, width=2000) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addPopups( lng=data002$longitude, lat=data002$latitude, data002$bar_name\n             ,options = popupOptions(closeButton = FALSE)\n             \n            )\n \n\nm  \n\n\n\n\n\n\n\n\nCode\nm &lt;- leaflet(height=2500, width=2000) %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n addMarkers(\n    lng=data002$longitude, lat=data002$latitude\n    ,label = data002$bar_name,options = popupOptions(closeButton = FALSE),\n   \n    labelOptions = labelOptions(noHide = TRUE, direction = \"bottom\",\n      style = list(\n        \"color\" = \"red\",\n        \"font-family\" = \"serif\",\n        \"font-style\" = \"italic\",\n        \"box-shadow\" = \"2px 2px rgba(0,0,0,0.25)\",\n        \"font-size\" = \"12px\",\n        \"border-color\" = \"rgba(0,0,0,0.5)\"\n      ))) \n  \n\nm  \n\n\n\n\n\n\n\n\n4 resouce:\nhttps://www.gunviolencearchive.org/reports/mass-shooting?page=8&year=2023\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "HK whisk bar"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html",
    "href": "Plot/1 ggplot2.html",
    "title": "ggplot2 in R",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(gapminder)\nlibrary(ggpubr)\nlibrary(ggthemr)\n\nlibrary(ggplot2)\nlibrary(plotly)\n\nlibrary(magick)\npackageVersion(\"ggplot2\")\n\n\n[1] '3.5.1'\nCode\nlibrary(reshape2)\ntips=tips\nhead(tips)\n\n\n  total_bill  tip    sex smoker day   time size\n1      16.99 1.01 Female     No Sun Dinner    2\n2      10.34 1.66   Male     No Sun Dinner    3\n3      21.01 3.50   Male     No Sun Dinner    3\n4      23.68 3.31   Male     No Sun Dinner    2\n5      24.59 3.61 Female     No Sun Dinner    4\n6      25.29 4.71   Male     No Sun Dinner    4\nCode\ndata001=gapminder\nhead(data001)\n\n\n# A tibble: 6 × 6\n  country     continent  year lifeExp      pop gdpPercap\n  &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;\n1 Afghanistan Asia       1952    28.8  8425333      779.\n2 Afghanistan Asia       1957    30.3  9240934      821.\n3 Afghanistan Asia       1962    32.0 10267083      853.\n4 Afghanistan Asia       1967    34.0 11537966      836.\n5 Afghanistan Asia       1972    36.1 13079460      740.\n6 Afghanistan Asia       1977    38.4 14880372      786.",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group",
    "href": "Plot/1 ggplot2.html#color-by-group",
    "title": "ggplot2 in R",
    "section": "1.1 color by group",
    "text": "1.1 color by group\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#size-by-group",
    "href": "Plot/1 ggplot2.html#size-by-group",
    "title": "ggplot2 in R",
    "section": "1.2 size by group",
    "text": "1.2 size by group\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,colour = sex,size=size)) + geom_point()\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#line-plot",
    "href": "Plot/1 ggplot2.html#line-plot",
    "title": "ggplot2 in R",
    "section": "1.3 line Plot",
    "text": "1.3 line Plot\n\n\nCode\ndata002= data001 %&gt;% group_by(continent,year) %&gt;% summarise(pop=sum(pop))\n\n\n\n\nCode\np=ggplot(data002 %&gt;%filter(continent=='Asia'), aes(year, pop)) + geom_line()\np\n\n\n\n\n\n\n\n\n\n\n1.3.1 change line size\n\n\nCode\np=ggplot(data002 %&gt;%filter(continent=='Asia'), aes(year, pop)) + geom_line(size=5)\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group-1",
    "href": "Plot/1 ggplot2.html#color-by-group-1",
    "title": "ggplot2 in R",
    "section": "1.4 color by group",
    "text": "1.4 color by group\n\n\nCode\np=ggplot(data002, aes(year, pop,colour = continent)) + geom_line()\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group-2",
    "href": "Plot/1 ggplot2.html#color-by-group-2",
    "title": "ggplot2 in R",
    "section": "2.1 color by group",
    "text": "2.1 color by group\n\n\nCode\nggplot(data002, aes(gdpPercap,,fill = continent)) +geom_histogram(position = 'dodge')",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#show-number",
    "href": "Plot/1 ggplot2.html#show-number",
    "title": "ggplot2 in R",
    "section": "3.1 show number",
    "text": "3.1 show number\n\n\nCode\nggplot(data002, aes(x=continent, y=pop)) +\n  geom_bar(stat=\"identity\")+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#change-bar-color",
    "href": "Plot/1 ggplot2.html#change-bar-color",
    "title": "ggplot2 in R",
    "section": "3.2 change bar color",
    "text": "3.2 change bar color\n\n\nCode\nggplot(data002, aes(x=continent, y=pop)) +\n  geom_bar(stat=\"identity\",fill='red')+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)\n\n\n\n\n\n\n\n\n\nCode\n# box plot",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#bar-plot-order",
    "href": "Plot/1 ggplot2.html#bar-plot-order",
    "title": "ggplot2 in R",
    "section": "3.3 bar plot order",
    "text": "3.3 bar plot order\n\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop)) +\n  geom_bar(stat=\"identity\",fill='red')+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)\n\n\n\n\n\n\n\n\n\nCode\n# box plot\n\n\n\n\nCode\nggplot(data002, aes(x=reorder(continent,-pop), y=pop)) +\n  geom_bar(stat=\"identity\",fill='red')+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)\n\n\n\n\n\n\n\n\n\nCode\n# box plot",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#horizontal-barplot",
    "href": "Plot/1 ggplot2.html#horizontal-barplot",
    "title": "ggplot2 in R",
    "section": "3.4 Horizontal Barplot",
    "text": "3.4 Horizontal Barplot\n` ::: {.cell}\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop)) +\n  geom_bar(stat=\"identity\",fill='red')+scale_y_continuous(labels = scales::comma)+geom_text(aes(label = pop), vjust = -0.2)+coord_flip()\n\n\n\n\n\n\n\n\n\nCode\n# box plot\n\n:::",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#make-bar-transparency",
    "href": "Plot/1 ggplot2.html#make-bar-transparency",
    "title": "ggplot2 in R",
    "section": "3.5 make bar transparency",
    "text": "3.5 make bar transparency\n\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop)) +\n  geom_bar(stat=\"identity\",fill='red' ,alpha=0.2)+coord_flip()",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#make-bar-close-to-axis",
    "href": "Plot/1 ggplot2.html#make-bar-close-to-axis",
    "title": "ggplot2 in R",
    "section": "3.6 make bar close to axis",
    "text": "3.6 make bar close to axis\n\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop)) +\n  geom_bar(stat=\"identity\",alpha=0.2,fill='red')+coord_flip()+scale_y_continuous(expand = expansion(mult = c(0, .1)))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#change-one-bar-color",
    "href": "Plot/1 ggplot2.html#change-one-bar-color",
    "title": "ggplot2 in R",
    "section": "3.7 change one bar color",
    "text": "3.7 change one bar color\n\n\nCode\nggplot(data002, aes(x=reorder(continent,pop), y=pop,fill=factor(ifelse(continent==\"Asia\",\"Highlighted\",\"Normal\")))) +\n  geom_bar(stat=\"identity\",alpha=0.2,show.legend = FALSE)+scale_fill_manual(name = \"continent\", values=c(\"red\",\"grey50\"))+coord_flip()+scale_y_continuous(expand = expansion(mult = c(0, .1)))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group-3",
    "href": "Plot/1 ggplot2.html#color-by-group-3",
    "title": "ggplot2 in R",
    "section": "3.8 color by group",
    "text": "3.8 color by group",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#color-by-group-4",
    "href": "Plot/1 ggplot2.html#color-by-group-4",
    "title": "ggplot2 in R",
    "section": "5.1 color by group",
    "text": "5.1 color by group\n\n\nCode\np=ggplot(tips, aes(day,tip,color=sex)) + geom_jitter(position=position_jitterdodge())\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-title",
    "href": "Plot/1 ggplot2.html#add-title",
    "title": "ggplot2 in R",
    "section": "7.1 add title",
    "text": "7.1 add title\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-subtitle",
    "href": "Plot/1 ggplot2.html#add-subtitle",
    "title": "ggplot2 in R",
    "section": "7.2 add subtitle",
    "text": "7.2 add subtitle\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\",subtitle = \"Subtitle of the plot\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-footnote",
    "href": "Plot/1 ggplot2.html#add-footnote",
    "title": "ggplot2 in R",
    "section": "7.3 add footnote",
    "text": "7.3 add footnote\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")+labs(caption = \"this is footnote\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#adjust-plot-size",
    "href": "Plot/1 ggplot2.html#adjust-plot-size",
    "title": "ggplot2 in R",
    "section": "7.4 adjust plot size",
    "text": "7.4 adjust plot size\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")+theme(\n  plot.margin = margin(2, 2, 5, 5, \"cm\"))\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#adjust-text-size-and-center-title",
    "href": "Plot/1 ggplot2.html#adjust-text-size-and-center-title",
    "title": "ggplot2 in R",
    "section": "7.5 adjust text size and center title",
    "text": "7.5 adjust text size and center title\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ ggtitle(\"tip by sex\")+labs(caption = \"this is footnote\")\n\np+theme(plot.title = element_text(hjust = 0.5),text = element_text(size = 30))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#change-x-y-name",
    "href": "Plot/1 ggplot2.html#change-x-y-name",
    "title": "ggplot2 in R",
    "section": "7.6 change x y name",
    "text": "7.6 change x y name\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+xlab(\"new x name\") + ylab(\"new y name\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-chinese",
    "href": "Plot/1 ggplot2.html#add-chinese",
    "title": "ggplot2 in R",
    "section": "7.7 add chinese",
    "text": "7.7 add chinese\n\n\nCode\nlibrary(showtext)\nshowtext_auto()\n\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"新的 x name\")+ scale_y_continuous(name=\"新的 y name\")\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#x-y-break-and-scales-limit",
    "href": "Plot/1 ggplot2.html#x-y-break-and-scales-limit",
    "title": "ggplot2 in R",
    "section": "7.8 x y break and scales limit",
    "text": "7.8 x y break and scales limit\n\n7.8.1 x scales limit\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\np+ xlim(min=0, 20)\n\n\n\n\n\n\n\n\n\n\n\n7.8.2 y scales limit\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\np+ ylim(0, 100)\n\n\n\n\n\n\n\n\n\n\n\n7.8.3 adding second aix\n\n\nCode\ndata002= data001%&gt;% group_by(year,continent) %&gt;% summarise(pop=sum(pop),lifeExp=mean(lifeExp))%&gt;%filter(continent=='Asia')\n\n\nremove scientific notation ::: {.cell}\n\nCode\ncoeff=1/40000000\n\n\np=ggplot(data002, aes(year, pop)) + geom_col() +\n  geom_line(aes(year,lifeExp/ coeff),size=2, color = \"red\") +scale_y_continuous(\"pop\", sec.axis = sec_axis(~.*coeff, name = \"lifeExp\"),labels = scales::comma)\np\n\n\n\n\n\n\n\n\n:::",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-logo",
    "href": "Plot/1 ggplot2.html#add-logo",
    "title": "ggplot2 in R",
    "section": "11.1 add logo",
    "text": "11.1 add logo\n\n\nCode\n# Add your company's logo to the graph you created\nlogo &lt;- image_read(\"logo.png\")\np\ngrid::grid.raster(logo, x = 0.1, y = 0, just = c('left', 'bottom'), width = unit(0.4, 'inches'))",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/1 ggplot2.html#add-background-image",
    "href": "Plot/1 ggplot2.html#add-background-image",
    "title": "ggplot2 in R",
    "section": "11.2 add background image",
    "text": "11.2 add background image\n\n\nCode\nimg4=image_read(\"bee.png\")\n\n\"bee.png\"\n\n\n[1] \"bee.png\"\n\n\nCode\np=ggplot(tips, aes(tip, total_bill,color=sex)) + background_image(img4) +geom_point()+ scale_x_continuous(name=\"new x name\")+ scale_y_continuous(name=\"new y name\")\n\n\np",
    "crumbs": [
      "Plot",
      "ggplot2 in R"
    ]
  },
  {
    "objectID": "Plot/3 image processing.html",
    "href": "Plot/3 image processing.html",
    "title": "image processing",
    "section": "",
    "text": "Code\nlibrary(magick)\n\n\n\n1 input\n\n\nCode\nraw_logo &lt;- image_read('./images/comb.webp')\n\n\n\n\n2 output\n\n\nCode\nimage_info(raw_logo)\n\n\n  format width height colorspace matte filesize density\n1   WEBP   450    303       sRGB  TRUE    49650   72x72\n\n\n\n\n3 change format\n\n\nCode\nnew_png &lt;- image_convert(raw_logo, \"png\")\n\n\n\n\nCode\nimage_info(new_png)\n\n\n  format width height colorspace matte filesize density\n1    PNG   450    303       sRGB  TRUE        0   72x72\n\n\n\n\n4 output\n\n\nCode\nimage_write(new_png, path = \"./images/new_png.png\", format = \"png\")\n\n\n\n\nCode\nraw_logo &lt;- image_read('./images/logo1.png')\n\n\n\n\nCode\nraw_logo %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE    53960   72x72\n\n\n\n\n\n\n\n\n\n\n\n5 fill corner white to greem\neach corner (top left, top right, bottom left, bottom right). For our real usage, we’re going to convert this “green” space to transparent instead.\n\n\nCode\nimg_filled &lt;- raw_logo %&gt;% \n    image_fill(\"green\", \"+1+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+140+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+1+99\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"green\", \"+140+99\", fuzz = 50, refcolor = \"white\")\n\nimg_filled %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n6 rotate\n\n\nCode\nimg_filled %&gt;% image_rotate(45) %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1632   1632       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n7 add border\n\n\nCode\nimg_filled %&gt;% image_border(\"#CD5C5C\",\"20x20\")\n\n\n\n\n\n\n\n\n\n\n\n8 make backgroup transparent\n\n\nCode\n# 0-100 distance fuzz match with green\nb=img_filled %&gt;% image_transparent(color='green',10)\n\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\nCode\nimage_write(b, path = \"b.png\", format = \"png\")\n\n\n\n\n9 change opacity level\n\n\nCode\nb=img_filled %&gt;% image_colorize(opacity =80, color = 'white')\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n10 change brightness level\n\n\nCode\nb=img_filled %&gt;%image_modulate(brightness = 30)\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n11 change blur level\n\n\nCode\nb=img_filled %&gt;%  image_blur(10, 5)\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n12 add text into picture\n\n\nCode\nb=img_filled %&gt;% image_annotate( \"The quick brown fox\", font = 'Times', size = 80,gravity = \"southwest\", color = \"red\")\n  \nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\n13 resize\nusing image_resize or image_scale ::: {.cell}\n\nCode\nb= img_filled%&gt;% image_resize(\"500\")\nb %&gt;% print()\n\n\n  format width height colorspace matte filesize density\n1    PNG   500    357       sRGB  TRUE        0   72x72\n\n\n\n\n\n\n\n\n:::\n\n\nCode\nimage_info(img_filled)\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       sRGB  TRUE        0   72x72\n\n\n\n\nCode\nimage_info(b)\n\n\n  format width height colorspace matte filesize density\n1    PNG   500    357       sRGB  TRUE        0   72x72\n\n\n\n\n14 make logo black\n\n\nCode\nimg_filled2 &lt;- raw_logo %&gt;% \n    image_fill(\"transparent\", \"+1+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+140+1\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+1+99\", fuzz = 50, refcolor = \"white\") %&gt;% \n    image_fill(\"transparent\", \"+140+99\", fuzz = 50, refcolor = \"white\")\n\n\n\n\nCode\nimg_filled2 %&gt;% \n    image_channel(\"Opacity\") %&gt;% \n    image_convert(matte=FALSE) %&gt;% \n  print()\n\n\n  format width height colorspace matte filesize density\n1    PNG  1344    960       Gray FALSE        0   72x72\n\n\n\n\n\n\n\n\n\n\n\nsessionInfo()\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] magick_2.8.5\n\nloaded via a namespace (and not attached):\n [1] digest_0.6.37     fastmap_1.2.0     xfun_0.48         magrittr_2.0.3   \n [5] knitr_1.48        htmltools_0.5.8.1 png_0.1-8         rmarkdown_2.28   \n [9] cli_3.6.4         compiler_4.4.1    rstudioapi_0.17.1 tools_4.4.1      \n[13] evaluate_1.0.1    Rcpp_1.0.13-1     yaml_2.3.10       rlang_1.1.5      \n[17] jsonlite_1.8.9    htmlwidgets_1.6.4\n\n\n\n\n\n15 add backgroup image\n\n\nCode\nlibrary(ggplot2)\nlibrary(png)\nlibrary(grid)\nlibrary(ggimage)\n\n\n\n\nCode\nimg &lt;- readPNG(\"./images/new_png.png\")\n\n\n\n\nCode\nbees &lt;- data.frame(distance = c(0.5, 1, 1.5, 2, 2.5, 3),\n                  number = c(40, 34, 32, 22,18, 10))\n\nggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_point() +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\n\n\n\n\n\n\n\n\n16 replace scatter with image\n\n\nCode\nbees$image &lt;- \"./images/bee.png\"\n\n\n\n\nCode\nggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_image(aes(image = image), size = 0.15) +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\n\n\n\n\n\n\n\n\n17 add logo\n\n\nCode\nimg2 =image_read(\"./images/logo1.png\")\n\n\n\n\nCode\nlibrary(cowplot)\np=ggplot(data = bees, aes(x = distance, y = number)) +\n  annotation_custom(rasterGrob(img, \n                               width = unit(1,\"npc\"),\n                               height = unit(1,\"npc\")), \n                    -Inf, Inf, -Inf, Inf) +\n  geom_image(aes(image = image), size = 0.15) +\n  xlab(\"Distance (km)\") +\n  ylab(\"Number of Bees\") +\n  ylim(0, 45)\n\n\n\nggdraw() +draw_plot(p,x = 0, y = 0.15, width = 1, height = 0.85) +draw_image(img2,x = 0.1, y = 0.1, width = 0.1, height = 0.1) \n\n\n\n\n\n\n\n\n\n\n\n18 resource:\nhttps://themockup.blog/posts/2021-01-28-removing-image-backgrounds-with-magick/\nhttps://cran.r-project.org/web/packages/magick/vignettes/intro.html\nhttps://buzzrbeeline.blog/2018/06/13/fun-and-easy-r-graphs-with-images/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "image processing"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html",
    "href": "data manipulation/3 data manipulation with tidyverse.html",
    "title": "Data manipulation with tidyverse",
    "section": "",
    "text": "The tidyverse is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.\ndplyr is a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges.",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#select-column",
    "href": "data manipulation/3 data manipulation with tidyverse.html#select-column",
    "title": "Data manipulation with tidyverse",
    "section": "2.1 select column",
    "text": "2.1 select column",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#get-column-names",
    "href": "data manipulation/3 data manipulation with tidyverse.html#get-column-names",
    "title": "Data manipulation with tidyverse",
    "section": "2.2 get column names",
    "text": "2.2 get column names\n\n\nCode\nnames(small_mtcars)\n\n\n[1] \"car_name\" \"cyl\"      \"mpg\"      \"hp\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#select-by-name",
    "href": "data manipulation/3 data manipulation with tidyverse.html#select-by-name",
    "title": "Data manipulation with tidyverse",
    "section": "2.3 select by name",
    "text": "2.3 select by name\n\n\nCode\nmtcars %&gt;% select(cyl, mpg,hp) \n\n\n                    cyl  mpg  hp\nMazda RX4             6 21.0 110\nMazda RX4 Wag         6 21.0 110\nDatsun 710            4 22.8  93\nHornet 4 Drive        6 21.4 110\nHornet Sportabout     8 18.7 175\nValiant               6 18.1 105\nDuster 360            8 14.3 245\nMerc 240D             4 24.4  62\nMerc 230              4 22.8  95\nMerc 280              6 19.2 123\nMerc 280C             6 17.8 123\nMerc 450SE            8 16.4 180\nMerc 450SL            8 17.3 180\nMerc 450SLC           8 15.2 180\nCadillac Fleetwood    8 10.4 205\nLincoln Continental   8 10.4 215\nChrysler Imperial     8 14.7 230\nFiat 128              4 32.4  66\nHonda Civic           4 30.4  52\nToyota Corolla        4 33.9  65\nToyota Corona         4 21.5  97\nDodge Challenger      8 15.5 150\nAMC Javelin           8 15.2 150\nCamaro Z28            8 13.3 245\nPontiac Firebird      8 19.2 175\nFiat X1-9             4 27.3  66\nPorsche 914-2         4 26.0  91\nLotus Europa          4 30.4 113\nFord Pantera L        8 15.8 264\nFerrari Dino          6 19.7 175\nMaserati Bora         8 15.0 335\nVolvo 142E            4 21.4 109",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#select-columns-by-name-match-with-p",
    "href": "data manipulation/3 data manipulation with tidyverse.html#select-columns-by-name-match-with-p",
    "title": "Data manipulation with tidyverse",
    "section": "2.4 select columns by name match with ‘p’",
    "text": "2.4 select columns by name match with ‘p’",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#select-columns-by-index",
    "href": "data manipulation/3 data manipulation with tidyverse.html#select-columns-by-index",
    "title": "Data manipulation with tidyverse",
    "section": "2.5 select columns by index",
    "text": "2.5 select columns by index\n\n2.5.1 select first and 3rd columns\n\n\n2.5.2 select first to 3rd columns",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#drop-column",
    "href": "data manipulation/3 data manipulation with tidyverse.html#drop-column",
    "title": "Data manipulation with tidyverse",
    "section": "2.6 drop column",
    "text": "2.6 drop column\n\n\nCode\nsmall_mtcars %&gt;% select(-cyl)\n\n\n           car_name  mpg  hp\n1         Mazda RX4 21.0 110\n2     Mazda RX4 Wag 21.0 110\n3        Datsun 710 22.8  93\n4    Hornet 4 Drive 21.4 110\n5 Hornet Sportabout 18.7 175\n6           Valiant 18.1 105",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#renaming-column",
    "href": "data manipulation/3 data manipulation with tidyverse.html#renaming-column",
    "title": "Data manipulation with tidyverse",
    "section": "2.7 Renaming column",
    "text": "2.7 Renaming column\n\n\nCode\nsmall_mtcars %&gt;%rename(new_cyl=cyl)\n\n\n           car_name new_cyl  mpg  hp\n1         Mazda RX4       6 21.0 110\n2     Mazda RX4 Wag       6 21.0 110\n3        Datsun 710       4 22.8  93\n4    Hornet 4 Drive       6 21.4 110\n5 Hornet Sportabout       8 18.7 175\n6           Valiant       6 18.1 105",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#create-column",
    "href": "data manipulation/3 data manipulation with tidyverse.html#create-column",
    "title": "Data manipulation with tidyverse",
    "section": "2.8 Create column",
    "text": "2.8 Create column\n\n2.8.1 Mutate\n\n\nCode\nsmall_mtcars %&gt;%mutate(new_cyl=cyl+1)\n\n\n           car_name cyl  mpg  hp new_cyl\n1         Mazda RX4   6 21.0 110       7\n2     Mazda RX4 Wag   6 21.0 110       7\n3        Datsun 710   4 22.8  93       5\n4    Hornet 4 Drive   6 21.4 110       7\n5 Hornet Sportabout   8 18.7 175       9\n6           Valiant   6 18.1 105       7\n\n\n\n\n2.8.2 if else\n\n\nCode\nsmall_mtcars %&gt;%mutate(new_cly_group=if_else(cyl&gt;6,'big','small'))\n\n\n           car_name cyl  mpg  hp new_cly_group\n1         Mazda RX4   6 21.0 110         small\n2     Mazda RX4 Wag   6 21.0 110         small\n3        Datsun 710   4 22.8  93         small\n4    Hornet 4 Drive   6 21.4 110         small\n5 Hornet Sportabout   8 18.7 175           big\n6           Valiant   6 18.1 105         small\n\n\n\n\n2.8.3 case when\n\n\nCode\nsmall_mtcars %&gt;%mutate(cly_group=case_when(\n    cyl &gt; 6 ~ \"very big\",\n    cyl &gt; 4 ~ \"big\",\n    TRUE ~ \"other\",\n  ))\n\n\n           car_name cyl  mpg  hp cly_group\n1         Mazda RX4   6 21.0 110       big\n2     Mazda RX4 Wag   6 21.0 110       big\n3        Datsun 710   4 22.8  93     other\n4    Hornet 4 Drive   6 21.4 110       big\n5 Hornet Sportabout   8 18.7 175  very big\n6           Valiant   6 18.1 105       big\n\n\n\n\n2.8.4 Transmute,create column and only keep this column\n\n\nCode\nsmall_mtcars %&gt;%transmute(new_cyl=cyl+1)\n\n\n  new_cyl\n1       7\n2       7\n3       5\n4       7\n5       9\n6       7",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#filter-rows",
    "href": "data manipulation/3 data manipulation with tidyverse.html#filter-rows",
    "title": "Data manipulation with tidyverse",
    "section": "2.9 Filter rows",
    "text": "2.9 Filter rows\n\n\nCode\nsmall_mtcars %&gt;%filter(cyl&gt;5)\n\n\n           car_name cyl  mpg  hp\n1         Mazda RX4   6 21.0 110\n2     Mazda RX4 Wag   6 21.0 110\n3    Hornet 4 Drive   6 21.4 110\n4 Hornet Sportabout   8 18.7 175\n5           Valiant   6 18.1 105\n\n\n\n2.9.1 Filters with AND conditions\n\n\nCode\nsmall_mtcars %&gt;%filter(cyl&gt;5,mpg&gt;20)\n\n\n        car_name cyl  mpg  hp\n1      Mazda RX4   6 21.0 110\n2  Mazda RX4 Wag   6 21.0 110\n3 Hornet 4 Drive   6 21.4 110\n\n\n\n\n2.9.2 Filters with OR conditions\n\n\nCode\nsmall_mtcars %&gt;%filter(cyl&gt;5|mpg&gt;20)\n\n\n           car_name cyl  mpg  hp\n1         Mazda RX4   6 21.0 110\n2     Mazda RX4 Wag   6 21.0 110\n3        Datsun 710   4 22.8  93\n4    Hornet 4 Drive   6 21.4 110\n5 Hornet Sportabout   8 18.7 175\n6           Valiant   6 18.1 105\n\n\n\n\n2.9.3 filter row with index\n\n2.9.3.1 5th rows\n\n\nCode\nsmall_mtcars %&gt;% slice(5)\n\n\n           car_name cyl  mpg  hp\n1 Hornet Sportabout   8 18.7 175\n\n\n\n\n2.9.3.2 1 and 5h rows\n\n\nCode\nsmall_mtcars %&gt;% slice(1:5)\n\n\n           car_name cyl  mpg  hp\n1         Mazda RX4   6 21.0 110\n2     Mazda RX4 Wag   6 21.0 110\n3        Datsun 710   4 22.8  93\n4    Hornet 4 Drive   6 21.4 110\n5 Hornet Sportabout   8 18.7 175\n\n\n\n\n2.9.3.3 get ramdon 5 rows\n\n\nCode\nsmall_mtcars %&gt;% sample_n(5)\n\n\n           car_name cyl  mpg  hp\n1    Hornet 4 Drive   6 21.4 110\n2     Mazda RX4 Wag   6 21.0 110\n3         Mazda RX4   6 21.0 110\n4 Hornet Sportabout   8 18.7 175\n5        Datsun 710   4 22.8  93",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#append",
    "href": "data manipulation/3 data manipulation with tidyverse.html#append",
    "title": "Data manipulation with tidyverse",
    "section": "2.10 Append",
    "text": "2.10 Append\n\n2.10.1 append by row\n\n\nCode\nsmall_mtcars %&gt;% rbind(small_mtcars)\n\n\n            car_name cyl  mpg  hp\n1          Mazda RX4   6 21.0 110\n2      Mazda RX4 Wag   6 21.0 110\n3         Datsun 710   4 22.8  93\n4     Hornet 4 Drive   6 21.4 110\n5  Hornet Sportabout   8 18.7 175\n6            Valiant   6 18.1 105\n7          Mazda RX4   6 21.0 110\n8      Mazda RX4 Wag   6 21.0 110\n9         Datsun 710   4 22.8  93\n10    Hornet 4 Drive   6 21.4 110\n11 Hornet Sportabout   8 18.7 175\n12           Valiant   6 18.1 105\n\n\n\n\n2.10.2 append by column\n\n\nCode\nsmall_mtcars %&gt;% cbind(small_mtcars)\n\n\n           car_name cyl  mpg  hp          car_name cyl  mpg  hp\n1         Mazda RX4   6 21.0 110         Mazda RX4   6 21.0 110\n2     Mazda RX4 Wag   6 21.0 110     Mazda RX4 Wag   6 21.0 110\n3        Datsun 710   4 22.8  93        Datsun 710   4 22.8  93\n4    Hornet 4 Drive   6 21.4 110    Hornet 4 Drive   6 21.4 110\n5 Hornet Sportabout   8 18.7 175 Hornet Sportabout   8 18.7 175\n6           Valiant   6 18.1 105           Valiant   6 18.1 105\n\n\n\n\n2.10.3 Sepcial vales\n\n2.10.3.1 NAN\nNaN (“Not a Number”) means 0/0\n\n\nCode\nv1 &lt;- NaN\nv1\n\n\n[1] NaN\n\n\n\n\nCode\nis.na(v1)\n\n\n[1] TRUE\n\n\n\n\n2.10.3.2 NA\nNA (“Not Available”) is generally interpreted as a missing value\n\n\nCode\nv2 &lt;- NA\nv2\n\n\n[1] NA\n\n\n\n\nCode\nis.na(v2)\n\n\n[1] TRUE\n\n\n\n\n2.10.3.3 NULL\nNULL is an object and is returned when an expression or function results in an undefined value. In R language, NULL (capital letters) is a reserved word\n\n\nCode\nv3=NULL\nv3\n\n\nNULL\n\n\n\n\nCode\nis.na(v3)\n\n\nlogical(0)",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#group-by",
    "href": "data manipulation/3 data manipulation with tidyverse.html#group-by",
    "title": "Data manipulation with tidyverse",
    "section": "2.11 group by",
    "text": "2.11 group by\n\n2.11.1 average,min,max,sum\n\n\nCode\nsmall_mtcars %&gt;%group_by(cyl) %&gt;% summarise(avg_mpg=mean(mpg)\n                                            ,min_mpg=min(mpg)\n                                            ,max_mpg=max(mpg)\n                                            ,sum_mpg=sum(mpg))\n\n\n# A tibble: 3 × 5\n    cyl avg_mpg min_mpg max_mpg sum_mpg\n  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;\n1     4    22.8    22.8    22.8    22.8\n2     6    20.4    18.1    21.4    81.5\n3     8    18.7    18.7    18.7    18.7\n\n\n\n\n2.11.2 count record and count distinct record\n\n\nCode\nsmall_mtcars %&gt;%group_by(cyl) %&gt;% summarise(n_mpg=n()\n                                            ,distinct_n_mpg=n_distinct(mpg)\n                                            \n                                            )\n\n\n# A tibble: 3 × 3\n    cyl n_mpg distinct_n_mpg\n  &lt;dbl&gt; &lt;int&gt;          &lt;int&gt;\n1     4     1              1\n2     6     4              3\n3     8     1              1",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#order-rows",
    "href": "data manipulation/3 data manipulation with tidyverse.html#order-rows",
    "title": "Data manipulation with tidyverse",
    "section": "2.12 order rows",
    "text": "2.12 order rows\n\n\nCode\nsmall_mtcars %&gt;%arrange(cyl) \n\n\n           car_name cyl  mpg  hp\n1        Datsun 710   4 22.8  93\n2         Mazda RX4   6 21.0 110\n3     Mazda RX4 Wag   6 21.0 110\n4    Hornet 4 Drive   6 21.4 110\n5           Valiant   6 18.1 105\n6 Hornet Sportabout   8 18.7 175\n\n\n\n2.12.1 Sort in descending order\n\n\nCode\nsmall_mtcars %&gt;%arrange(desc(cyl) )\n\n\n           car_name cyl  mpg  hp\n1 Hornet Sportabout   8 18.7 175\n2         Mazda RX4   6 21.0 110\n3     Mazda RX4 Wag   6 21.0 110\n4    Hornet 4 Drive   6 21.4 110\n5           Valiant   6 18.1 105\n6        Datsun 710   4 22.8  93\n\n\n\n\n2.12.2 Arrange by multiple variables\n\n\nCode\nsmall_mtcars %&gt;%arrange(cyl,mpg)\n\n\n           car_name cyl  mpg  hp\n1        Datsun 710   4 22.8  93\n2           Valiant   6 18.1 105\n3         Mazda RX4   6 21.0 110\n4     Mazda RX4 Wag   6 21.0 110\n5    Hornet 4 Drive   6 21.4 110\n6 Hornet Sportabout   8 18.7 175",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#join",
    "href": "data manipulation/3 data manipulation with tidyverse.html#join",
    "title": "Data manipulation with tidyverse",
    "section": "2.13 join",
    "text": "2.13 join\n\n\nCode\nleft_data=small_mtcars %&gt;% slice(1:2)\nright_data=small_mtcars %&gt;% slice(2:4)\n\n\n\n\nCode\nleft_data\n\n\n       car_name cyl mpg  hp\n1     Mazda RX4   6  21 110\n2 Mazda RX4 Wag   6  21 110\n\n\n\n\nCode\nright_data\n\n\n        car_name cyl  mpg  hp\n1  Mazda RX4 Wag   6 21.0 110\n2     Datsun 710   4 22.8  93\n3 Hornet 4 Drive   6 21.4 110\n\n\n\n2.13.1 inner_join\n\n\nCode\ndata=left_data %&gt;% inner_join(right_data,join_by(car_name== car_name), suffix = c(\"_l\", \"._r\"))\ndata\n\n\n       car_name cyl_l mpg_l hp_l cyl._r mpg._r hp._r\n1 Mazda RX4 Wag     6    21  110      6     21   110\n\n\n\n\n2.13.2 left join\n\n\nCode\ndata=left_data %&gt;% left_join(right_data,join_by(car_name== car_name), suffix = c(\"_l\", \"._r\"))\ndata\n\n\n       car_name cyl_l mpg_l hp_l cyl._r mpg._r hp._r\n1     Mazda RX4     6    21  110     NA     NA    NA\n2 Mazda RX4 Wag     6    21  110      6     21   110\n\n\n\n\n2.13.3 full join\n\n\nCode\ndata=left_data %&gt;% full_join(right_data,join_by(car_name== car_name), suffix = c(\"_l\", \"._r\"))\ndata\n\n\n        car_name cyl_l mpg_l hp_l cyl._r mpg._r hp._r\n1      Mazda RX4     6    21  110     NA     NA    NA\n2  Mazda RX4 Wag     6    21  110      6   21.0   110\n3     Datsun 710    NA    NA   NA      4   22.8    93\n4 Hornet 4 Drive    NA    NA   NA      6   21.4   110\n\n\n\n\n2.13.4 anti join\nanti_join() return all rows from x without a match in y\n\n\nCode\ndata=left_data %&gt;% anti_join(right_data,join_by(car_name== car_name))\ndata\n\n\n   car_name cyl mpg  hp\n1 Mazda RX4   6  21 110",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#reshape-tables",
    "href": "data manipulation/3 data manipulation with tidyverse.html#reshape-tables",
    "title": "Data manipulation with tidyverse",
    "section": "2.14 Reshape tables",
    "text": "2.14 Reshape tables\n\n\nCode\nolddata_wide &lt;- read.table(header=TRUE, text='\n subject sex control cond1 cond2\n       1   M     7.9  12.3  10.7\n       2   F     6.3  10.6  11.1\n       3   F     9.5  13.1  13.8\n       4   M    11.5  13.4  12.9\n')\n\n\n\n\nCode\nolddata_wide\n\n\n  subject sex control cond1 cond2\n1       1   M     7.9  12.3  10.7\n2       2   F     6.3  10.6  11.1\n3       3   F     9.5  13.1  13.8\n4       4   M    11.5  13.4  12.9\n\n\n\n2.14.1 Gather data long(wide to long)\n\n\nCode\ndata_long=olddata_wide %&gt;%\n  pivot_longer(!c(subject,sex), names_to = 'income', values_to = 'DATA')\n\ndata_long\n\n\n# A tibble: 12 × 4\n   subject sex   income   DATA\n     &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;\n 1       1 M     control   7.9\n 2       1 M     cond1    12.3\n 3       1 M     cond2    10.7\n 4       2 F     control   6.3\n 5       2 F     cond1    10.6\n 6       2 F     cond2    11.1\n 7       3 F     control   9.5\n 8       3 F     cond1    13.1\n 9       3 F     cond2    13.8\n10       4 M     control  11.5\n11       4 M     cond1    13.4\n12       4 M     cond2    12.9\n\n\n\n\n2.14.2 Spread data wide (long to wide)\n\n\nCode\ndata_wide=data_long %&gt;%\n  pivot_wider(names_from = income, values_from = DATA)\n\ndata_wide\n\n\n# A tibble: 4 × 5\n  subject sex   control cond1 cond2\n    &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1       1 M         7.9  12.3  10.7\n2       2 F         6.3  10.6  11.1\n3       3 F         9.5  13.1  13.8\n4       4 M        11.5  13.4  12.9",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#length",
    "href": "data manipulation/3 data manipulation with tidyverse.html#length",
    "title": "Data manipulation with tidyverse",
    "section": "3.1 length",
    "text": "3.1 length\n\n\nCode\nx &lt;- \"I like horses.\"\nstr_length(x)\n\n\n[1] 14",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#upper-case",
    "href": "data manipulation/3 data manipulation with tidyverse.html#upper-case",
    "title": "Data manipulation with tidyverse",
    "section": "3.2 upper case",
    "text": "3.2 upper case\n\n\nCode\nx &lt;- \"I like horses.\"\n\nstr_to_upper(x)\n\n\n[1] \"I LIKE HORSES.\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#lower-case",
    "href": "data manipulation/3 data manipulation with tidyverse.html#lower-case",
    "title": "Data manipulation with tidyverse",
    "section": "3.3 lower case",
    "text": "3.3 lower case\n\n\nCode\nx &lt;- \"I like horses.\"\n\nstr_to_lower(x)\n\n\n[1] \"i like horses.\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#match",
    "href": "data manipulation/3 data manipulation with tidyverse.html#match",
    "title": "Data manipulation with tidyverse",
    "section": "3.4 match",
    "text": "3.4 match\n\n\nCode\nword_list=c('abc','bbc','appale','bbaa','cc')\n\n\n\n3.4.1 match with ‘a’\n\n\nCode\nword_list %&gt;% str_detect('a')\n\n\n[1]  TRUE FALSE  TRUE  TRUE FALSE\n\n\n\n\n3.4.2 match with ‘a’ count\n\n\nCode\nword_list %&gt;% str_count('a')\n\n\n[1] 1 0 2 2 0\n\n\n\n\n3.4.3 index of vector match\n\n\nCode\nword_list %&gt;% str_which('a')\n\n\n[1] 1 3 4\n\n\n\n\n3.4.4 index of each word match (first match)\n\n\nCode\nword_list %&gt;% str_locate('a')\n\n\n     start end\n[1,]     1   1\n[2,]    NA  NA\n[3,]     1   1\n[4,]     3   3\n[5,]    NA  NA\n\n\n\n\n3.4.5 index of each word match (all match)\n\n\nCode\nword_list %&gt;% str_locate_all('a')\n\n\n[[1]]\n     start end\n[1,]     1   1\n\n[[2]]\n     start end\n\n[[3]]\n     start end\n[1,]     1   1\n[2,]     4   4\n\n[[4]]\n     start end\n[1,]     3   3\n[2,]     4   4\n\n[[5]]\n     start end\n\n\n\n\nCode\ntrx='abc1993'\n\nnum=str_match(trx, \"(\\\\d)+\")\n\nnum\n\n\n     [,1]   [,2]\n[1,] \"1993\" \"3\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#concatenation",
    "href": "data manipulation/3 data manipulation with tidyverse.html#concatenation",
    "title": "Data manipulation with tidyverse",
    "section": "3.5 concatenation",
    "text": "3.5 concatenation\n\n\nCode\na='aaaa'\nb='bbbb'\n\n\n\n\nCode\npaste(a,b)\n\n\n[1] \"aaaa bbbb\"\n\n\n\n\nCode\npaste0(a,b)\n\n\n[1] \"aaaabbbb\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#replace-string",
    "href": "data manipulation/3 data manipulation with tidyverse.html#replace-string",
    "title": "Data manipulation with tidyverse",
    "section": "3.6 replace string",
    "text": "3.6 replace string\n\n3.6.1 str_replace()\n\n\nCode\ntext001=\"abcb\"\ntext001 %&gt;% str_replace('b','1')\n\n\n[1] \"a1cb\"\n\n\n\n\n3.6.2 str_replace_all()\n\n\nCode\ntext001=\"abcb\"\ntext001 %&gt;% str_replace_all('b','1')\n\n\n[1] \"a1c1\"\n\n\n\n\n3.6.3 replace with regular expression\n\n\nCode\nword2=c('a-b','M6D5','M6D54','M6D55','M6D5') %&gt;% as_tibble()\nword2\n\n\n# A tibble: 5 × 1\n  value\n  &lt;chr&gt;\n1 a-b  \n2 M6D5 \n3 M6D54\n4 M6D55\n5 M6D5 \n\n\nreplace D+all number with ’_’ ::: {.cell}\n\nCode\nword2 %&gt;% mutate(new=value %&gt;% str_replace_all('D\\\\d*','_'))\n\n\n# A tibble: 5 × 2\n  value new  \n  &lt;chr&gt; &lt;chr&gt;\n1 a-b   a-b  \n2 M6D5  M6_  \n3 M6D54 M6_  \n4 M6D55 M6_  \n5 M6D5  M6_  \n\n:::",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#split-string",
    "href": "data manipulation/3 data manipulation with tidyverse.html#split-string",
    "title": "Data manipulation with tidyverse",
    "section": "3.7 split string",
    "text": "3.7 split string\n\n\nCode\nword=c('a-b','1-c','c-c')\n\ndf_word=word %&gt;% as.data.frame() %&gt;% rename('word'='.')\n\n\n\n3.7.1 make 2 coloumn and split by - using stringr package\n\n\nCode\ndf_word\n\n\n  word\n1  a-b\n2  1-c\n3  c-c\n\n\n\n\nCode\nlibrary(stringr)\ndf_word$word %&gt;% str_split_fixed('-',2)\n\n\n     [,1] [,2]\n[1,] \"a\"  \"b\" \n[2,] \"1\"  \"c\" \n[3,] \"c\"  \"c\" \n\n\n\n\n3.7.2 make 2 coloumn and split by - using tidyr package\n\n\nCode\ndf_word\n\n\n  word\n1  a-b\n2  1-c\n3  c-c\n\n\n\n\nCode\nlibrary(tidyr)\ndf_word %&gt;% separate(word,c('col1','col2'),'-')\n\n\n  col1 col2\n1    a    b\n2    1    c\n3    c    c",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#subset-element-in-list",
    "href": "data manipulation/3 data manipulation with tidyverse.html#subset-element-in-list",
    "title": "Data manipulation with tidyverse",
    "section": "3.8 subset element in list",
    "text": "3.8 subset element in list\n\n\nCode\nword=c('aabbbasdf','apple','pet','melon')\n\n\n\n3.8.1 word with ‘a’\n\n\nCode\nword %&gt;% str_subset('a')\n\n\n[1] \"aabbbasdf\" \"apple\"    \n\n\n\n\n3.8.2 word with ‘a,e,i,o,u’\n\n\nCode\nword %&gt;% str_subset(\"[aeiou]\")\n\n\n[1] \"aabbbasdf\" \"apple\"     \"pet\"       \"melon\"    \n\n\n\n\n3.8.3 word with ‘pet’ or ‘melon’\n\n\nCode\nword %&gt;% str_subset('pet|melon')\n\n\n[1] \"pet\"   \"melon\"\n\n\n\n\n3.8.4 word with ‘pet’ or ‘melon’\n\n\nCode\nword %&gt;% str_subset('aa')\n\n\n[1] \"aabbbasdf\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#extract-string",
    "href": "data manipulation/3 data manipulation with tidyverse.html#extract-string",
    "title": "Data manipulation with tidyverse",
    "section": "3.9 extract string",
    "text": "3.9 extract string\n\n\nCode\ndata001=mtcars\ndata001 &lt;- cbind(names = rownames(data001), data001)\n\n\n\n3.9.1 by postion\nextract 2 to 4\n\n\nCode\ndata001$new_names=data001$names %&gt;% str_sub(2,4)\nhead(data001 %&gt;% select(new_names,names))\n\n\n                  new_names             names\nMazda RX4               azd         Mazda RX4\nMazda RX4 Wag           azd     Mazda RX4 Wag\nDatsun 710              ats        Datsun 710\nHornet 4 Drive          orn    Hornet 4 Drive\nHornet Sportabout       orn Hornet Sportabout\nValiant                 ali           Valiant\n\n\n\n\n3.9.2 extracting with Regular expressions\nextracting one letter\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\"\\\\w\")\n\n\n[1] \"a\"\n\n\nextracting one letter/number\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\".\")\n\n\n[1] \"a\"\n\n\nextracting one .\n\n\nCode\ntrx='abc1993.ccc'\ntrx %&gt;% str_extract(\"\\\\.\")\n\n\n[1] \".\"\n\n\nextracting 3 letter start with ‘a’\n\n\nCode\nword=c('aabbbasdfe. e','appl.e e','pet','melon','asdf g 133asd') %&gt;% as_tibble()\nword\n\n\n# A tibble: 5 × 1\n  value        \n  &lt;chr&gt;        \n1 aabbbasdfe. e\n2 appl.e e     \n3 pet          \n4 melon        \n5 asdf g 133asd\n\n\nextracting 2 letter start with ‘a’\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"a..\"))\n\n\n# A tibble: 5 × 2\n  value         new  \n  &lt;chr&gt;         &lt;chr&gt;\n1 aabbbasdfe. e aab  \n2 appl.e e      app  \n3 pet           &lt;NA&gt; \n4 melon         &lt;NA&gt; \n5 asdf g 133asd asd  \n\n\nextracting all letter start with ‘a’\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"a.+\"))\n\n\n# A tibble: 5 × 2\n  value         new          \n  &lt;chr&gt;         &lt;chr&gt;        \n1 aabbbasdfe. e aabbbasdfe. e\n2 appl.e e      appl.e e     \n3 pet           &lt;NA&gt;         \n4 melon         &lt;NA&gt;         \n5 asdf g 133asd asdf g 133asd\n\n\nextracting all letter between ‘a’ and ‘e’\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"(a).*?(e)\"))\n\n\n# A tibble: 5 × 2\n  value         new       \n  &lt;chr&gt;         &lt;chr&gt;     \n1 aabbbasdfe. e aabbbasdfe\n2 appl.e e      appl.e    \n3 pet           &lt;NA&gt;      \n4 melon         &lt;NA&gt;      \n5 asdf g 133asd &lt;NA&gt;      \n\n\nextracting all letter between ‘a’ and ‘.’\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"(a).*?(\\\\.)\"))\n\n\n# A tibble: 5 × 2\n  value         new        \n  &lt;chr&gt;         &lt;chr&gt;      \n1 aabbbasdfe. e aabbbasdfe.\n2 appl.e e      appl.      \n3 pet           &lt;NA&gt;       \n4 melon         &lt;NA&gt;       \n5 asdf g 133asd &lt;NA&gt;       \n\n\nextracting all letter between ‘a’ and space\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\"(a).*?( )\"))\n\n\n# A tibble: 5 × 2\n  value         new           \n  &lt;chr&gt;         &lt;chr&gt;         \n1 aabbbasdfe. e \"aabbbasdfe. \"\n2 appl.e e      \"appl.e \"     \n3 pet            &lt;NA&gt;         \n4 melon          &lt;NA&gt;         \n5 asdf g 133asd \"asdf \"       \n\n\nextracting all letter end with number\n\n\nCode\nword %&gt;%mutate(new=value %&gt;% str_extract(\".*?\\\\d\")\n               , new2=new %&gt;% str_sub(end=-3)\n                                         \n)\n\n\n# A tibble: 5 × 3\n  value         new      new2  \n  &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt; \n1 aabbbasdfe. e &lt;NA&gt;     &lt;NA&gt;  \n2 appl.e e      &lt;NA&gt;     &lt;NA&gt;  \n3 pet           &lt;NA&gt;     &lt;NA&gt;  \n4 melon         &lt;NA&gt;     &lt;NA&gt;  \n5 asdf g 133asd asdf g 1 asdf g\n\n\nextracting one number\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\"\\\\d\")\n\n\n[1] \"1\"\n\n\nextracting more number\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\"(\\\\d)+\")\n\n\n[1] \"1993\"\n\n\nextracting more non number\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract_all(\"\\\\D+\")\n\n\n[[1]]\n[1] \"abc\"  \" ccc\"\n\n\nextracting all letter from the begining\n\n\nCode\ntrx='abc1993 ccc'\ntrx %&gt;% str_extract(\"[:alpha:]+\")\n\n\n[1] \"abc\"\n\n\nextracting number after points:\n\n\nCode\ntrx=c('abcpoints:100 ccc','asdfasd','points:66','thisis points:6')\ntrx\n\n\n[1] \"abcpoints:100 ccc\" \"asdfasd\"           \"points:66\"        \n[4] \"thisis points:6\"  \n\n\nextracting number after points: and remove non match\n\n\nCode\nt=trx %&gt;% str_extract(\"points:[:digit:]+\") %&gt;% na.omit()%&gt;% str_extract(\"points:[:digit:]+\")\nt\n\n\n[1] \"points:100\" \"points:66\"  \"points:6\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#regular-expressions",
    "href": "data manipulation/3 data manipulation with tidyverse.html#regular-expressions",
    "title": "Data manipulation with tidyverse",
    "section": "3.10 Regular expressions",
    "text": "3.10 Regular expressions\n\n\nCode\nphones=c('abba','124','anna')\nphones\n\n\n[1] \"abba\" \"124\"  \"anna\"\n\n\n\n3.10.1 get a+ (b or n) + (b or n) + a\n\n\nCode\nphones %&gt;% str_view('a[bn][bn]a')\n\n\n[1] │ &lt;abba&gt;\n[3] │ &lt;anna&gt;\n\n\n\n\n3.10.2 bb or nn\n\n\nCode\nphones %&gt;% str_view('(bb|nn)')\n\n\n[1] │ a&lt;bb&gt;a\n[3] │ a&lt;nn&gt;a",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#date-format",
    "href": "data manipulation/3 data manipulation with tidyverse.html#date-format",
    "title": "Data manipulation with tidyverse",
    "section": "4.1 date format",
    "text": "4.1 date format\ninput as character\n\n\nCode\ndate1='2023-01-01'\nclass(date1)\n\n\n[1] \"character\"\n\n\n\n\nCode\ndate1\n\n\n[1] \"2023-01-01\"\n\n\nconvert into date type with as.Date()\n\n\nCode\ndate2=as.Date('2023-01-01')\nclass(date2)\n\n\n[1] \"Date\"\n\n\n\n\nCode\ndate2\n\n\n[1] \"2023-01-01\"\n\n\nconvert into date type with ymd()\n\n\nCode\ndate3=ymd('2023-01-01')\nclass(date3)\n\n\n[1] \"Date\"\n\n\n\n\nCode\ndate3\n\n\n[1] \"2023-01-01\"\n\n\nget today with today()\n\n\nCode\ntoday()\n\n\n[1] \"2025-02-21\"\n\n\nget local timezone\n\n\nCode\nSys.timezone()\n\n\n[1] \"Asia/Shanghai\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#change-date-format",
    "href": "data manipulation/3 data manipulation with tidyverse.html#change-date-format",
    "title": "Data manipulation with tidyverse",
    "section": "4.2 change date format",
    "text": "4.2 change date format\nmake multiple column character to date with make_date()\n\n\nCode\nflights %&gt;% \n  select(year, month, day, hour, minute) %&gt;% \n  mutate(departure = make_date(year, month, day))\n\n\n# A tibble: 336,776 × 6\n    year month   day  hour minute departure \n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;date&gt;    \n 1  2013     1     1     5     15 2013-01-01\n 2  2013     1     1     5     29 2013-01-01\n 3  2013     1     1     5     40 2013-01-01\n 4  2013     1     1     5     45 2013-01-01\n 5  2013     1     1     6      0 2013-01-01\n 6  2013     1     1     5     58 2013-01-01\n 7  2013     1     1     6      0 2013-01-01\n 8  2013     1     1     6      0 2013-01-01\n 9  2013     1     1     6      0 2013-01-01\n10  2013     1     1     6      0 2013-01-01\n# ℹ 336,766 more rows\n\n\n\n\nCode\nflights %&gt;% \n  select(year, month, day, hour, minute) %&gt;% \n  mutate(departure = make_datetime(year, month, day, hour, minute))\n\n\n# A tibble: 336,776 × 6\n    year month   day  hour minute departure          \n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             \n 1  2013     1     1     5     15 2013-01-01 05:15:00\n 2  2013     1     1     5     29 2013-01-01 05:29:00\n 3  2013     1     1     5     40 2013-01-01 05:40:00\n 4  2013     1     1     5     45 2013-01-01 05:45:00\n 5  2013     1     1     6      0 2013-01-01 06:00:00\n 6  2013     1     1     5     58 2013-01-01 05:58:00\n 7  2013     1     1     6      0 2013-01-01 06:00:00\n 8  2013     1     1     6      0 2013-01-01 06:00:00\n 9  2013     1     1     6      0 2013-01-01 06:00:00\n10  2013     1     1     6      0 2013-01-01 06:00:00\n# ℹ 336,766 more rows",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#day-differnce-between-two-dates",
    "href": "data manipulation/3 data manipulation with tidyverse.html#day-differnce-between-two-dates",
    "title": "Data manipulation with tidyverse",
    "section": "4.3 day differnce between two dates",
    "text": "4.3 day differnce between two dates\n\n\nCode\nday1=ymd('2022-01-01')\nday2=ymd('2023-02-03')\n\ndiff=day2-day1\n\n\n\n\nCode\ndiff\n\n\nTime difference of 398 days\n\n\nusing interval() find two dates gap\n\n\nCode\ninterval(day1,day2) %&gt;% as.period()\n\n\n[1] \"1y 1m 2d 0H 0M 0S\"\n\n\nfind day gap\n\n\nCode\ninterval(day1,day2)%/% days(1)\n\n\n[1] 398\n\n\nfind month gap\n\n\nCode\ninterval(day1,day2)%/% months(1)\n\n\n[1] 13\n\n\nfind year gap\n\n\nCode\ninterval(day1,day2)%/% years(1)\n\n\n[1] 1",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#day-and-time",
    "href": "data manipulation/3 data manipulation with tidyverse.html#day-and-time",
    "title": "Data manipulation with tidyverse",
    "section": "4.4 day and time",
    "text": "4.4 day and time\n\n\nCode\nnow_time=now()\nnow_time\n\n\n[1] \"2025-02-21 02:11:03 CST\"\n\n\n\n4.4.1 get year\n\n\nCode\nyear(now_time)\n\n\n[1] 2025\n\n\n\n\n4.4.2 get month\n\n\nCode\nmonth(now_time)\n\n\n[1] 2\n\n\n\n\n4.4.3 get date of the month\n\n\nCode\nmday(now_time)\n\n\n[1] 21\n\n\n\n\n4.4.4 get date of the year\n\n\nCode\nyday(now_time)\n\n\n[1] 52\n\n\n\n\n4.4.5 get date of the week\n\n\nCode\nwday(now_time)\n\n\n[1] 6\n\n\n\n4.4.5.1 get hour\n\n\nCode\nhour(now_time)\n\n\n[1] 2\n\n\n\n\n\n4.4.6 get minute\n\n\nCode\nminute(now_time)\n\n\n[1] 11\n\n\n\n\n4.4.7 get second\n\n\nCode\nsecond(now_time)\n\n\n[1] 3.341459",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/3 data manipulation with tidyverse.html#dataframe-to-other-data-format",
    "href": "data manipulation/3 data manipulation with tidyverse.html#dataframe-to-other-data-format",
    "title": "Data manipulation with tidyverse",
    "section": "4.5 dataframe to other data format",
    "text": "4.5 dataframe to other data format\n\n4.5.1 dataframe to vector\n\n\nCode\ndata=small_mtcars$cyl\ndata\n\n\n[1] 6 6 4 6 8 6\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"numeric\"\n\n\n\n\n4.5.2 dataframe to matrix\n\n\nCode\ndata=data.matrix(small_mtcars)\ndata\n\n\n     car_name cyl  mpg  hp\n[1,]        4   6 21.0 110\n[2,]        5   6 21.0 110\n[3,]        1   4 22.8  93\n[4,]        2   6 21.4 110\n[5,]        3   8 18.7 175\n[6,]        6   6 18.1 105\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"matrix\" \"array\" \n\n\n\n\n4.5.3 dataframe to list\n\n\nCode\ndata=as.list(small_mtcars)\ndata\n\n\n$car_name\n[1] \"Mazda RX4\"         \"Mazda RX4 Wag\"     \"Datsun 710\"       \n[4] \"Hornet 4 Drive\"    \"Hornet Sportabout\" \"Valiant\"          \n\n$cyl\n[1] 6 6 4 6 8 6\n\n$mpg\n[1] 21.0 21.0 22.8 21.4 18.7 18.1\n\n$hp\n[1] 110 110  93 110 175 105\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"list\"",
    "crumbs": [
      "data manipulation",
      "Data manipulation with tidyverse"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html",
    "href": "data manipulation/2 data structure in R.html",
    "title": "Data structure in R",
    "section": "",
    "text": "::: {.cell}\n:::",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#create-sequence-vector",
    "href": "data manipulation/2 data structure in R.html#create-sequence-vector",
    "title": "Data structure in R",
    "section": "1.1 create sequence vector",
    "text": "1.1 create sequence vector\n\n\nCode\nseq(from = 2, to = 14, by = 2) \n\n\n[1]  2  4  6  8 10 12 14",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#create-repeat-vector",
    "href": "data manipulation/2 data structure in R.html#create-repeat-vector",
    "title": "Data structure in R",
    "section": "1.2 create repeat vector",
    "text": "1.2 create repeat vector\n\n\nCode\nrep(x = 1.5, times = 4)  \n\n\n[1] 1.5 1.5 1.5 1.5",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#create-random-vector",
    "href": "data manipulation/2 data structure in R.html#create-random-vector",
    "title": "Data structure in R",
    "section": "1.3 create random vector",
    "text": "1.3 create random vector\ncreate 5 random number from 1 to 10 without replacement\n\n\nCode\nsample(1:10,5, replace=F) \n\n\n[1] 6 7 2 1 8\n\n\ncreate 5 random number from 1 to 10 with replacement\n\n\nCode\nsample(1:10,5, replace=T) \n\n\n[1] 4 6 6 8 5\n\n\ncreate 1 random number from 0 to 1 from random uniform distribution\n\n\nCode\nrunif(1, min=0, max=1)\n\n\n[1] 0.5690518\n\n\ngenerate 4 random number that follows the normal distribution with mean being 0 and standard deviation being 1\n\n\nCode\nsn1 &lt;- rnorm(4, mean=0, sd=1) # standard nromal\nsn1\n\n\n[1]  0.59119881  0.14159089 -0.43121657  0.04111442",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#create-unique-vector",
    "href": "data manipulation/2 data structure in R.html#create-unique-vector",
    "title": "Data structure in R",
    "section": "1.4 create unique vector",
    "text": "1.4 create unique vector\n\n\nCode\nv1=c(1,1,2,2,5,6)\nv1\n\n\n[1] 1 1 2 2 5 6\n\n\n\n\nCode\nunique(v1)\n\n\n[1] 1 2 5 6",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#append-vector",
    "href": "data manipulation/2 data structure in R.html#append-vector",
    "title": "Data structure in R",
    "section": "1.5 append vector",
    "text": "1.5 append vector\n\n\nCode\nx=c(1,2,3)\ny=c(4,5,6)\nz=c(x,y)\nz\n\n\n[1] 1 2 3 4 5 6",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#remove-element-in-vector",
    "href": "data manipulation/2 data structure in R.html#remove-element-in-vector",
    "title": "Data structure in R",
    "section": "1.6 remove element in vector",
    "text": "1.6 remove element in vector\n\n\nCode\nx=c(1,2,3,4,5)\nx\n\n\n[1] 1 2 3 4 5\n\n\n\n1.6.1 remove first one\n\n\nCode\nx[-1]\n\n\n[1] 2 3 4 5\n\n\n\n\n1.6.2 remove last one\n\n\nCode\nx[-length(x)]\n\n\n[1] 1 2 3 4\n\n\n\n\n1.6.3 remove from last second\n\n\nCode\nx[1:(length(x)-2)]\n\n\n[1] 1 2 3\n\n\n\n\n1.6.4 remove from from another vector\n\n\nCode\nremove=c(2,4)\nx[-remove]\n\n\n[1] 1 3 5",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#sort-vector",
    "href": "data manipulation/2 data structure in R.html#sort-vector",
    "title": "Data structure in R",
    "section": "1.7 sort vector",
    "text": "1.7 sort vector\n\n\nCode\na=c(2,4,6,1,4)\n\n\n\n\nCode\nsort(a)\n\n\n[1] 1 2 4 4 6\n\n\n\n\nCode\nsort(a,decreasing=TRUE)\n\n\n[1] 6 4 4 2 1",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#vector-length",
    "href": "data manipulation/2 data structure in R.html#vector-length",
    "title": "Data structure in R",
    "section": "1.8 vector length",
    "text": "1.8 vector length\n\n\nCode\nlength(a)\n\n\n[1] 5",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#calculate-vector",
    "href": "data manipulation/2 data structure in R.html#calculate-vector",
    "title": "Data structure in R",
    "section": "1.9 calculate vector",
    "text": "1.9 calculate vector\n\n\nCode\nx=c(1,2,3,4,5)\n\nsum(x)\n\n\n[1] 15",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#select-vector-element",
    "href": "data manipulation/2 data structure in R.html#select-vector-element",
    "title": "Data structure in R",
    "section": "1.10 select vector element",
    "text": "1.10 select vector element\n\n\nCode\nx=c(1,2,3,6,9,10)\n\n\n\n1.10.1 select first\n\n\nCode\nx[1]\n\n\n[1] 1\n\n\nor\n\n\nCode\nx %&gt;% nth(1)\n\n\n[1] 1\n\n\n\n\n1.10.2 select last\n\n\nCode\nx %&gt;% last()\n\n\n[1] 10\n\n\nor\n\n\nCode\nx %&gt;% nth(-1)\n\n\n[1] 10\n\n\n\n\n1.10.3 select second last\n\n\nCode\nx %&gt;% nth(-2)\n\n\n[1] 9\n\n\n\n\n1.10.4 select first to 3th\n\n\nCode\nx[1:3]\n\n\n[1] 1 2 3\n\n\n\n\n1.10.5 select last one to last 3th\n\n\nCode\nx[-3:-1]\n\n\n[1]  6  9 10",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#compare-two-vector",
    "href": "data manipulation/2 data structure in R.html#compare-two-vector",
    "title": "Data structure in R",
    "section": "1.11 compare two vector",
    "text": "1.11 compare two vector\n\n\nCode\nxx=c(1,2,3,4)\nxx\n\n\n[1] 1 2 3 4\n\n\n\n\nCode\nyy=c(2,4)\nyy\n\n\n[1] 2 4\n\n\nfind number only in xx not in yy\n\n\nCode\nsetdiff(xx, yy)\n\n\n[1] 1 3",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#vector-converting-between-types",
    "href": "data manipulation/2 data structure in R.html#vector-converting-between-types",
    "title": "Data structure in R",
    "section": "1.12 vector Converting between types",
    "text": "1.12 vector Converting between types\n\n1.12.1 to factor\n\n\nCode\nx &lt;- c(\"a\", \"g\", \"b\")\ny=as.factor(x)\ny\n\n\n[1] a g b\nLevels: a b g\n\n\n\n\n1.12.2 to numeric\n\n\nCode\nx &lt;- c('123','44', '222')\ny=as.numeric(x)\ny\n\n\n[1] 123  44 222\n\n\n\n\n1.12.3 to character\n\n\nCode\nx &lt;- c(123123,111,5555)\ny=as.character(x)\ny\n\n\n[1] \"123123\" \"111\"    \"5555\"  \n\n\n\n\n1.12.4 to boolen\n\n\nCode\nx &lt;- c(1,0,1)\ny=as.logical(x)\ny\n\n\n[1]  TRUE FALSE  TRUE",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#vector-to-other-data-format",
    "href": "data manipulation/2 data structure in R.html#vector-to-other-data-format",
    "title": "Data structure in R",
    "section": "1.13 vector to other data format",
    "text": "1.13 vector to other data format\n\n1.13.1 vector to dataframe\n\n\nCode\nName &lt;- c(\"Jhon\", \"Lee\", \"Suzan\", \"Abhinav\", \n          \"Brain\", \"Emma\", \"David\", \"Alice\") \n\n   \nMarks &lt;- c(56, 76, 86, 96, 73, 87, 47, 98) \n    \n\ndata&lt;- data.frame(Name,Marks) \ndata\n\n\n     Name Marks\n1    Jhon    56\n2     Lee    76\n3   Suzan    86\n4 Abhinav    96\n5   Brain    73\n6    Emma    87\n7   David    47\n8   Alice    98\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"data.frame\"\n\n\n\n\n1.13.2 verctor to matrix\n\n\nCode\nv1 &lt;- c(56, 76, 86, 96, 73, 87, 47, 98) \n\n\n\n\nCode\ndata&lt;-matrix(v1,nrow=4)\ndata\n\n\n     [,1] [,2]\n[1,]   56   73\n[2,]   76   87\n[3,]   86   47\n[4,]   96   98\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"matrix\" \"array\" \n\n\nother way: ::: {.cell}\n\nCode\ndata&lt;-matrix(c(v1,v1),ncol = 2)\ndata\n\n\n     [,1] [,2]\n[1,]   56   56\n[2,]   76   76\n[3,]   86   86\n[4,]   96   96\n[5,]   73   73\n[6,]   87   87\n[7,]   47   47\n[8,]   98   98\n\n:::\n\n\n1.13.3 verctor to list\n\n\nCode\ndata=list(v1)\ndata\n\n\n[[1]]\n[1] 56 76 86 96 73 87 47 98\n\n\n\n\nCode\nclass(data)\n\n\n[1] \"list\"\n\n\neach element in vetor as a element in list\n\n\nCode\ndata=as.list(v1)\ndata\n\n\n[[1]]\n[1] 56\n\n[[2]]\n[1] 76\n\n[[3]]\n[1] 86\n\n[[4]]\n[1] 96\n\n[[5]]\n[1] 73\n\n[[6]]\n[1] 87\n\n[[7]]\n[1] 47\n\n[[8]]\n[1] 98\n\n\n\n\n1.13.4 verctor to array\n3D array ::: {.cell}\n\nCode\nvec1=c(1:5) \n \nvec2=c(6:10) \n \narr=array(c(vec1,vec2),dim=c(2,5,3)) \n \n# printing the array\nclass(arr)\n\n\n[1] \"array\"\n\n:::\n\n\nCode\narr\n\n\n, , 1\n\n     [,1] [,2] [,3] [,4] [,5]\n[1,]    1    3    5    7    9\n[2,]    2    4    6    8   10\n\n, , 2\n\n     [,1] [,2] [,3] [,4] [,5]\n[1,]    1    3    5    7    9\n[2,]    2    4    6    8   10\n\n, , 3\n\n     [,1] [,2] [,3] [,4] [,5]\n[1,]    1    3    5    7    9\n[2,]    2    4    6    8   10",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#dataframe-to-other-data-format",
    "href": "data manipulation/2 data structure in R.html#dataframe-to-other-data-format",
    "title": "Data structure in R",
    "section": "2.1 dataframe to other data format",
    "text": "2.1 dataframe to other data format\n\n2.1.1 dataframe to matrix\n\n\nCode\nmat &lt;- as.matrix(df)\n\nclass(mat)\n\n\n[1] \"matrix\" \"array\" \n\n\n\n\nCode\nmat\n\n\n     Name    Language Age \n[1,] \"Amiya\" \"R\"      \"22\"\n[2,] \"Raj\"   \"Python\" \"25\"\n[3,] \"Asish\" \"Java\"   \"45\"\n\n\n\n\n2.1.2 dataframe to vector\n\n\nCode\nvec=df[['Name']]\n\nclass(vec)\n\n\n[1] \"character\"\n\n\n\n\nCode\nvec\n\n\n[1] \"Amiya\" \"Raj\"   \"Asish\"\n\n\n\n\n2.1.3 dataframe to list\n\n\nCode\nlist=as.list(df[['Name']])\n\nclass(list)\n\n\n[1] \"list\"\n\n\n\n\nCode\nlist\n\n\n[[1]]\n[1] \"Amiya\"\n\n[[2]]\n[1] \"Raj\"\n\n[[3]]\n[1] \"Asish\"",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/2 data structure in R.html#matrix-to-other-data-format",
    "href": "data manipulation/2 data structure in R.html#matrix-to-other-data-format",
    "title": "Data structure in R",
    "section": "3.1 matrix to other data format",
    "text": "3.1 matrix to other data format\n\n3.1.1 matrix to dataframe\n\n\nCode\ndf &lt;- as.data.frame(matrix003)\n\nclass(df)\n\n\n[1] \"data.frame\"\n\n\n\n\nCode\ndf\n\n\n  V1 V2 V3\n1  1  4  9\n2 16 25 36\n3 49 64 81\n\n\n\n\n3.1.2 matrix to vector\n\n\nCode\nvec=as.vector(matrix003)\n\nclass(vec)\n\n\n[1] \"numeric\"\n\n\n\n\nCode\nvec\n\n\n[1]  1 16 49  4 25 64  9 36 81\n\n\n\n\n3.1.3 matrix to list\n\n\nCode\nlist=as.list(matrix003)\n\nclass(list)\n\n\n[1] \"list\"\n\n\n\n\nCode\nlist\n\n\n[[1]]\n[1] 1\n\n[[2]]\n[1] 16\n\n[[3]]\n[1] 49\n\n[[4]]\n[1] 4\n\n[[5]]\n[1] 25\n\n[[6]]\n[1] 64\n\n[[7]]\n[1] 9\n\n[[8]]\n[1] 36\n\n[[9]]\n[1] 81",
    "crumbs": [
      "data manipulation",
      "Data structure in R"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html",
    "href": "data manipulation/4 data table.html",
    "title": "Data table",
    "section": "",
    "text": "With the gt package, anyone can make wonderful-looking tables using the R programming language. The gt philosophy: we can construct a wide variety of useful tables with a cohesive set of table parts. These include the table header, the stub, the column labels and spanner column labels, the table body, and the table footer.\n\n\n\n\nCode\nlibrary(gt)\n\n\n\n\nCode\nlibrary(gt)\nlibrary(gtExtras)\n\n# Define the start and end dates for the data range\nstart_date &lt;- \"2010-06-07\"\nend_date &lt;- \"2010-06-14\"\n\n# Create a gt table based on preprocessed\n# `sp500` table data\nsp500 |&gt;\n  dplyr::filter(date &gt;= start_date & date &lt;= end_date) |&gt;\n  dplyr::select(-adj_close) |&gt;\n  gt() |&gt;\n  tab_header(\n    # title\n    title = \"S&P 500\",\n    # subtitle\n    subtitle = glue::glue(\"{start_date} to {end_date}\")\n  ) |&gt;\n  # format currency\n  fmt_currency() |&gt;\n  # format date\n  fmt_date(columns = date, date_style = \"wd_m_day_year\") |&gt;\n  # format suffixing\n  fmt_number(columns = volume, suffixing = TRUE) %&gt;% \n \n  # foot note with link\n   tab_source_note(\n    gt_hyperlink('Reference', 'https://gt.rstudio.com/')\n  ) %&gt;% \n\n  # make images url to images\n  #gt_img_rows(columns = image, img_source = \"web\", height = 120) %&gt;% \n  # align columns\n  cols_align(\n  align = c(\"center\"),\n  columns = everything()\n)\n\n\n\n\n\n\n\n\nS&P 500\n\n\n2010-06-07 to 2010-06-14\n\n\ndate\nopen\nhigh\nlow\nclose\nvolume\n\n\n\n\nMon, Jun 14, 2010\n$1,095.00\n$1,105.91\n$1,089.03\n$1,089.63\n4.43B\n\n\nFri, Jun 11, 2010\n$1,082.65\n$1,092.25\n$1,077.12\n$1,091.60\n4.06B\n\n\nThu, Jun 10, 2010\n$1,058.77\n$1,087.85\n$1,058.77\n$1,086.84\n5.14B\n\n\nWed, Jun 9, 2010\n$1,062.75\n$1,077.74\n$1,052.25\n$1,055.69\n5.98B\n\n\nTue, Jun 8, 2010\n$1,050.81\n$1,063.15\n$1,042.17\n$1,062.00\n6.19B\n\n\nMon, Jun 7, 2010\n$1,065.84\n$1,071.36\n$1,049.86\n$1,050.47\n5.47B\n\n\n\nReference\n\n\n\n\n\n\n\n\n\n\nThere are several R packages that either use gt to generate tabular outputs or extend gt in amazing ways. Here is a short list of some of these great packages:\n\ngtsummary (GITHUB, WEBSITE)\ngtExtras (GITHUB, WEBSITE)\npointblank (GITHUB, WEBSITE)\ntfrmt (GITHUB, WEBSITE)\ngto (GITHUB)\n\n\n\n\nhttps://gt.rstudio.com/",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#packages-that-use-or-extend-gt",
    "href": "data manipulation/4 data table.html#packages-that-use-or-extend-gt",
    "title": "Data table",
    "section": "",
    "text": "There are several R packages that either use gt to generate tabular outputs or extend gt in amazing ways. Here is a short list of some of these great packages:\n\ngtsummary (GITHUB, WEBSITE)\ngtExtras (GITHUB, WEBSITE)\npointblank (GITHUB, WEBSITE)\ntfrmt (GITHUB, WEBSITE)\ngto (GITHUB)",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#reference",
    "href": "data manipulation/4 data table.html#reference",
    "title": "Data table",
    "section": "",
    "text": "https://gt.rstudio.com/",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#reference-1",
    "href": "data manipulation/4 data table.html#reference-1",
    "title": "Data table",
    "section": "2.1 reference:",
    "text": "2.1 reference:\nhttps://www.youtube.com/watch?v=E3ubwU5Uyqw",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#pages-data",
    "href": "data manipulation/4 data table.html#pages-data",
    "title": "Data table",
    "section": "3.1 pages data",
    "text": "3.1 pages data\n\n\nCode\nlibrary(rmarkdown)\nmtcars %&gt;% paged_table()",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/4 data table.html#reference-2",
    "href": "data manipulation/4 data table.html#reference-2",
    "title": "Data table",
    "section": "3.2 reference:",
    "text": "3.2 reference:\nhttps://rstudio.github.io/distill/tables.html",
    "crumbs": [
      "data manipulation",
      "Data table"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#create-database-file-pythonsqlite.db-and-copy-mtcars-data-and-iris-data-into-database",
    "href": "data manipulation/6 SQL database.html#create-database-file-pythonsqlite.db-and-copy-mtcars-data-and-iris-data-into-database",
    "title": "SQL database with R",
    "section": "1.1 create database file pythonsqlite.db and copy mtcars data and iris data into database",
    "text": "1.1 create database file pythonsqlite.db and copy mtcars data and iris data into database\n\n\nCode\nmtcars=cbind(newColName = rownames(mtcars), mtcars)\n\n\n\n\nCode\n# Create an ephemeral in-memory RSQLite database\ncon &lt;- dbConnect(RSQLite::SQLite(), \"my_sql_database\")\n\n# view database on IDE\nconnection_view(con)\n\n\n\n\nCode\ndbWriteTable(con, \"mtcars\", mtcars,overwrite=TRUE)\ndbWriteTable(con, \"iris\", iris,overwrite=TRUE)",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#check-all-table-in-database",
    "href": "data manipulation/6 SQL database.html#check-all-table-in-database",
    "title": "SQL database with R",
    "section": "1.2 check all table in database",
    "text": "1.2 check all table in database\n\n\nCode\ndbListTables(con)\n\n\n[1] \"iris\"   \"mtcars\"",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#select",
    "href": "data manipulation/6 SQL database.html#select",
    "title": "SQL database with R",
    "section": "2.1 select",
    "text": "2.1 select\n\n\nCode\nsql =\"SELECT * FROM mtcars LIMIT 3\"\ntable=dbGetQuery(con,sql)\ntable\n\n\n     newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1     Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2 Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3    Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#renaming-column",
    "href": "data manipulation/6 SQL database.html#renaming-column",
    "title": "SQL database with R",
    "section": "2.2 Renaming column",
    "text": "2.2 Renaming column\n\n\nCode\nsql=\"select mpg as new_mpg from mtcars\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n  new_mpg\n1    21.0\n2    21.0\n3    22.8\n4    21.4\n5    18.7\n6    18.1",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#create-column",
    "href": "data manipulation/6 SQL database.html#create-column",
    "title": "SQL database with R",
    "section": "2.3 create column",
    "text": "2.3 create column\n\n\nCode\nsql=\"select mpg+1 as new_mpg,mpg from mtcars\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n  new_mpg  mpg\n1    22.0 21.0\n2    22.0 21.0\n3    23.8 22.8\n4    22.4 21.4\n5    19.7 18.7\n6    19.1 18.1",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#filter-rows",
    "href": "data manipulation/6 SQL database.html#filter-rows",
    "title": "SQL database with R",
    "section": "2.4 Filter rows",
    "text": "2.4 Filter rows\n\n\nCode\nsql=\"select * from mtcars where hp&gt;100\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n         newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\n4 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n5           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n6        Duster 360 14.3   8  360 245 3.21 3.570 15.84  0  0    3    4\n\n\n\n2.4.1 Filters with AND conditions\n\n\nCode\nsql=\"select * from mtcars where hp&gt;100 and drat&lt;3\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n          newColName  mpg cyl disp  hp drat   wt  qsec vs am gear carb\n1            Valiant 18.1   6  225 105 2.76 3.46 20.22  1  0    3    1\n2 Cadillac Fleetwood 10.4   8  472 205 2.93 5.25 17.98  0  0    3    4\n3   Dodge Challenger 15.5   8  318 150 2.76 3.52 16.87  0  0    3    2\n\n\n\n\n2.4.2 Filters with or conditions\n\n\nCode\nsql=\"select * from mtcars where hp&gt;100 or drat&lt;3\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n         newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\n4 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n5           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n6        Duster 360 14.3   8  360 245 3.21 3.570 15.84  0  0    3    4",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#append",
    "href": "data manipulation/6 SQL database.html#append",
    "title": "SQL database with R",
    "section": "2.5 Append",
    "text": "2.5 Append\n\n2.5.1 append by row\n\n\nCode\nsql=\"select * from mtcars union all select * from mtcars \"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n         newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1         Mazda RX4 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\n2     Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\n3        Datsun 710 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\n4    Hornet 4 Drive 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\n5 Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n6           Valiant 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n\n\n\n\n2.5.2 append by column\n\n\n2.5.3 Dropping NA values\n\n\n2.5.4 keep NA values",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#group-by",
    "href": "data manipulation/6 SQL database.html#group-by",
    "title": "SQL database with R",
    "section": "2.6 group by",
    "text": "2.6 group by\n\n2.6.1 average,min,max,sum\n\n\nCode\nsql=\"select AVG(hp),min(hp),max(hp),sum(hp) from mtcars\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n   AVG(hp) min(hp) max(hp) sum(hp)\n1 146.6875      52     335    4694\n\n\n\n\n2.6.2 count record and count distinct record\n\n\nCode\nsql=\"select vs, count(*),count(distinct cyl) from mtcars group by vs\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n  vs count(*) count(distinct cyl)\n1  0       18                   3\n2  1       14                   2",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#order-rows",
    "href": "data manipulation/6 SQL database.html#order-rows",
    "title": "SQL database with R",
    "section": "2.7 order rows",
    "text": "2.7 order rows\n\n\nCode\nsql=\"select * from mtcars order by mpg\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n           newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1  Cadillac Fleetwood 10.4   8  472 205 2.93 5.250 17.98  0  0    3    4\n2 Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4\n3          Camaro Z28 13.3   8  350 245 3.73 3.840 15.41  0  0    3    4\n4          Duster 360 14.3   8  360 245 3.21 3.570 15.84  0  0    3    4\n5   Chrysler Imperial 14.7   8  440 230 3.23 5.345 17.42  0  0    3    4\n6       Maserati Bora 15.0   8  301 335 3.54 3.570 14.60  0  1    5    8\n\n\n\n2.7.1 Sort in descending order\n\n\nCode\nsql=\"select * from mtcars order by mpg desc\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n      newColName  mpg cyl  disp  hp drat    wt  qsec vs am gear carb\n1 Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1\n2       Fiat 128 32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1\n3    Honda Civic 30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2\n4   Lotus Europa 30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2\n5      Fiat X1-9 27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1\n6  Porsche 914-2 26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2\n\n\n\n\n2.7.2 Arrange by multiple variables\n\n\nCode\nsql=\"select * from mtcars order by mpg ,cyl\"\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n           newColName  mpg cyl disp  hp drat    wt  qsec vs am gear carb\n1  Cadillac Fleetwood 10.4   8  472 205 2.93 5.250 17.98  0  0    3    4\n2 Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4\n3          Camaro Z28 13.3   8  350 245 3.73 3.840 15.41  0  0    3    4\n4          Duster 360 14.3   8  360 245 3.21 3.570 15.84  0  0    3    4\n5   Chrysler Imperial 14.7   8  440 230 3.23 5.345 17.42  0  0    3    4\n6       Maserati Bora 15.0   8  301 335 3.54 3.570 14.60  0  1    5    8",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#join",
    "href": "data manipulation/6 SQL database.html#join",
    "title": "SQL database with R",
    "section": "2.8 join",
    "text": "2.8 join\n\n2.8.1 inner_join\n\n\nCode\nsql=\"select a.newColName,a.mpg,b.mpg as new_mpg from mtcars a left join mtcars b on a.newColName=b.newColName\"\n\ntable=dbGetQuery(con,sql)\nhead(table)\n\n\n         newColName  mpg new_mpg\n1         Mazda RX4 21.0    21.0\n2     Mazda RX4 Wag 21.0    21.0\n3        Datsun 710 22.8    22.8\n4    Hornet 4 Drive 21.4    21.4\n5 Hornet Sportabout 18.7    18.7\n6           Valiant 18.1    18.1\n\n\n\n\n2.8.2 full join\n\n\n2.8.3 left join\n\n\n2.8.4 anti join",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#reshape-tables",
    "href": "data manipulation/6 SQL database.html#reshape-tables",
    "title": "SQL database with R",
    "section": "2.9 Reshape tables",
    "text": "2.9 Reshape tables\n\n2.9.1 Gather data long(wide to long)\n\n\n2.9.2 Spread data wide (long to wide)",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#string",
    "href": "data manipulation/6 SQL database.html#string",
    "title": "SQL database with R",
    "section": "2.10 string",
    "text": "2.10 string\n\n2.10.1 upper case\n\n\n2.10.2 lower case\n\n\n2.10.3 match\n\n\n2.10.4 concatenation\n\n\n2.10.5 replace\n\n\n2.10.6 extract",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#date",
    "href": "data manipulation/6 SQL database.html#date",
    "title": "SQL database with R",
    "section": "2.11 date",
    "text": "2.11 date",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#create-table-into-database",
    "href": "data manipulation/6 SQL database.html#create-table-into-database",
    "title": "SQL database with R",
    "section": "2.12 create table into database",
    "text": "2.12 create table into database\n\n\nCode\nsql=\"create table if not exists new_mtcars as select * from mtcars order by mpg ,cyl\"\ndbSendQuery(con,sql)\n\n\n&lt;SQLiteResult&gt;\n  SQL  create table if not exists new_mtcars as select * from mtcars order by mpg ,cyl\n  ROWS Fetched: 0 [complete]\n       Changed: 0\n\n\nCode\ndbListTables(con)\n\n\n[1] \"iris\"       \"mtcars\"     \"new_mtcars\"",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#delete-table-in-database",
    "href": "data manipulation/6 SQL database.html#delete-table-in-database",
    "title": "SQL database with R",
    "section": "2.13 delete table in database",
    "text": "2.13 delete table in database\n\n\nCode\nsql=\"drop table if  exists  new_mtcars\"\ndbSendQuery(con,sql)\n\n\n&lt;SQLiteResult&gt;\n  SQL  drop table if  exists  new_mtcars\n  ROWS Fetched: 0 [complete]\n       Changed: 0\n\n\nCode\ndbListTables(con)\n\n\n[1] \"iris\"   \"mtcars\"",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/6 SQL database.html#edit-table-in-database",
    "href": "data manipulation/6 SQL database.html#edit-table-in-database",
    "title": "SQL database with R",
    "section": "2.14 edit table in database",
    "text": "2.14 edit table in database",
    "crumbs": [
      "data manipulation",
      "SQL database with R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html",
    "href": "data manipulation/1 input ouput.html",
    "title": "input & ouput in R",
    "section": "",
    "text": "Data input and ouput in R\nCode\nlibrary(tidyverse)\nlibrary(openxlsx)\nlibrary(readxl)",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#read-csv",
    "href": "data manipulation/1 input ouput.html#read-csv",
    "title": "input & ouput in R",
    "section": "1.1 read CSV",
    "text": "1.1 read CSV\n\n\nCode\ndata001=read_csv('data/Book3.csv')\nhead(data001)\n\n\n# A tibble: 2 × 2\n      a b    \n  &lt;dbl&gt; &lt;chr&gt;\n1  1241 rhth \n2 35235 rjyyj\n\n\nread CSV online\n\n\nCode\nurl='https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv'\ndata001=read_csv(url)\nhead(data001)\n\n\n# A tibble: 6 × 32\n  hotel        is_canceled lead_time arrival_date_year arrival_date_month\n  &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;             &lt;dbl&gt; &lt;chr&gt;             \n1 Resort Hotel           0       342              2015 July              \n2 Resort Hotel           0       737              2015 July              \n3 Resort Hotel           0         7              2015 July              \n4 Resort Hotel           0        13              2015 July              \n5 Resort Hotel           0        14              2015 July              \n6 Resort Hotel           0        14              2015 July              \n# ℹ 27 more variables: arrival_date_week_number &lt;dbl&gt;,\n#   arrival_date_day_of_month &lt;dbl&gt;, stays_in_weekend_nights &lt;dbl&gt;,\n#   stays_in_week_nights &lt;dbl&gt;, adults &lt;dbl&gt;, children &lt;dbl&gt;, babies &lt;dbl&gt;,\n#   meal &lt;chr&gt;, country &lt;chr&gt;, market_segment &lt;chr&gt;,\n#   distribution_channel &lt;chr&gt;, is_repeated_guest &lt;dbl&gt;,\n#   previous_cancellations &lt;dbl&gt;, previous_bookings_not_canceled &lt;dbl&gt;,\n#   reserved_room_type &lt;chr&gt;, assigned_room_type &lt;chr&gt;, …",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#read-excel",
    "href": "data manipulation/1 input ouput.html#read-excel",
    "title": "input & ouput in R",
    "section": "1.2 read excel",
    "text": "1.2 read excel\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\ndata001=read_excel('data/Book1.xlsx')\nhead(data001)\n\n\n# A tibble: 2 × 2\n      a b    \n  &lt;dbl&gt; &lt;chr&gt;\n1  1241 rhth \n2 35235 rjyyj",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#read-parquet",
    "href": "data manipulation/1 input ouput.html#read-parquet",
    "title": "input & ouput in R",
    "section": "1.3 read parquet",
    "text": "1.3 read parquet\nmust install in this way,otherwise will report error. ::: {.cell}\n\nCode\ninstall.packages(\"arrow\", repos = c(\"https://apache.r-universe.dev\"))\n\n:::\n\n\nCode\nlibrary(arrow)\narrow_info()\n\n\nArrow package version: 17.0.0.1\n\nCapabilities:\n               \nacero      TRUE\ndataset    TRUE\nsubstrait FALSE\nparquet    TRUE\njson       TRUE\ns3         TRUE\ngcs       FALSE\nutf8proc   TRUE\nre2        TRUE\nsnappy     TRUE\ngzip       TRUE\nbrotli    FALSE\nzstd       TRUE\nlz4        TRUE\nlz4_frame  TRUE\nlzo       FALSE\nbz2       FALSE\njemalloc  FALSE\nmimalloc   TRUE\n\nMemory:\n                  \nAllocator mimalloc\nCurrent    0 bytes\nMax        0 bytes\n\nRuntime:\n                        \nSIMD Level          none\nDetected SIMD Level none\n\nBuild:\n                                    \nC++ Library Version           17.0.0\nC++ Compiler              AppleClang\nC++ Compiler Version 14.0.0.14000029\n\n\n\n\nCode\ndata001=read_parquet('data/df.parquet')\nhead(data001)\n\n\n# A tibble: 6 × 62\n  FlightDate          Airline Origin Dest  Cancelled Diverted CRSDepTime DepTime\n  &lt;dttm&gt;              &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;     &lt;lgl&gt;         &lt;int&gt;   &lt;dbl&gt;\n1 2022-04-04 00:00:00 Commut… GJT    DEN   FALSE     FALSE          1133    1123\n2 2022-04-04 00:00:00 Commut… HRL    IAH   FALSE     FALSE           732     728\n3 2022-04-04 00:00:00 Commut… DRO    DEN   FALSE     FALSE          1529    1514\n4 2022-04-04 00:00:00 Commut… IAH    GPT   FALSE     FALSE          1435    1430\n5 2022-04-04 00:00:00 Commut… DRO    DEN   FALSE     FALSE          1135    1135\n6 2022-04-04 00:00:00 Commut… DEN    TUL   FALSE     FALSE           955     952\n# ℹ 54 more variables: DepDelayMinutes &lt;dbl&gt;, DepDelay &lt;dbl&gt;, ArrTime &lt;dbl&gt;,\n#   ArrDelayMinutes &lt;dbl&gt;, AirTime &lt;dbl&gt;, CRSElapsedTime &lt;dbl&gt;,\n#   ActualElapsedTime &lt;dbl&gt;, Distance &lt;dbl&gt;, Year &lt;int&gt;, Quarter &lt;int&gt;,\n#   Month &lt;int&gt;, DayofMonth &lt;int&gt;, DayOfWeek &lt;int&gt;,\n#   Marketing_Airline_Network &lt;chr&gt;,\n#   Operated_or_Branded_Code_Share_Partners &lt;chr&gt;,\n#   DOT_ID_Marketing_Airline &lt;int&gt;, IATA_Code_Marketing_Airline &lt;chr&gt;, …\n\n\nread parquet zip ::: {.cell}\n\nCode\ndata001=read_parquet('data/df.parquet.gzip')\nhead(data001)\n\n\n# A tibble: 6 × 62\n  FlightDate          Airline Origin Dest  Cancelled Diverted CRSDepTime DepTime\n  &lt;dttm&gt;              &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;     &lt;lgl&gt;         &lt;int&gt;   &lt;dbl&gt;\n1 2022-04-04 00:00:00 Commut… GJT    DEN   FALSE     FALSE          1133    1123\n2 2022-04-04 00:00:00 Commut… HRL    IAH   FALSE     FALSE           732     728\n3 2022-04-04 00:00:00 Commut… DRO    DEN   FALSE     FALSE          1529    1514\n4 2022-04-04 00:00:00 Commut… IAH    GPT   FALSE     FALSE          1435    1430\n5 2022-04-04 00:00:00 Commut… DRO    DEN   FALSE     FALSE          1135    1135\n6 2022-04-04 00:00:00 Commut… DEN    TUL   FALSE     FALSE           955     952\n# ℹ 54 more variables: DepDelayMinutes &lt;dbl&gt;, DepDelay &lt;dbl&gt;, ArrTime &lt;dbl&gt;,\n#   ArrDelayMinutes &lt;dbl&gt;, AirTime &lt;dbl&gt;, CRSElapsedTime &lt;dbl&gt;,\n#   ActualElapsedTime &lt;dbl&gt;, Distance &lt;dbl&gt;, Year &lt;int&gt;, Quarter &lt;int&gt;,\n#   Month &lt;int&gt;, DayofMonth &lt;int&gt;, DayOfWeek &lt;int&gt;,\n#   Marketing_Airline_Network &lt;chr&gt;,\n#   Operated_or_Branded_Code_Share_Partners &lt;chr&gt;,\n#   DOT_ID_Marketing_Airline &lt;int&gt;, IATA_Code_Marketing_Airline &lt;chr&gt;, …\n\n:::",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#read-feather",
    "href": "data manipulation/1 input ouput.html#read-feather",
    "title": "input & ouput in R",
    "section": "1.4 read feather",
    "text": "1.4 read feather\n\n\nCode\nlibrary(feather)\n\ndata001=read_feather('data/feather_file.feather')\nhead(data001)\n\n\n# A tibble: 6 × 62\n  FlightDate          Airline Origin Dest  Cancelled Diverted CRSDepTime DepTime\n  &lt;dttm&gt;              &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;     &lt;lgl&gt;         &lt;int&gt;   &lt;dbl&gt;\n1 2022-04-04 00:00:00 Commut… GJT    DEN   FALSE     FALSE          1133    1123\n2 2022-04-04 00:00:00 Commut… HRL    IAH   FALSE     FALSE           732     728\n3 2022-04-04 00:00:00 Commut… DRO    DEN   FALSE     FALSE          1529    1514\n4 2022-04-04 00:00:00 Commut… IAH    GPT   FALSE     FALSE          1435    1430\n5 2022-04-04 00:00:00 Commut… DRO    DEN   FALSE     FALSE          1135    1135\n6 2022-04-04 00:00:00 Commut… DEN    TUL   FALSE     FALSE           955     952\n# ℹ 54 more variables: DepDelayMinutes &lt;dbl&gt;, DepDelay &lt;dbl&gt;, ArrTime &lt;dbl&gt;,\n#   ArrDelayMinutes &lt;dbl&gt;, AirTime &lt;dbl&gt;, CRSElapsedTime &lt;dbl&gt;,\n#   ActualElapsedTime &lt;dbl&gt;, Distance &lt;dbl&gt;, Year &lt;int&gt;, Quarter &lt;int&gt;,\n#   Month &lt;int&gt;, DayofMonth &lt;int&gt;, DayOfWeek &lt;int&gt;,\n#   Marketing_Airline_Network &lt;chr&gt;,\n#   Operated_or_Branded_Code_Share_Partners &lt;chr&gt;,\n#   DOT_ID_Marketing_Airline &lt;int&gt;, IATA_Code_Marketing_Airline &lt;chr&gt;, …",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#read-json-file-and-convert-into-data-frame",
    "href": "data manipulation/1 input ouput.html#read-json-file-and-convert-into-data-frame",
    "title": "input & ouput in R",
    "section": "1.5 read JSON file and convert into data frame",
    "text": "1.5 read JSON file and convert into data frame\n\n\nCode\nlibrary(jsonlite)\ndata=read_json(\"./data/dataj.json\")\n\n\n\n\nCode\ndata002=(data) %&gt;% as.data.frame()\n\n\n\n\nCode\nglimpse(data002)\n\n\nRows: 1\nColumns: 11\n$ glossary.title                                                     &lt;chr&gt; \"ex…\n$ glossary.GlossDiv.title                                            &lt;chr&gt; \"S\"\n$ glossary.GlossDiv.GlossList.GlossEntry.ID                          &lt;chr&gt; \"SG…\n$ glossary.GlossDiv.GlossList.GlossEntry.SortAs                      &lt;chr&gt; \"SG…\n$ glossary.GlossDiv.GlossList.GlossEntry.GlossTerm                   &lt;chr&gt; \"St…\n$ glossary.GlossDiv.GlossList.GlossEntry.Acronym                     &lt;chr&gt; \"SG…\n$ glossary.GlossDiv.GlossList.GlossEntry.Abbrev                      &lt;chr&gt; \"IS…\n$ glossary.GlossDiv.GlossList.GlossEntry.GlossDef.para               &lt;chr&gt; \"A …\n$ glossary.GlossDiv.GlossList.GlossEntry.GlossDef.GlossSeeAlso..GML. &lt;chr&gt; \"GM…\n$ glossary.GlossDiv.GlossList.GlossEntry.GlossDef.GlossSeeAlso..XML. &lt;chr&gt; \"XM…\n$ glossary.GlossDiv.GlossList.GlossEntry.GlossSee                    &lt;chr&gt; \"ma…",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#getting-data-from-images",
    "href": "data manipulation/1 input ouput.html#getting-data-from-images",
    "title": "input & ouput in R",
    "section": "1.6 Getting Data from Images",
    "text": "1.6 Getting Data from Images\n\n\nCode\nlibrary(tesseract)\n\n\n\n\nCode\neng &lt;- tesseract(\"eng\")\ntext001 &lt;- tesseract::ocr(\"640.png\", engine = eng)\n\n\n\n\nCode\ncat(text001)\n\n\nWOODCASK = @WOODCASKSHOP\nwww.woodcask.shop\nSingapore All prices are in 10ml pours.\nPrice valid date: 22-23/2/2025\n1D Name PRICE/1OML\n\"R1054_—-CARONI21Y01997888R60.4%  ~Sst~CS~=“C~S*‘“s*~*~*~*~*~*~*S~SSC&lt;C*‘;*‘«wRROCO\nR1066A Long Pond 2005 stc&lt;h&gt;e ester 550/700 cambridge 62.5% ¥ 50.00\n\"R1063___ LONG POND 2005 HABITATION VELIER 14 YOEASTER1285.4%62% +¥ ~~ 60.00.\nR1030 CARONI 23 YO 1994-2017 DOUBLE MATURATION GUYANA STOCK 57.18% ¥ 150.00\nR1080 CARONI 15 YO SINGLE CASK#3767 LMDW 2000 -2015 68.4% ¥ 400.00\nR1081 Long Pond Plantation Single Cask 1993 CRV 15 YO The Nectar 70cl 76,8% ¥ 50.00\nR1073 New Yarmouth Jamaica 1994 26 YO Year Old Blackadder 66.8% ¥ 50.00\nR1046 CARONI 17 YO VELIER EXTRA STRONG 110 PROOF ¥ 50.00\nR1070 CARONI 23 YO 1997 SPHERIC SPIRITS 1ST FILL BOURBON BARREL#1143 62% ¥ 70.00\nHw s1005 GLEN GRANT 31yo 1970 2001 70cl 45% SAMAROLI Sherry Cask 1025 ¥ 200.00\nWS1395 Longrow 1987 \"The Last Bottling\" Bottled 2007 45% CASK #116 ¥ 100.00\nws1402 Glen Scotia 1977 Prestonfield House 33 YO LMDW & The Nectar 49.1% ¥ 100.00\nws1304 SPRINGBANK 21 YO SINGLE CASK NEDERLAND OLOROSO SHERRY HOGSHEAD 48% ¥ 150.00\nWS1396 Springbank 1993 Moon Import 35th Anniversary / Lawless 45% ¥ 100.00\nws1391 Springbank 1985 Brae Dean Dtm Sherry Wood Moon Import 50% Barrel 40/1-4 ¥ 200.00\nws1210 CLYNELISH 1990-2022 BOURBON BARREL#3477 LMDW ARTIST12 47.7% ¥ 100.00\nWS1450 TALISKER 12 YO The Golden Spirit - John Walker & Sons 1980S BOT 43% ¥ 100.00\nws1165 GLENURY 21 YO 1980 OMC 50% ¥ 100.00\nws1279 GLEN KEITH 20 YO LMDW ARTIST#3 BOURBON BARREL#120560 1992-2013 60.1% ¥ 60.00\nWS1278 GLENCRAIG 35 YO LMDW ARTIST#3 BOURBON BARREL#4257 1976-2013 43.7% ¥ 100.00\n“WS1240 Blair Athol 1976 Cadenhead's 200 1976-1997478% ~~~ ~+¥ ~~~~-80.00°\nWS1233 BENROMACH 28 YO 1965-1993 CADENHEADS AUTHENTIC COLLECTION 47.6% ¥ 120.00\nws1311 SPRINGBANK 22 YO 1992 THE BOTTLERS REFILL SHERRY HOGSHEAD#227 51.9% ¥ 150.00\nws1449 GLENDRONACH 25 YO 1993 -2019 OLOROSO SHERRY CASK#416 51.2% ¥ 60.00\nws1162 MALALLAN 2002-2022 TWE SPEYMALT CASK#9545 55.5% ¥ 60.00\nWS1375, MACALLAN 12 YO LIC UTIF 935 MILANO 1980S 43% ¥ 100.00\nws1358 MACALLAN 8 YEAR OLD SHERRY WOOD 1970S 75CL 43% ¥ 200.00\nwS1205 MACALLAN 11 YO SMWS 24.57 1988 55.9% ¥ 120.00\nws1200 GLENFARCLAS 29 YO 1970 SHERRYWOOD Cadenhead bot 2000 54% ¥ 150.00\nws1341 GLENROTHES 27 YO 1979-2006 RED WINE CASK FINISHED OMC 50% ¥ 120.00\n\n\n\n\nCode\nraw_tibble001 &lt;- text001 %&gt;% \n  str_split(pattern = \"\\n\") %&gt;% \n  unlist() %&gt;%\n  tibble(data = .) %&gt;% slice(6:n()) %&gt;% filter(str_length(data) &gt;= 2) %&gt;%  mutate(old=data\n         ,data=data %&gt;%str_replace_all('_','')%&gt;%str_replace_all('—','')%&gt;%str_replace_all(\"'\",'')%&gt;%str_replace_all('\"','')\n         ) %&gt;% separate(\n    data, \n    into = c(\"one\", \"price\"), \n    sep = c(\"¥\")\n    ) %&gt;% mutate(\n    id = str_extract(one, \"^\\\\S+ \")\n    ,name=gsub(\"^\\\\S+ \", \"\",one)\n  )\n\n\nglimpse(raw_tibble001)\n\n\nRows: 30\nColumns: 5\n$ one   &lt;chr&gt; \"R1054-CARONI21Y01997888R60.4%  ~Sst~CS~=“C~S*‘“s*~*~*~*~*~*~*S~…\n$ price &lt;chr&gt; NA, \" 50.00\", \" ~~ 60.00.\", \" 150.00\", \" 400.00\", \" 50.00\", \" 50…\n$ old   &lt;chr&gt; \"\\\"R1054_—-CARONI21Y01997888R60.4%  ~Sst~CS~=“C~S*‘“s*~*~*~*~*~*…\n$ id    &lt;chr&gt; \"R1054-CARONI21Y01997888R60.4% \", \"R1066A \", \"R1063 \", \"R1030 \",…\n$ name  &lt;chr&gt; \" ~Sst~CS~=“C~S*‘“s*~*~*~*~*~*~*S~SSC&lt;C*‘;*‘«wRROCO\", \"Long Pond…",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#write-csv",
    "href": "data manipulation/1 input ouput.html#write-csv",
    "title": "input & ouput in R",
    "section": "2.1 write csv",
    "text": "2.1 write csv\n\n\nCode\nwrite.csv(data001,'data001 csv output data.csv')",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#write-excel",
    "href": "data manipulation/1 input ouput.html#write-excel",
    "title": "input & ouput in R",
    "section": "2.2 write excel",
    "text": "2.2 write excel\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nwrite.xlsx(data001,'data001 excel output data.xlsx')",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#write-parquet",
    "href": "data manipulation/1 input ouput.html#write-parquet",
    "title": "input & ouput in R",
    "section": "2.3 write parquet",
    "text": "2.3 write parquet\n\n\nCode\nlibrary(arrow)\nwrite_parquet(data001,'data/df.parquet')\n\n\noutput to zip format\n\n\nCode\nwrite_parquet(data001,'data/df.parquet.gzip',compression='gzip')",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#write-feather",
    "href": "data manipulation/1 input ouput.html#write-feather",
    "title": "input & ouput in R",
    "section": "2.4 write feather",
    "text": "2.4 write feather\n\n\nCode\nlibrary(feather)\nwrite_feather(data001,'data/feather_file.feather')",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/1 input ouput.html#write-txt",
    "href": "data manipulation/1 input ouput.html#write-txt",
    "title": "input & ouput in R",
    "section": "2.5 write txt",
    "text": "2.5 write txt\n\n\nCode\ntext=tibble('hello world\nits time!')\n\nwrite_delim(text, \"text.txt\")",
    "crumbs": [
      "data manipulation",
      "input & ouput in R"
    ]
  },
  {
    "objectID": "data manipulation/5 resample.html",
    "href": "data manipulation/5 resample.html",
    "title": "resample",
    "section": "",
    "text": "1 k-Fold Cross-Validation\n\n\n\nCode\nk_flod_resample&lt;- vfold_cv(data, v = 10)\nk_flod_resample\n\n\n\n\n2 MONTE CARLO CROSS-VALIDATION\nfor MCCV, this proportion of the data is randomly selected each time. This results in assessment sets that are not mutually exclusive\n\n\nCode\nmc_resample&lt;- mc_cv(data, prop = 9/10, times = 20)\nmc_resample\n\n\n\n\n3 The Bootstrap\nA bootstrap sample of the training set is a sample that is the same size as the training set but is drawn with replacement\n\n\n\nCode\nbootstraps_resample&lt;- bootstraps(data, times = 1000)\nbootstraps_resample\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "data manipulation",
      "resample"
    ]
  },
  {
    "objectID": "data manipulation/5 recipe.html",
    "href": "data manipulation/5 recipe.html",
    "title": "recipe",
    "section": "",
    "text": "1 create recipe step_xxx\n\n\nCode\ntree_rec &lt;- recipe(legal_status ~ ., data = trees_train) %&gt;%\n  \n # update the role for tree_id, since this is a variable we might like to keep around for convenience as an identifier for rows but is not a predictor or outcome. \n  update_role(tree_id, new_role = \"ID\") %&gt;%\n  \n# step_other() to collapse categorical levels for species, caretaker, and the site info. Before this step, there were 300+ species!\n  step_other(species, caretaker, threshold = 0.01) %&gt;%\n  \n# create dummy for nominal data exclude outcome\n  step_dummy(all_nominal(), -all_outcomes()) %&gt;%\n  \n# The date column with when each tree was planted may be useful for fitting this model, but probably not the exact date, given how slowly trees grow. Let’s create a year feature from the date, and then remove the original date variable.  \n  step_date(date, features = c(\"year\")) %&gt;%step_rm(date) %&gt;%\n  \n# There are many more DPW maintained trees than not, so let’s downsample the data for training.  \n  step_downsample(legal_status)%&gt;%\n\n# will remove all. predictor variables that contain only a single value\n    step_zv(all_numeric(all_predictors())) %&gt;% \n  \n#  normalize all numeric data\n  step_normalize(all_numeric()) %&gt;% \n\n# use KNN to impute all predictors\nstep_impute_knn(all_predictors()) \n\n\n\n\n2 check recipe check_xxx\n\n\nCode\n#&gt; [1] \"check_class\"      \"check_cols\"       \"check_missing\"   \n#&gt; [4] \"check_name\"       \"check_new_data\"   \"check_new_values\"\n#&gt; [7] \"check_range\"      \"check_type\"\n\n\n\n\n3 roles to select variables\nIn most cases, the right approach for users will be use to use the predictor-specific selectors such as all_numeric_predictors() and all_nominal_predictors().\n\n\nCode\nhas_role(match = \"predictor\")\n\nhas_type(match = \"numeric\")\n\nall_outcomes()\n\nall_predictors()\n\nall_date()\n\nall_date_predictors()\n\nall_datetime()\n\nall_datetime_predictors()\n\nall_double()\n\nall_double_predictors()\n\nall_factor()\n\nall_factor_predictors()\n\nall_integer()\n\nall_integer_predictors()\n\nall_logical()\n\nall_logical_predictors()\n\nall_nominal()\n\nall_nominal_predictors()\n\nall_numeric()\n\nall_numeric_predictors()\n\nall_ordered()\n\nall_ordered_predictors()\n\nall_string()\n\nall_string_predictors()\n\nall_unordered()\n\nall_unordered_predictors()\n\ncurrent_info()\n\n\n\n\n4 reference:\nhttps://recipes.tidymodels.org/reference/has_role.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "data manipulation",
      "recipe"
    ]
  },
  {
    "objectID": "Plot/4 Financial data.html",
    "href": "Plot/4 Financial data.html",
    "title": "Financial data",
    "section": "",
    "text": "Code\nlibrary(quantmod)\nlibrary(tidyverse)\nlibrary(yahoofinancer)\nlibrary(Quandl)\nlibrary(plotly)\nlibrary(finreportr)\nlibrary(rvest)\n\n\n\n1 stock price\n\n\nCode\nnifty_50 &lt;- Index$new('^NSEI')\n\ndata001=nifty_50$get_history(start = '2023-01-01', interval = '1d') %&gt;% unnest(cols = adj_close)\n\na=head(data001$adj_close,1)[[1]]\n\ndata001b=data001 %&gt;% mutate(adj_close2=adj_close/a)\n\n\n\n\nCode\nlength(unlist(data001$adj_close))\n\n\n[1] 528\n\n\nCode\nlength(data001$adj_close)\n\n\n[1] 528\n\n\n\n\nCode\ntest=data001$adj_close %&gt;% unlist()\n\n\n\n\nCode\naapl &lt;- Ticker$new('aapl')\n\ndata002=aapl$get_history(start = '2023-01-01', interval = '1d') %&gt;% mutate(adj_close=adj_close %&gt;% as.numeric())\n\na=head(data002$adj_close,1)[[1]]\n\ndata002b=data002 %&gt;% mutate(adj_close2=adj_close/a)\n\n\n\n\nCode\n# initialize plot\nfig &lt;- plot_ly()\n\n# add data from first dataframe Df1\nfig &lt;- fig %&gt;%\n    add_lines(data=data001b, name=\"NSEI50\", x = ~date, y = ~adj_close2)\n\n# add data from second dataframe Df2\nfig &lt;- fig %&gt;%\n    add_lines(data=data002b, name=\"apple\", x = ~date, y = ~adj_close2)\n# show figure\nfig\n\n\n\n\n\n\n\n\n2 financials income statement\n\n\nCode\nlibrary(chromote)\nlibrary(httr)\n\n\n\n\nCode\nurl='https://finance.yahoo.com/quote/AMAT/financials'\n\n\n\n\nCode\nb &lt;- ChromoteSession$new()\n\n\n\n\nCode\n# In a web browser, open a viewer for the headless browser. Works best with\n# Chromium-based browsers.\n#b$view()\nb$Page$navigate(url)\n\n\n$frameId\n[1] \"6576FD94B556CF175D378FD965D36EB5\"\n\n$loaderId\n[1] \"C6A16C6616D37C0A2741BA44ADF3A92D\"\n\n\n\n\nCode\nx &lt;- b$DOM$getDocument()\n\n\n\n\nCode\nb$screenshot(\"sidebar.png\")\n\n\n[1] \"An error occurred: Error in onRejected(...): code: -32000\\n  message: Cannot take screenshot with 0 height.\\n\"\n\n\n\n\nCode\npage=b$Runtime$evaluate(\"document.querySelector('html').outerHTML\")$result$value %&gt;% \n  read_html()\n\n\n\n\nCode\nb$close()\n\n\n[1] TRUE\n\n\n\n\nCode\ncol1=page%&gt;% \n  html_elements(\".row .column:nth-child(1)\") %&gt;% html_text2()  %&gt;% head(33)\n\n\n\n\nCode\ncol2=page%&gt;% \n  html_elements(\".row .column:nth-child(2)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol3=page%&gt;% \n  html_elements(\".row .column:nth-child(3)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol4=page%&gt;% \n  html_elements(\".row .column:nth-child(4)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol5=page%&gt;% \n  html_elements(\".row .column:nth-child(5)\") %&gt;% html_text2()\n\n\n\n\nCode\ncol6=page%&gt;% \n  html_elements(\".row .column:nth-child(6)\") %&gt;% html_text2()\n\n\n\n\nCode\ndata001=data.frame(col1,col2,col3,col4,col5,col6)\n\n\n\n\nCode\nlibrary(janitor )\ncolnames(data001) &lt;- data001[1,]\ndata001 &lt;- data001[-1, ]  %&gt;%clean_names()\n\n\n\n\nCode\nglimpse(data001)\n\n\nRows: 32\nColumns: 6\n$ breakdown   &lt;chr&gt; \"HTML_TAG_START HTML_TAG_END\\nTotal Revenue\", \"Cost of Rev…\n$ ttm         &lt;chr&gt; \"27,635,000\", \"14,446,000\", \"13,189,000\", \"5,114,000\", \"8,…\n$ x10_31_2024 &lt;chr&gt; \"27,176,000\", \"14,279,000\", \"12,897,000\", \"5,030,000\", \"7,…\n$ x10_31_2023 &lt;chr&gt; \"26,517,000\", \"14,133,000\", \"12,384,000\", \"4,730,000\", \"7,…\n$ x10_31_2022 &lt;chr&gt; \"25,785,000\", \"13,792,000\", \"11,993,000\", \"4,209,000\", \"7,…\n$ x10_31_2021 &lt;chr&gt; \"23,063,000\", \"12,149,000\", \"10,914,000\", \"3,714,000\", \"7,…\n\n\n\n\nCode\ndata002=data001 %&gt;% mutate(breakdown=breakdown %&gt;% str_remove_all('HTML_TAG_START HTML_TAG_END')\n                           ,ttm=round(as.numeric(gsub(\",\",\"\",ttm)))\n                           ,year_2024=round(as.numeric(gsub(\",\",\"\",x10_31_2024)))\n                             ,year_2022=round(as.numeric(gsub(\",\",\"\",x10_31_2022)))\n                             ,year_2021=round(as.numeric(gsub(\",\",\"\",x10_31_2021)))\n                             ,year_2023=round(as.numeric(gsub(\",\",\"\",x10_31_2023)))\n                           ) %&gt;% select(-x10_31_2023,-x10_31_2022,-x10_31_2021,-x10_31_2024)\n\n\n\n\nCode\nglimpse(data002)\n\n\nRows: 32\nColumns: 6\n$ breakdown &lt;chr&gt; \"\\nTotal Revenue\", \"Cost of Revenue\", \"Gross Profit\", \"\\nOpe…\n$ ttm       &lt;dbl&gt; 27635000, 14446000, 13189000, 5114000, 8075000, -107000, NA,…\n$ year_2024 &lt;dbl&gt; 27176000, 14279000, 12897000, 5030000, 7867000, 285000, NA, …\n$ year_2022 &lt;dbl&gt; 25785000, 13792000, 11993000, 4209000, 7784000, -189000, 400…\n$ year_2021 &lt;dbl&gt; 23063000, 12149000, 10914000, 3714000, 7200000, -118000, -31…\n$ year_2023 &lt;dbl&gt; 26517000, 14133000, 12384000, 4730000, 7654000, 62000, NA, 7…\n\n\n\n\nCode\noptions(scipen = 999)\n\nlibrary(knitr)\nkable(data002)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbreakdown\nttm\nyear_2024\nyear_2022\nyear_2021\nyear_2023\n\n\n\n\n2\nTotal Revenue\n27635000\n27176000\n25785000\n23063000\n26517000\n\n\n3\nCost of Revenue\n14446000\n14279000\n13792000\n12149000\n14133000\n\n\n4\nGross Profit\n13189000\n12897000\n11993000\n10914000\n12384000\n\n\n5\nOperating Expense\n5114000\n5030000\n4209000\n3714000\n4730000\n\n\n6\nOperating Income\n8075000\n7867000\n7784000\n7200000\n7654000\n\n\n7\nNet Non Operating Interest Income Expense\n-107000\n285000\n-189000\n-118000\n62000\n\n\n8\nOther Income Expense\nNA\nNA\n4000\n-311000\nNA\n\n\n9\nPretax Income\n7968000\n8152000\n7599000\n6771000\n7716000\n\n\n10\nTax Provision\n1625000\n975000\n1074000\n883000\n860000\n\n\n11\nNet Income Common Stockholders\n6343000\n7177000\n6525000\n5888000\n6856000\n\n\n12\nDiluted NI Available to Com Stockholders\n6343000\n7177000\n6525000\n5888000\n6856000\n\n\n13\nBasic EPS\n8\n9\n7\n6\n8\n\n\n14\nDiluted EPS\n8\n9\n7\n6\n8\n\n\n15\nBasic Average Shares\n822750\n827000\n871000\n910000\n840000\n\n\n16\nDiluted Average Shares\n829500\n834000\n877000\n919000\n845000\n\n\n17\nTotal Operating Income as Reported\n8075000\n7867000\n7788000\n6889000\n7654000\n\n\n18\nTotal Expenses\n19560000\n19309000\n18001000\n15863000\n18863000\n\n\n19\nNet Income from Continuing & Discontinued Operation\n6343000\n7177000\n6525000\n5888000\n6856000\n\n\n20\nNormalized Income\n6343000\n7177000\n6521564\n6158570\n6856000\n\n\n21\nInterest Income\n145000\n532000\n39000\n118000\n300000\n\n\n22\nInterest Expense\n252000\n247000\n228000\n236000\n238000\n\n\n23\nNet Interest Income\n-107000\n285000\n-189000\n-118000\n62000\n\n\n24\nEBIT\n8220000\n8399000\n7827000\n7007000\n7954000\n\n\n25\nEBITDA\n8626000\n8791000\n8271000\n7401000\n8469000\n\n\n26\nReconciled Cost of Revenue\n14446000\n14279000\n13792000\n12149000\n14133000\n\n\n27\nReconciled Depreciation\n406000\n392000\n444000\n394000\n515000\n\n\n28\nNet Income from Continuing Operation Net Minority Interest\n6343000\n7177000\n6525000\n5888000\n6856000\n\n\n29\nTotal Unusual Items Excluding Goodwill\nNA\nNA\n4000\n-311000\nNA\n\n\n30\nTotal Unusual Items\nNA\nNA\n4000\n-311000\nNA\n\n\n31\nNormalized EBITDA\n8626000\n8791000\n8267000\n7712000\n8469000\n\n\n32\nTax Rate for Calcs\n0\n0\n0\n0\n0\n\n\n33\nTax Effect of Unusual Items\nNA\nNA\n564\n-40430\nNA\n\n\n\n\n\n\n\n3 resource:\nhttps://github.com/rsquaredacademy/yahoofinancer\nhttps://github.com/sewardlee337/finreportr\nhttps://www.youtube.com/watch?v=uVHGgSXtQmE\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "Financial data"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html",
    "href": "Plot/2 plotly.html",
    "title": "Plotly in R",
    "section": "",
    "text": "Code\nlibrary(gapminder)\nlibrary(plotly)\npackageVersion(\"plotly\")\n\n\n[1] '4.10.4'",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#color-by-group",
    "href": "Plot/2 plotly.html#color-by-group",
    "title": "Plotly in R",
    "section": "1.1 color by group",
    "text": "1.1 color by group\n\n\nCode\nfig &lt;- plot_ly(data = tips, x = ~total_bill, y = ~tip,color=~sex)\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#size-by-group",
    "href": "Plot/2 plotly.html#size-by-group",
    "title": "Plotly in R",
    "section": "1.2 size by group",
    "text": "1.2 size by group\n\n\nCode\nfig &lt;- plot_ly(data = tips, x = ~total_bill, y = ~tip,color=~sex,size=~size)\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#line-plot",
    "href": "Plot/2 plotly.html#line-plot",
    "title": "Plotly in R",
    "section": "1.3 line Plot",
    "text": "1.3 line Plot\n\n\nCode\ndata001=gapminder\ndata002= data001 %&gt;% group_by(continent,year) %&gt;% summarise(pop=sum(pop))\n\n\n\n\nCode\nfig &lt;- plot_ly(data = data002 %&gt;%filter(continent=='Asia'), x = ~year, y = ~pop,mode = 'lines')\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#line-width-and-colour",
    "href": "Plot/2 plotly.html#line-width-and-colour",
    "title": "Plotly in R",
    "section": "1.4 line width and colour",
    "text": "1.4 line width and colour\n\n\nCode\nfig &lt;- plot_ly(data = data002 %&gt;%filter(continent=='Asia'), x = ~year, y = ~pop,mode = 'lines',line = list(color = 'rgb(205, 12, 24)', width = 8))\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#color-by-group-1",
    "href": "Plot/2 plotly.html#color-by-group-1",
    "title": "Plotly in R",
    "section": "1.5 color by group",
    "text": "1.5 color by group\n\n\nCode\nfig &lt;- plot_ly(data = data002, x = ~year, y = ~pop,color = ~continent,mode = 'lines')\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#set-bin-number",
    "href": "Plot/2 plotly.html#set-bin-number",
    "title": "Plotly in R",
    "section": "2.1 set bin number",
    "text": "2.1 set bin number\n\n\nCode\nfig &lt;- plot_ly(data=tips,x = ~total_bill, type = \"histogram\",nbinsx = 5 )\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#color-by-group-2",
    "href": "Plot/2 plotly.html#color-by-group-2",
    "title": "Plotly in R",
    "section": "2.2 color by group",
    "text": "2.2 color by group\n\n\nCode\nfig &lt;- plot_ly(data=tips,x = ~total_bill,color=~sex, type = \"histogram\")\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#show-number",
    "href": "Plot/2 plotly.html#show-number",
    "title": "Plotly in R",
    "section": "3.1 show number",
    "text": "3.1 show number\n\n\nCode\nfig &lt;- plot_ly(data=tips2,x = ~sex,y=~total_bill,text=~total_bill, type = \"bar\")\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#horizontal-barplot",
    "href": "Plot/2 plotly.html#horizontal-barplot",
    "title": "Plotly in R",
    "section": "3.2 Horizontal Barplot",
    "text": "3.2 Horizontal Barplot\n\n\nCode\nfig &lt;- plot_ly(data=tips2,y = ~sex,x=~total_bill,color=~sex, type = \"bar\",orientation = 'h')\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#bar-chart-order",
    "href": "Plot/2 plotly.html#bar-chart-order",
    "title": "Plotly in R",
    "section": "3.3 bar chart order",
    "text": "3.3 bar chart order\n\n\nCode\nfig &lt;- plot_ly(data=tips2,x = ~sex,y=~total_bill,color=~sex, type = \"bar\")%&gt;% \n  layout(xaxis = list(categoryorder = \"total ascending\"))\n\nfig\n\n\n\n\n\n\n\n\nCode\nfig &lt;- plot_ly(data=tips2,x = ~sex,y=~total_bill,color=~sex, type = \"bar\")%&gt;% \n  layout(xaxis = list(categoryorder = \"total descending\"))\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#color-by-group-3",
    "href": "Plot/2 plotly.html#color-by-group-3",
    "title": "Plotly in R",
    "section": "4.1 color by group",
    "text": "4.1 color by group\n\n\nCode\nfig &lt;- plot_ly(data=tips,x = ~sex,y=~total_bill,color=~sex, type = \"box\")\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#color-by-group-4",
    "href": "Plot/2 plotly.html#color-by-group-4",
    "title": "Plotly in R",
    "section": "5.1 color by group",
    "text": "5.1 color by group\n\n\nCode\np=ggplot(tips, aes(day,tip,color=sex)) + geom_jitter(position=position_jitterdodge())\nggplotly(p)",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#add-title",
    "href": "Plot/2 plotly.html#add-title",
    "title": "Plotly in R",
    "section": "7.1 add title",
    "text": "7.1 add title\n\n\nCode\nfig &lt;- plot_ly(data=tips,x = ~total_bill,color=~sex, type = \"histogram\") %&gt;% layout(title = 'new title')\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#adjust-size",
    "href": "Plot/2 plotly.html#adjust-size",
    "title": "Plotly in R",
    "section": "7.2 adjust size",
    "text": "7.2 adjust size\n\n\nCode\nfig &lt;- plot_ly(data=tips,x = ~total_bill,color=~sex, type = \"histogram\"\n               ,width = 500, height = 200)\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#change-x-y-name",
    "href": "Plot/2 plotly.html#change-x-y-name",
    "title": "Plotly in R",
    "section": "7.3 change x y name",
    "text": "7.3 change x y name\n\n\nCode\nfig &lt;- plot_ly(data=tips,x = ~total_bill,color=~sex, type = \"histogram\") %&gt;% layout(title = 'new title'\n                                                                                   ,xaxis = list(title = 'new x')\n                                                                                  ,yaxis = list(title = 'new y') \n                                                                                    )\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#change-x-y-axis-range",
    "href": "Plot/2 plotly.html#change-x-y-axis-range",
    "title": "Plotly in R",
    "section": "7.4 change x y axis range",
    "text": "7.4 change x y axis range\n\n\nCode\nfig &lt;- plot_ly(data=tips,x = ~total_bill,color=~sex, type = \"histogram\") %&gt;% layout(title = 'new title'\n                                                                                   ,xaxis = list(title = 'new x',range=c(20,40))\n                                                                                  ,yaxis = list(title = 'new y',range=c(20,40)) \n                                                                                    )\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#add-footnote",
    "href": "Plot/2 plotly.html#add-footnote",
    "title": "Plotly in R",
    "section": "7.5 add footnote",
    "text": "7.5 add footnote\n\n\nCode\nfig%&gt;% layout(annotations = \n                         list(x = 0, y = -0.1, \n                              text = \"this is footnote\", \n                              showarrow = F, \n                              xref='paper', \n                              yref='paper')\n    )",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/2 plotly.html#legend",
    "href": "Plot/2 plotly.html#legend",
    "title": "Plotly in R",
    "section": "7.6 legend",
    "text": "7.6 legend\n\n7.6.1 hide legend\n\n\nCode\nfig &lt;- plot_ly(data = data002, x = ~year, y = ~pop,color = ~continent,mode = 'lines') %&gt;% layout(showlegend = FALSE)\nfig\n\n\n\n\n\n\n\n\n7.6.2 show legend and change legend name\n\n\nCode\nfig &lt;- plot_ly(data = data002 %&gt;% filter(continent=='Asia'), x = ~year, y = ~pop,color = ~continent,mode = 'lines',name='Asia pop') %&gt;% layout(showlegend = TRUE)\nfig\n\n\n\n\n\n\n\n\n7.6.3 change legend and change legend Position\n\n\nCode\nfig &lt;- plot_ly(data = data002, x = ~year, y = ~pop,color = ~continent,mode = 'lines') %&gt;% layout(legend = list(orientation = 'h'))\n\nfig",
    "crumbs": [
      "Plot",
      "Plotly in R"
    ]
  },
  {
    "objectID": "Plot/5 Map/2 China accident map with mapview.html",
    "href": "Plot/5 Map/2 China accident map with mapview.html",
    "title": "China accident map",
    "section": "",
    "text": "1 data\ndata source :https://github.com/percent4/chinese_incident_tracker\n\n\nCode\nlibrary(tidyverse)\nlibrary(rvest)\nlibrary(jsonlite)\nlibrary(curl)\nlibrary(lubridate)\nlibrary(plotly)\nlibrary(ggplot2)\nlibrary(openxlsx)\nlibrary(readxl)\n\n\n\n\n2 one file\n\n\nCode\n#url &lt;- \"https://raw.githubusercontent.com/percent4/chinese_incident_tracker/main/elk/data/00105670-df53-4be8-9039-8a07fe2d2b4d.json\"\n#download.file(url,\"./data/SAFI.json\", mode = \"wb\")\n\n\n\n\nCode\ndata001 &lt;- read_json(\"./data/SAFI.json\")\n\n\n\n\nCode\ndata002=data001 %&gt;% as.data.frame()\ncolnames(data002)[14] = \"latitude\"\ncolnames(data002)[15] = \"longitude\"\nglimpse(data002)\n\n\nRows: 1\nColumns: 22\n$ item_id            &lt;chr&gt; \"00105670-df53-4be8-9039-8a07fe2d2b4d\"\n$ news_channel       &lt;chr&gt; \"新闻坊\"\n$ title              &lt;chr&gt; \"一养老院突发火灾，已致3死10伤！\"\n$ report             &lt;chr&gt; \"4月4日\\n\\n“东莞应急管理”\\n\\n发布情况通报\\n\\n↓↓↓\\n\\n4月4日4时21分，东莞万…\n$ original_websites  &lt;chr&gt; \"https://mp.weixin.qq.com/s/xUZR8gZ_N0UqGj0GvH6L8A\"\n$ start_date         &lt;chr&gt; \"2024-04-04\"\n$ start_time         &lt;chr&gt; \"2024-04-04 04:21:00\"\n$ update_time        &lt;chr&gt; \"2024-05-03 10:50:01\"\n$ incident_type      &lt;chr&gt; \"火灾\"\n$ incident_reason    &lt;chr&gt; \"该建筑为一栋11层楼房，起火部位为第三层303房，过火面积约20平方米。\"…\n$ person_death_num   &lt;int&gt; 3\n$ person_injury_num  &lt;int&gt; 10\n$ person_missing_num &lt;int&gt; 0\n$ latitude           &lt;dbl&gt; 113.6952\n$ longitude          &lt;dbl&gt; 23.07464\n$ place              &lt;chr&gt; \"东莞万江街道康怡护理院（公助民办养老院）\"\n$ province           &lt;chr&gt; \"广东省\"\n$ city               &lt;chr&gt; \"东莞市\"\n$ county             &lt;chr&gt; \"\"\n$ town               &lt;chr&gt; \"万江街道\"\n$ village            &lt;chr&gt; \"\"\n$ is_final           &lt;lgl&gt; TRUE\n\n\n\n\n3 all file\n\n\nCode\n#url=\"https://github.com/percent4/chinese_incident_tracker/archive/refs/heads/main.zip\"\n#download.file(url,\"./data/data.zip\", mode = \"wb\")\n\n\n\n\nCode\n#unzip(\"./data/data.zip\",exdir=\"./data/out\")\n\n\n\n\nCode\nfrom &lt;- \"./data/out/chinese_incident_tracker-main/elk/data\"\nto   &lt;- \"./data/json_folder\"\nfile.copy(list.files(from, full.names = TRUE), \n          to, \n          recursive = TRUE)\n\n\n [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[16] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[31] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[46] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\n\n\nCode\n#list.files(\"./data/json_folder\")\n\n\n\n\nCode\nall_data=tibble()\n\nfor (i in list.files(\"./data/json_folder\")) {\n  #print(i)\n  data001=read_json(paste0(\"./data/json_folder/\",i))\n  data002=data001 %&gt;% as.data.frame()\n  colnames(data002)[14] = \"Longitude\"\n  colnames(data002)[15] = \"Latitude\"\n  #print(data002)\n  \n  all_data=rbind(all_data,data002)\n}\n\n\n\n\nCode\nall_data=all_data %&gt;% mutate(text=paste0(incident_type,\" \",\"死亡人数:\",person_death_num,\" 受伤人数:\",person_injury_num)\n                             ,month_year= format_ISO8601(ymd(start_date), precision = \"ym\")\n                             )\n\n\n\n\nCode\nglimpse(all_data)\n\n\nRows: 60\nColumns: 24\n$ item_id            &lt;chr&gt; \"00105670-df53-4be8-9039-8a07fe2d2b4d\", \"0683ba1e-7…\n$ news_channel       &lt;chr&gt; \"新闻坊\", \"中国新闻网\", \"凤凰网\", \"搜狐网\", \"每日经济新闻\", \"中国新闻网\", \"杭…\n$ title              &lt;chr&gt; \"一养老院突发火灾，已致3死10伤！\", \"江西于都一矿企发生事故 致3死2伤\", \"#云南镇雄突发山…\n$ report             &lt;chr&gt; \"4月4日\\n\\n“东莞应急管理”\\n\\n发布情况通报\\n\\n↓↓↓\\n\\n4月4日4时21分，东莞万…\n$ original_websites  &lt;chr&gt; \"https://mp.weixin.qq.com/s/xUZR8gZ_N0UqGj0GvH6L8A\"…\n$ start_date         &lt;chr&gt; \"2024-04-04\", \"2024-04-24\", \"2024-01-22\", \"2024-02-…\n$ start_time         &lt;chr&gt; \"2024-04-04 04:21:00\", \"2024-04-24 00:08:48\", \"2024…\n$ update_time        &lt;chr&gt; \"2024-05-03 10:50:01\", \"2024-05-03 00:08:48\", \"2024…\n$ incident_type      &lt;chr&gt; \"火灾\", \"溃水\", \"山体滑坡\", \"房屋坍塌\", \"燃气爆炸\", \"火灾\", \"摔伤\", \"摔伤…\n$ incident_reason    &lt;chr&gt; \"该建筑为一栋11层楼房，起火部位为第三层303房，过火面积约20平方米。\", \"企业清理排洪隧洞时溃…\n$ person_death_num   &lt;int&gt; 3, 3, 44, 1, 7, 4, 1, 1, 7, 1, 18, 4, 5, 1, 15, 12,…\n$ person_injury_num  &lt;int&gt; 10, 2, 2, 0, 27, 4, 0, 0, 0, 11, 1155, 0, 3, 2, 44,…\n$ person_missing_num &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 6, 0, …\n$ Longitude          &lt;dbl&gt; 113.69524, 115.32158, 104.95514, 113.28304, 116.808…\n$ Latitude           &lt;dbl&gt; 23.07464, 25.72126, 27.49063, 32.22574, 39.95258, 4…\n$ place              &lt;chr&gt; \"东莞万江街道康怡护理院（公助民办养老院）\", \"于都县龙鑫矿业有限公司选矿厂\", \"云南省昭通市镇雄…\n$ province           &lt;chr&gt; \"广东省\", \"江西省\", \"云南省\", \"湖北省\", \"河北省\", \"内蒙古自治区\", \"新疆维吾尔…\n$ city               &lt;chr&gt; \"东莞市\", \"赣州市\", \"昭通市\", \"随州市\", \"廊坊市\", \"呼和浩特市\", \"伊犁哈萨克自…\n$ county             &lt;chr&gt; \"\", \"于都县\", \"镇雄县\", \"随县\", \"三河市\", \"新城区\", \"富蕴县\", \"富蕴县\",…\n$ town               &lt;chr&gt; \"万江街道\", \"祁禄山镇\", \"塘房镇\", \"万和镇\", \"燕郊镇\", \"\", \"\", \"\", \"宁…\n$ village            &lt;chr&gt; \"\", \"金沙村\", \"\", \"\", \"小张各庄\", \"\", \"\", \"\", \"乔家沟\", \"\", \"…\n$ is_final           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…\n$ text               &lt;chr&gt; \"火灾 死亡人数:3 受伤人数:10\", \"溃水 死亡人数:3 受伤人数:2\", \"山体滑坡 死亡人数…\n$ month_year         &lt;chr&gt; \"2024-04\", \"2024-04\", \"2024-01\", \"2024-02\", \"2024-0…\n\n\n\n\nCode\n#write.xlsx(all_data,'all_data.xlsx')\n\n\n\n\n4 chart\ngroup to month ::: {.cell}\n\nCode\nchartdata001=all_data %&gt;% group_by(month_year)  %&gt;%  summarise(person_death_num=sum(person_death_num)\n                                                           ,person_injury_num=sum(person_injury_num)\n                                                           )\n\n:::\nwide to long ::: {.cell}\n\nCode\nchartdata002=chartdata001 %&gt;%select(month_year,person_death_num,person_injury_num) %&gt;% \n  pivot_longer(!c(month_year), names_to = 'type', values_to = 'DATA')\n\n:::\n\n\nCode\ngg=ggplot(chartdata001, aes(x=month_year, y=person_death_num,label = person_death_num))+\n  geom_bar(stat=\"identity\",fill='red')+ geom_text(vjust = -1,\n              position = position_dodge(width = 0.9))+ theme_bw()\n\n\nggplotly(gg)\n\n\n\n\n\n\n\n\nCode\ngg=ggplot(chartdata002, aes(fill=type, y=DATA, x=month_year)) +\n    geom_col(position = \"dodge\") +\n    geom_text(aes(label = DATA), vjust = 1.5,\n              position = position_dodge(width = 0.9))+scale_y_log10()+ theme_light()\n\npp=ggplotly(gg)\n\npp\n\n\n\n\n\n\n\n\n5 map\n\n\nCode\nall_data2 =all_data %&gt;%  mutate(report=report %&gt;% str_trunc(100))\n\n\n\n\nCode\n#write.xlsx(all_data2,'all_data2.xlsx')\n\n\n\n\nCode\nlibrary(mapview)\nlibrary(sf)\nlibrary(stringr)\n\nmapview(all_data2, map.types='OpenStreetMap',label='text',xcol = \"Longitude\", ycol = \"Latitude\", zcol='incident_type',cex=\"person_death_num\",crs = 4269, grid = FALSE)\n\n\n\n\n\n\n\n\n6 resouce:\nhttps://github.com/percent4/chinese_incident_tracker\nhttps://github.com/r-spatial/mapview\nhttps://maps.clb.org.hk/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "China accident map"
    ]
  },
  {
    "objectID": "Plot/5 Map/1 leaflet.html",
    "href": "Plot/5 Map/1 leaflet.html",
    "title": "map",
    "section": "",
    "text": "1 data\n\n\nCode\nlibrary(tidyverse)\n\nlibrary(sf)\nlibrary(leaflet)\nlibrary(geojsonio)\nlibrary(leaflet.extras)\n\n\n\n\n2 display at openstreet map\n\n\nCode\nm &lt;- leaflet() %&gt;%\n   # Add default OpenStreetMap map tiles\n  addTiles() %&gt;%  \n  # add markers\n  addMarkers(lng=174.768, lat=-36.852, popup=\"The birthplace of R\")\n\nm  \n\n\n\n\n\n\n\n\n3 display at google map\n\n\nCode\nleaflet() |&gt;\n  # add base mao\n  addTiles(urlTemplate = \"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\") |&gt;\n  # set view\n  setView(116.347817690225, 39.997202126977, zoom = 16) |&gt;\n  # add markers\n  addMarkers(116.347817690225, 39.997202126977)\n\n\n\n\n\n\n\n\n4 Third-Party map\n\n\nCode\n#m &lt;- leaflet() %&gt;% setView(lng = -71.0589, lat = 42.3601, zoom = 10)\n#m %&gt;% addProviderTiles(providers$Stadia.StamenToner)\n\n\n\n\n5 add pop up\nPopups are small boxes containing arbitrary HTML, that point to a specific point on the map.\n\n\nCode\ncontent &lt;- paste(sep = \"&lt;br/&gt;\",\n  \"&lt;b&gt;&lt;a href='https://www.samurainoodle.com/'&gt;Samurai Noodle&lt;/a&gt;&lt;/b&gt;\",\n  \"606 5th Ave. S\",\n  \"Seattle, WA 98138\"\n)\n\nleaflet() %&gt;% addTiles() %&gt;%\n  setView(-122.327298, 47.597131,zoom = 12) %&gt;% \n  addPopups(-122.327298, 47.597131, content,\n    #options = popupOptions(closeButton = FALSE)\n    options = popupOptions(closeButton = FALSE)\n  )\n\n\n\n\n\n\n\n\n6 add Markers\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"\n))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, popup = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n7 add Labels\nA label is a textual or HTML content that can attached to markers and shapes to be always displayed or displayed on mouse over. Unlike popups you don’t need to click a marker/polygon for the label to be shown.\n\n\nCode\nlibrary(htmltools)\n\ndf &lt;- read.csv(textConnection(\n\"Name,Lat,Long\nSamurai Noodle,47.597131,-122.327298\nKukai Ramen,47.6154,-122.327157\nTsukushinbo,47.59987,-122.326726\"))\n\nleaflet(df) %&gt;% addTiles() %&gt;%\n  addMarkers(~Long, ~Lat, label = ~htmlEscape(Name))\n\n\n\n\n\n\n\n\n8 World map\n\n\nCode\n#install.packages(\"https://cran.r-project.org/src/contrib/Archive/maptools/maptools_1.1-8.tar.gz\")\n\n\n\n\nCode\njson_data=read_sf(\"world-administrative-boundaries.geojson\")\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\n#Get my variable\n#name&lt;-c(\"Ghana\", \"Grenada\", \"Guyana\", \"India\", \"Jamaica\", \"Kenya\", \"United States\",\"Canada\")\n#val&lt;-c(1,2,4,5,5,1000,20000, 100)\n\n#per_gdp_usd&lt;-data.frame(name,val)\n\n\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\n\nper_gdp_usd=read_excel('world data.xlsx') %&gt;% mutate(\n  name=case_when(\n    name ==\"United States\" ~ \"United States of America\"\n     ,name ==\"Russia\" ~ \"Russian Federation\"\n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name ==\"U.K. of Great Britain and Northern Ireland\" ~ \"United Kingdom\"\n   \n   ,name == \"South Korea\"~ \"Republic of Korea\"\n   \n   ,name ==\"Lao People's Democratic Republic\" ~ \"Laos\"\n   \n    ,TRUE ~ name\n  )\n)\n\n\n\n\nCode\n#test=full_join(map_df, per_gdp_usd, by=\"name\")\n\n#left =test %&gt;% filter(is.na(iso3)==TRUE)\n\n#right=test %&gt;% filter(is.na(per_gdp_total)==TRUE)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"name\")\n\n\n\n\nCode\nglimpse(map_df002)\n\n\nRows: 158\nColumns: 12\n$ name                     &lt;chr&gt; \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"A…\n$ geo_point_2d             &lt;chr&gt; \"{ \\\"lon\\\": 20.068384605918776, \\\"lat\\\": 41.1…\n$ iso3                     &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ status                   &lt;chr&gt; \"Member State\", \"Member State\", \"Member State…\n$ color_code               &lt;chr&gt; \"ALB\", \"DZA\", \"AND\", \"AGO\", \"ARG\", \"ARM\", \"AU…\n$ continent                &lt;chr&gt; \"Europe\", \"Africa\", \"Europe\", \"Africa\", \"Amer…\n$ region                   &lt;chr&gt; \"Southern Europe\", \"Northern Africa\", \"Southe…\n$ iso_3166_1_alpha_2_codes &lt;chr&gt; \"AL\", \"DZ\", \"AD\", \"AO\", \"AR\", \"AM\", \"AU\", \"AT…\n$ french_short             &lt;chr&gt; \"Albanie\", \"Algérie\", \"Andorre\", \"Angola\", \"A…\n$ geometry                 &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((20.07142 42..., …\n$ per_gdp_total            &lt;dbl&gt; 1.888210e+10, 1.919130e+11, 3.352033e+09, 1.0…\n$ per_gdp_usd              &lt;dbl&gt; 6643, 4274, 41993, 2999, 13904, 7014, 64003, …\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gdp_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gdp_usd, \"（千 美元）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", round(map_sf002$per_gdp_usd/1000), \"K &lt;br/&gt;\",\n       \"总gpd 美元：\", round(map_sf002$per_gdp_total/1000000), \"M &lt;br/&gt;\"\n\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gdp_usd, opacity = 1.0\n    )\n\n\n\n\n\n\n\n\n9 China one city map\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/citys/440300.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/440300_full.json\")\n\n\n深圳市： ::: {.cell}\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n\n:::\n\n\n10 all China each province GPD map\n\n\nCode\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\n中国 2022 各省 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('china gdp2022.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\n\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"地区：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"地区：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n\nGPD data source:国家统计局数据库\n\n\n11 China one province map each city GPD\n\n\nCode\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/province/440000.json\") \n\n\n广东省 2021 人均gpd usd：\n\n\nCode\nlibrary(openxlsx)\nlibrary(readxl)\nper_gdp_usd=read_excel('guangdong city gdp2021.xlsx')\n\n\n\n\nCode\nmap_df &lt;- as.data.frame(json_data)\n\n\n\n\nCode\nmap_df002 &lt;- merge(map_df, per_gdp_usd, by.x = \"name\", by.y = \"city\")\n\n\n\n\nCode\nmap_sf002 &lt;- sf::st_as_sf(map_df002, sf_column_name = \"geometry\")\n\n\ndata source:广东统计年鉴2022 ::: {.cell}\n\nCode\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nleaflet(map_sf002) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.5,weight = 1,\n    fillColor = ~ pal(per_gpd_usd)\n    ,popup = ~ paste0(\n      \"城市：\", name, \"&lt;br/&gt;\",\n      \"&lt;hr/&gt;\",\n      \"人均gpd：\", per_gpd_usd, \"（美万）\", \"&lt;br/&gt;\"\n      \n    )\n     ,label = lapply(paste0(\n      \"城市：\", \"&lt;b&gt;\", map_sf002$name, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n      \"人均gpd 美元：\", map_sf002$per_gpd_usd, \"&lt;br/&gt;\",\n      \"人均gpd 人民币：\", map_sf002$per_gpd_rmb, \"&lt;br/&gt;\",\n       \"人口：\", round(map_sf002$total_gpd_rmb*10000000/map_sf002$per_gpd_rmb), \"&lt;br/&gt;\"\n    ), htmltools::HTML)\n    )%&gt;% addLegend(\n    position = \"bottomright\", title = \"人均gpd(美元)\",\n    pal = pal, values = ~per_gpd_usd, opacity = 1.0\n    )\n\n\n\n\n\n:::\nhttps://zh.wikipedia.org/wiki/%E5%B9%BF%E4%B8%9C%E5%90%84%E5%9C%B0%E7%BA%A7%E5%B8%82%E5%9C%B0%E5%8C%BA%E7%94%9F%E4%BA%A7%E6%80%BB%E5%80%BC%E5%88%97%E8%A1%A8\n\n\n12 China province map\n\n\nCode\nlibrary(leaflet)\nlibrary(sf)\n\njson_data &lt;- sf::read_sf(\"./GeoMapData_CN/china.json\") \n#or\njson_data=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n\npal &lt;- colorNumeric(\"viridis\", NULL)\n\nm=leaflet(json_data) %&gt;%\n  addTiles() %&gt;%\n  addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n \n\nm\n\n\n\n\n\n\nadd provincial capital ::: {.cell}\n\nCode\nChina=read_sf(\"https://geo.datav.aliyun.com/areas_v2/bound/100000_full.json\")\n\n:::\n\n\nCode\nChina002=China %&gt;% as_data_frame() %&gt;% mutate(\n                                            center2=as.character(center) %&gt;% str_replace('c','')%&gt;% str_replace('[(]','') %&gt;% str_replace('[)]','')\n                                               )\n\n\n\n\nCode\nChina003=China002%&gt;%separate(center2, c(\"x\", \"y\"), \", \")\n\n\n\n\nCode\nChina_point = China003 %&gt;% \n  slice(-35)\n\nm %&gt;% \n  addCircles(data = China_point,\n                  lng = ~as.numeric(x), lat = ~as.numeric(y),color = \"red\",weight = 10,\n                  fillOpacity =2)\n\n\n\n\n\n\n\n\n13 China province and city map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 34\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 119.3183 ymin: 21.75147 xmax: 124.5656 ymax: 25.92592\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 710000 台湾省 121.509062,25.044332 province (((119.5543 23.68248, 119.555 23.…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/province\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/province/710000.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 33\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n14 China city and district map\n\n\nCode\nmap_list &lt;- lapply(\n  X = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T),\n  FUN = sf::read_sf\n)\n\nlength(map_list)\n\n\n[1] 334\n\n\n\n\nCode\nfor (i in c(1:length(map_list))){\n   #print(i)\n  #print(dim(map_list[[i]]))\n  #print(ncol(map_list[[i]]))\n  if(ncol(map_list[[i]])!=10){print(map_list[[i]])}\n  }\n\n\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.5215 ymin: 22.65421 xmax: 114.2603 ymax: 23.14205\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 441900 东莞市 113.746262,23.046237 city  ((114.2292 22.81251, 114.2278 22.813…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 113.157 ymin: 22.20104 xmax: 113.692 ymax: 22.7726\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                         &lt;POLYGON [°]&gt;\n1 442000 中山市 113.382391,22.521113 city  ((113.5687 22.41193, 113.5666 22.412…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 115.9267 ymin: 20.58265 xmax: 116.9338 ymax: 21.12693\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center               level                            geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;                &lt;chr&gt;                  &lt;MULTIPOLYGON [°]&gt;\n1 442100 东沙群岛 116.887312,20.617512 city  (((115.9433 21.09745, 115.95 21.11…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 108.9287 ymin: 19.17894 xmax: 109.7694 ymax: 19.92575\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name   center               level                              geometry\n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;                &lt;chr&gt;                    &lt;MULTIPOLYGON [°]&gt;\n1 460400 儋州市 109.576782,19.517486 city  (((109.4322 19.91302, 109.4253 19.91…\nSimple feature collection with 1 feature and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 97.8483 ymin: 39.65426 xmax: 98.52018 ymax: 39.99979\nGeodetic CRS:  WGS 84\n# A tibble: 1 × 5\n  adcode name     center              level                             geometry\n  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;                   &lt;MULTIPOLYGON [°]&gt;\n1 620200 嘉峪关市 98.277304,39.786529 city  (((97.85974 39.7169, 97.85827 39.71…\n\n\n\n\nCode\nX = list.files(\"./GeoMapData_CN/citys\", recursive = T, full.names = T)\n\nX2=X[-which(X %in% c(\"./GeoMapData_CN/citys/620200.json\"\n         ,\"./GeoMapData_CN/citys/460400.json\"\n              ,\"./GeoMapData_CN/citys/442100.json\"\n              ,\"./GeoMapData_CN/citys/442000.json\"\n              ,\"./GeoMapData_CN/citys/441900.json\"\n         ))]\n\nmap_list &lt;- lapply(\n  X = X2,\n  FUN = sf::read_sf\n)\n\n\n\n\nCode\nlength(map_list)\n\n\n[1] 329\n\n\n\n\nCode\nprovince_map &lt;- Reduce(\"rbind\", map_list)\n\n\n\n\nCode\n# library(leaflet)\n# library(sf)\n# \n# json_data &lt;- province_map\n# \n# \n# pal &lt;- colorNumeric(c(\"red\", \"green\", \"blue\"), 1:10)\n# \n# leaflet(json_data) %&gt;%\n#   addTiles() %&gt;%\n#   addPolygons(smoothFactor = 0.3, fillOpacity = 0.1)\n\n\n\n\n15 show all map providers\n\n\nCode\nproviders\n\n\nproviders\n$OpenStreetMap\n[1] \"OpenStreetMap\"\n\n$OpenStreetMap.Mapnik\n[1] \"OpenStreetMap.Mapnik\"\n\n$OpenStreetMap.DE\n[1] \"OpenStreetMap.DE\"\n\n$OpenStreetMap.CH\n[1] \"OpenStreetMap.CH\"\n\n$OpenStreetMap.France\n[1] \"OpenStreetMap.France\"\n\n$OpenStreetMap.HOT\n[1] \"OpenStreetMap.HOT\"\n\n$OpenStreetMap.BZH\n[1] \"OpenStreetMap.BZH\"\n\n$MapTilesAPI\n[1] \"MapTilesAPI\"\n\n$MapTilesAPI.OSMEnglish\n[1] \"MapTilesAPI.OSMEnglish\"\n\n$MapTilesAPI.OSMFrancais\n[1] \"MapTilesAPI.OSMFrancais\"\n\n$MapTilesAPI.OSMEspagnol\n[1] \"MapTilesAPI.OSMEspagnol\"\n\n$OpenSeaMap\n[1] \"OpenSeaMap\"\n\n$OPNVKarte\n[1] \"OPNVKarte\"\n\n$OpenTopoMap\n[1] \"OpenTopoMap\"\n\n$OpenRailwayMap\n[1] \"OpenRailwayMap\"\n\n$OpenFireMap\n[1] \"OpenFireMap\"\n\n$SafeCast\n[1] \"SafeCast\"\n\n$Stadia\n[1] \"Stadia\"\n\n$Stadia.AlidadeSmooth\n[1] \"Stadia.AlidadeSmooth\"\n\n$Stadia.AlidadeSmoothDark\n[1] \"Stadia.AlidadeSmoothDark\"\n\n$Stadia.OSMBright\n[1] \"Stadia.OSMBright\"\n\n$Stadia.Outdoors\n[1] \"Stadia.Outdoors\"\n\n$Stadia.StamenToner\n[1] \"Stadia.StamenToner\"\n\n$Stadia.StamenTonerBackground\n[1] \"Stadia.StamenTonerBackground\"\n\n$Stadia.StamenTonerLines\n[1] \"Stadia.StamenTonerLines\"\n\n$Stadia.StamenTonerLabels\n[1] \"Stadia.StamenTonerLabels\"\n\n$Stadia.StamenTonerLite\n[1] \"Stadia.StamenTonerLite\"\n\n$Stadia.StamenWatercolor\n[1] \"Stadia.StamenWatercolor\"\n\n$Stadia.StamenTerrain\n[1] \"Stadia.StamenTerrain\"\n\n$Stadia.StamenTerrainBackground\n[1] \"Stadia.StamenTerrainBackground\"\n\n$Stadia.StamenTerrainLabels\n[1] \"Stadia.StamenTerrainLabels\"\n\n$Stadia.StamenTerrainLines\n[1] \"Stadia.StamenTerrainLines\"\n\n$Thunderforest\n[1] \"Thunderforest\"\n\n$Thunderforest.OpenCycleMap\n[1] \"Thunderforest.OpenCycleMap\"\n\n$Thunderforest.Transport\n[1] \"Thunderforest.Transport\"\n\n$Thunderforest.TransportDark\n[1] \"Thunderforest.TransportDark\"\n\n$Thunderforest.SpinalMap\n[1] \"Thunderforest.SpinalMap\"\n\n$Thunderforest.Landscape\n[1] \"Thunderforest.Landscape\"\n\n$Thunderforest.Outdoors\n[1] \"Thunderforest.Outdoors\"\n\n$Thunderforest.Pioneer\n[1] \"Thunderforest.Pioneer\"\n\n$Thunderforest.MobileAtlas\n[1] \"Thunderforest.MobileAtlas\"\n\n$Thunderforest.Neighbourhood\n[1] \"Thunderforest.Neighbourhood\"\n\n$CyclOSM\n[1] \"CyclOSM\"\n\n$Jawg\n[1] \"Jawg\"\n\n$Jawg.Streets\n[1] \"Jawg.Streets\"\n\n$Jawg.Terrain\n[1] \"Jawg.Terrain\"\n\n$Jawg.Sunny\n[1] \"Jawg.Sunny\"\n\n$Jawg.Dark\n[1] \"Jawg.Dark\"\n\n$Jawg.Light\n[1] \"Jawg.Light\"\n\n$Jawg.Matrix\n[1] \"Jawg.Matrix\"\n\n$MapBox\n[1] \"MapBox\"\n\n$MapTiler\n[1] \"MapTiler\"\n\n$MapTiler.Streets\n[1] \"MapTiler.Streets\"\n\n$MapTiler.Basic\n[1] \"MapTiler.Basic\"\n\n$MapTiler.Bright\n[1] \"MapTiler.Bright\"\n\n$MapTiler.Pastel\n[1] \"MapTiler.Pastel\"\n\n$MapTiler.Positron\n[1] \"MapTiler.Positron\"\n\n$MapTiler.Hybrid\n[1] \"MapTiler.Hybrid\"\n\n$MapTiler.Toner\n[1] \"MapTiler.Toner\"\n\n$MapTiler.Topo\n[1] \"MapTiler.Topo\"\n\n$MapTiler.Voyager\n[1] \"MapTiler.Voyager\"\n\n$TomTom\n[1] \"TomTom\"\n\n$TomTom.Basic\n[1] \"TomTom.Basic\"\n\n$TomTom.Hybrid\n[1] \"TomTom.Hybrid\"\n\n$TomTom.Labels\n[1] \"TomTom.Labels\"\n\n$Esri\n[1] \"Esri\"\n\n$Esri.WorldStreetMap\n[1] \"Esri.WorldStreetMap\"\n\n$Esri.DeLorme\n[1] \"Esri.DeLorme\"\n\n$Esri.WorldTopoMap\n[1] \"Esri.WorldTopoMap\"\n\n$Esri.WorldImagery\n[1] \"Esri.WorldImagery\"\n\n$Esri.WorldTerrain\n[1] \"Esri.WorldTerrain\"\n\n$Esri.WorldShadedRelief\n[1] \"Esri.WorldShadedRelief\"\n\n$Esri.WorldPhysical\n[1] \"Esri.WorldPhysical\"\n\n$Esri.OceanBasemap\n[1] \"Esri.OceanBasemap\"\n\n$Esri.NatGeoWorldMap\n[1] \"Esri.NatGeoWorldMap\"\n\n$Esri.WorldGrayCanvas\n[1] \"Esri.WorldGrayCanvas\"\n\n$OpenWeatherMap\n[1] \"OpenWeatherMap\"\n\n$OpenWeatherMap.Clouds\n[1] \"OpenWeatherMap.Clouds\"\n\n$OpenWeatherMap.CloudsClassic\n[1] \"OpenWeatherMap.CloudsClassic\"\n\n$OpenWeatherMap.Precipitation\n[1] \"OpenWeatherMap.Precipitation\"\n\n$OpenWeatherMap.PrecipitationClassic\n[1] \"OpenWeatherMap.PrecipitationClassic\"\n\n$OpenWeatherMap.Rain\n[1] \"OpenWeatherMap.Rain\"\n\n$OpenWeatherMap.RainClassic\n[1] \"OpenWeatherMap.RainClassic\"\n\n$OpenWeatherMap.Pressure\n[1] \"OpenWeatherMap.Pressure\"\n\n$OpenWeatherMap.PressureContour\n[1] \"OpenWeatherMap.PressureContour\"\n\n$OpenWeatherMap.Wind\n[1] \"OpenWeatherMap.Wind\"\n\n$OpenWeatherMap.Temperature\n[1] \"OpenWeatherMap.Temperature\"\n\n$OpenWeatherMap.Snow\n[1] \"OpenWeatherMap.Snow\"\n\n$HERE\n[1] \"HERE\"\n\n$HERE.normalDay\n[1] \"HERE.normalDay\"\n\n$HERE.normalDayCustom\n[1] \"HERE.normalDayCustom\"\n\n$HERE.normalDayGrey\n[1] \"HERE.normalDayGrey\"\n\n$HERE.normalDayMobile\n[1] \"HERE.normalDayMobile\"\n\n$HERE.normalDayGreyMobile\n[1] \"HERE.normalDayGreyMobile\"\n\n$HERE.normalDayTransit\n[1] \"HERE.normalDayTransit\"\n\n$HERE.normalDayTransitMobile\n[1] \"HERE.normalDayTransitMobile\"\n\n$HERE.normalDayTraffic\n[1] \"HERE.normalDayTraffic\"\n\n$HERE.normalNight\n[1] \"HERE.normalNight\"\n\n$HERE.normalNightMobile\n[1] \"HERE.normalNightMobile\"\n\n$HERE.normalNightGrey\n[1] \"HERE.normalNightGrey\"\n\n$HERE.normalNightGreyMobile\n[1] \"HERE.normalNightGreyMobile\"\n\n$HERE.normalNightTransit\n[1] \"HERE.normalNightTransit\"\n\n$HERE.normalNightTransitMobile\n[1] \"HERE.normalNightTransitMobile\"\n\n$HERE.reducedDay\n[1] \"HERE.reducedDay\"\n\n$HERE.reducedNight\n[1] \"HERE.reducedNight\"\n\n$HERE.basicMap\n[1] \"HERE.basicMap\"\n\n$HERE.mapLabels\n[1] \"HERE.mapLabels\"\n\n$HERE.trafficFlow\n[1] \"HERE.trafficFlow\"\n\n$HERE.carnavDayGrey\n[1] \"HERE.carnavDayGrey\"\n\n$HERE.hybridDay\n[1] \"HERE.hybridDay\"\n\n$HERE.hybridDayMobile\n[1] \"HERE.hybridDayMobile\"\n\n$HERE.hybridDayTransit\n[1] \"HERE.hybridDayTransit\"\n\n$HERE.hybridDayGrey\n[1] \"HERE.hybridDayGrey\"\n\n$HERE.hybridDayTraffic\n[1] \"HERE.hybridDayTraffic\"\n\n$HERE.pedestrianDay\n[1] \"HERE.pedestrianDay\"\n\n$HERE.pedestrianNight\n[1] \"HERE.pedestrianNight\"\n\n$HERE.satelliteDay\n[1] \"HERE.satelliteDay\"\n\n$HERE.terrainDay\n[1] \"HERE.terrainDay\"\n\n$HERE.terrainDayMobile\n[1] \"HERE.terrainDayMobile\"\n\n$HEREv3\n[1] \"HEREv3\"\n\n$HEREv3.normalDay\n[1] \"HEREv3.normalDay\"\n\n$HEREv3.normalDayCustom\n[1] \"HEREv3.normalDayCustom\"\n\n$HEREv3.normalDayGrey\n[1] \"HEREv3.normalDayGrey\"\n\n$HEREv3.normalDayMobile\n[1] \"HEREv3.normalDayMobile\"\n\n$HEREv3.normalDayGreyMobile\n[1] \"HEREv3.normalDayGreyMobile\"\n\n$HEREv3.normalDayTransit\n[1] \"HEREv3.normalDayTransit\"\n\n$HEREv3.normalDayTransitMobile\n[1] \"HEREv3.normalDayTransitMobile\"\n\n$HEREv3.normalNight\n[1] \"HEREv3.normalNight\"\n\n$HEREv3.normalNightMobile\n[1] \"HEREv3.normalNightMobile\"\n\n$HEREv3.normalNightGrey\n[1] \"HEREv3.normalNightGrey\"\n\n$HEREv3.normalNightGreyMobile\n[1] \"HEREv3.normalNightGreyMobile\"\n\n$HEREv3.normalNightTransit\n[1] \"HEREv3.normalNightTransit\"\n\n$HEREv3.normalNightTransitMobile\n[1] \"HEREv3.normalNightTransitMobile\"\n\n$HEREv3.reducedDay\n[1] \"HEREv3.reducedDay\"\n\n$HEREv3.reducedNight\n[1] \"HEREv3.reducedNight\"\n\n$HEREv3.basicMap\n[1] \"HEREv3.basicMap\"\n\n$HEREv3.mapLabels\n[1] \"HEREv3.mapLabels\"\n\n$HEREv3.trafficFlow\n[1] \"HEREv3.trafficFlow\"\n\n$HEREv3.carnavDayGrey\n[1] \"HEREv3.carnavDayGrey\"\n\n$HEREv3.hybridDay\n[1] \"HEREv3.hybridDay\"\n\n$HEREv3.hybridDayMobile\n[1] \"HEREv3.hybridDayMobile\"\n\n$HEREv3.hybridDayTransit\n[1] \"HEREv3.hybridDayTransit\"\n\n$HEREv3.hybridDayGrey\n[1] \"HEREv3.hybridDayGrey\"\n\n$HEREv3.pedestrianDay\n[1] \"HEREv3.pedestrianDay\"\n\n$HEREv3.pedestrianNight\n[1] \"HEREv3.pedestrianNight\"\n\n$HEREv3.satelliteDay\n[1] \"HEREv3.satelliteDay\"\n\n$HEREv3.terrainDay\n[1] \"HEREv3.terrainDay\"\n\n$HEREv3.terrainDayMobile\n[1] \"HEREv3.terrainDayMobile\"\n\n$FreeMapSK\n[1] \"FreeMapSK\"\n\n$MtbMap\n[1] \"MtbMap\"\n\n$CartoDB\n[1] \"CartoDB\"\n\n$CartoDB.Positron\n[1] \"CartoDB.Positron\"\n\n$CartoDB.PositronNoLabels\n[1] \"CartoDB.PositronNoLabels\"\n\n$CartoDB.PositronOnlyLabels\n[1] \"CartoDB.PositronOnlyLabels\"\n\n$CartoDB.DarkMatter\n[1] \"CartoDB.DarkMatter\"\n\n$CartoDB.DarkMatterNoLabels\n[1] \"CartoDB.DarkMatterNoLabels\"\n\n$CartoDB.DarkMatterOnlyLabels\n[1] \"CartoDB.DarkMatterOnlyLabels\"\n\n$CartoDB.Voyager\n[1] \"CartoDB.Voyager\"\n\n$CartoDB.VoyagerNoLabels\n[1] \"CartoDB.VoyagerNoLabels\"\n\n$CartoDB.VoyagerOnlyLabels\n[1] \"CartoDB.VoyagerOnlyLabels\"\n\n$CartoDB.VoyagerLabelsUnder\n[1] \"CartoDB.VoyagerLabelsUnder\"\n\n$HikeBike\n[1] \"HikeBike\"\n\n$HikeBike.HikeBike\n[1] \"HikeBike.HikeBike\"\n\n$HikeBike.HillShading\n[1] \"HikeBike.HillShading\"\n\n$BasemapAT\n[1] \"BasemapAT\"\n\n$BasemapAT.basemap\n[1] \"BasemapAT.basemap\"\n\n$BasemapAT.grau\n[1] \"BasemapAT.grau\"\n\n$BasemapAT.overlay\n[1] \"BasemapAT.overlay\"\n\n$BasemapAT.terrain\n[1] \"BasemapAT.terrain\"\n\n$BasemapAT.surface\n[1] \"BasemapAT.surface\"\n\n$BasemapAT.highdpi\n[1] \"BasemapAT.highdpi\"\n\n$BasemapAT.orthofoto\n[1] \"BasemapAT.orthofoto\"\n\n$nlmaps\n[1] \"nlmaps\"\n\n$nlmaps.standaard\n[1] \"nlmaps.standaard\"\n\n$nlmaps.pastel\n[1] \"nlmaps.pastel\"\n\n$nlmaps.grijs\n[1] \"nlmaps.grijs\"\n\n$nlmaps.water\n[1] \"nlmaps.water\"\n\n$nlmaps.luchtfoto\n[1] \"nlmaps.luchtfoto\"\n\n$NASAGIBS\n[1] \"NASAGIBS\"\n\n$NASAGIBS.ModisTerraTrueColorCR\n[1] \"NASAGIBS.ModisTerraTrueColorCR\"\n\n$NASAGIBS.ModisTerraBands367CR\n[1] \"NASAGIBS.ModisTerraBands367CR\"\n\n$NASAGIBS.ViirsEarthAtNight2012\n[1] \"NASAGIBS.ViirsEarthAtNight2012\"\n\n$NASAGIBS.ModisTerraLSTDay\n[1] \"NASAGIBS.ModisTerraLSTDay\"\n\n$NASAGIBS.ModisTerraSnowCover\n[1] \"NASAGIBS.ModisTerraSnowCover\"\n\n$NASAGIBS.ModisTerraAOD\n[1] \"NASAGIBS.ModisTerraAOD\"\n\n$NASAGIBS.ModisTerraChlorophyll\n[1] \"NASAGIBS.ModisTerraChlorophyll\"\n\n$NLS\n[1] \"NLS\"\n\n$JusticeMap\n[1] \"JusticeMap\"\n\n$JusticeMap.income\n[1] \"JusticeMap.income\"\n\n$JusticeMap.americanIndian\n[1] \"JusticeMap.americanIndian\"\n\n$JusticeMap.asian\n[1] \"JusticeMap.asian\"\n\n$JusticeMap.black\n[1] \"JusticeMap.black\"\n\n$JusticeMap.hispanic\n[1] \"JusticeMap.hispanic\"\n\n$JusticeMap.multi\n[1] \"JusticeMap.multi\"\n\n$JusticeMap.nonWhite\n[1] \"JusticeMap.nonWhite\"\n\n$JusticeMap.white\n[1] \"JusticeMap.white\"\n\n$JusticeMap.plurality\n[1] \"JusticeMap.plurality\"\n\n$GeoportailFrance\n[1] \"GeoportailFrance\"\n\n$GeoportailFrance.plan\n[1] \"GeoportailFrance.plan\"\n\n$GeoportailFrance.parcels\n[1] \"GeoportailFrance.parcels\"\n\n$GeoportailFrance.orthos\n[1] \"GeoportailFrance.orthos\"\n\n$OneMapSG\n[1] \"OneMapSG\"\n\n$OneMapSG.Default\n[1] \"OneMapSG.Default\"\n\n$OneMapSG.Night\n[1] \"OneMapSG.Night\"\n\n$OneMapSG.Original\n[1] \"OneMapSG.Original\"\n\n$OneMapSG.Grey\n[1] \"OneMapSG.Grey\"\n\n$OneMapSG.LandLot\n[1] \"OneMapSG.LandLot\"\n\n$USGS\n[1] \"USGS\"\n\n$USGS.USTopo\n[1] \"USGS.USTopo\"\n\n$USGS.USImagery\n[1] \"USGS.USImagery\"\n\n$USGS.USImageryTopo\n[1] \"USGS.USImageryTopo\"\n\n$WaymarkedTrails\n[1] \"WaymarkedTrails\"\n\n$WaymarkedTrails.hiking\n[1] \"WaymarkedTrails.hiking\"\n\n$WaymarkedTrails.cycling\n[1] \"WaymarkedTrails.cycling\"\n\n$WaymarkedTrails.mtb\n[1] \"WaymarkedTrails.mtb\"\n\n$WaymarkedTrails.slopes\n[1] \"WaymarkedTrails.slopes\"\n\n$WaymarkedTrails.riding\n[1] \"WaymarkedTrails.riding\"\n\n$WaymarkedTrails.skating\n[1] \"WaymarkedTrails.skating\"\n\n$OpenAIP\n[1] \"OpenAIP\"\n\n$OpenSnowMap\n[1] \"OpenSnowMap\"\n\n$OpenSnowMap.pistes\n[1] \"OpenSnowMap.pistes\"\n\n$AzureMaps\n[1] \"AzureMaps\"\n\n$AzureMaps.MicrosoftImagery\n[1] \"AzureMaps.MicrosoftImagery\"\n\n$AzureMaps.MicrosoftBaseDarkGrey\n[1] \"AzureMaps.MicrosoftBaseDarkGrey\"\n\n$AzureMaps.MicrosoftBaseRoad\n[1] \"AzureMaps.MicrosoftBaseRoad\"\n\n$AzureMaps.MicrosoftBaseHybridRoad\n[1] \"AzureMaps.MicrosoftBaseHybridRoad\"\n\n$AzureMaps.MicrosoftTerraMain\n[1] \"AzureMaps.MicrosoftTerraMain\"\n\n$AzureMaps.MicrosoftWeatherInfraredMain\n[1] \"AzureMaps.MicrosoftWeatherInfraredMain\"\n\n$AzureMaps.MicrosoftWeatherRadarMain\n[1] \"AzureMaps.MicrosoftWeatherRadarMain\"\n\n$SwissFederalGeoportal\n[1] \"SwissFederalGeoportal\"\n\n$SwissFederalGeoportal.NationalMapColor\n[1] \"SwissFederalGeoportal.NationalMapColor\"\n\n$SwissFederalGeoportal.NationalMapGrey\n[1] \"SwissFederalGeoportal.NationalMapGrey\"\n\n$SwissFederalGeoportal.SWISSIMAGE\n[1] \"SwissFederalGeoportal.SWISSIMAGE\"\n\n\n\n\n\nCode\nsessionInfo()\n\n\nsessionInfo()\nR version 4.4.1 (2024-06-14)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS 15.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: Asia/Shanghai\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] readxl_1.4.3         openxlsx_4.2.7.1     htmltools_0.5.8.1   \n [4] leaflet.extras_2.0.1 geojsonio_0.11.3     leaflet_2.2.2       \n [7] sf_1.0-18            lubridate_1.9.4      forcats_1.0.0       \n[10] stringr_1.5.1        dplyr_1.1.4          purrr_1.0.2         \n[13] readr_2.1.5          tidyr_1.3.1          tibble_3.2.1        \n[16] ggplot2_3.5.1        tidyverse_2.0.0     \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.6            xfun_0.48               htmlwidgets_1.6.4      \n [4] lattice_0.22-6          tzdb_0.4.0              leaflet.providers_2.0.0\n [7] vctrs_0.6.5             tools_4.4.1             crosstalk_1.2.1        \n[10] generics_0.1.3          curl_6.2.0              proxy_0.4-27           \n[13] pkgconfig_2.0.3         KernSmooth_2.23-24      RColorBrewer_1.1-3     \n[16] lifecycle_1.0.4         farver_2.1.2            compiler_4.4.1         \n[19] munsell_0.5.1           jqr_1.4.0               class_7.3-22           \n[22] yaml_2.3.10             lazyeval_0.2.2          pillar_1.10.1          \n[25] jquerylib_0.1.4         classInt_0.4-10         zip_2.3.1              \n[28] tidyselect_1.2.1        digest_0.6.37           stringi_1.8.4          \n[31] fastmap_1.2.0           grid_4.4.1              colorspace_2.1-1       \n[34] cli_3.6.4               magrittr_2.0.3          utf8_1.2.4             \n[37] crul_1.5.0              e1071_1.7-16            withr_3.0.2            \n[40] scales_1.3.0            sp_2.1-4                timechange_0.3.0       \n[43] rmarkdown_2.28          cellranger_1.1.0        hms_1.1.3              \n[46] evaluate_1.0.1          knitr_1.48              V8_6.0.0               \n[49] viridisLite_0.4.2       geojson_0.3.5           rlang_1.1.5            \n[52] Rcpp_1.0.13-1           glue_1.8.0              DBI_1.2.3              \n[55] httpcode_0.3.0          geojsonsf_2.0.3         rstudioapi_0.17.1      \n[58] jsonlite_1.8.9          R6_2.6.1                units_0.8-5            \n\n\n\n\n\n16 resouce:\nhttps://rstudio.github.io/leaflet/\nhttps://github.com/Lchiffon/leafletCN\nhttps://github.com/longwosion/geojson-map-china\nhttps://xiangyun.rbind.io/2022/02/draw-china-maps/\nhttps://datav.aliyun.com/portal/school/atlas/area_selector\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Plot",
      "5 Map",
      "map"
    ]
  },
  {
    "objectID": "intro/7 error handling.html",
    "href": "intro/7 error handling.html",
    "title": "Error handling",
    "section": "",
    "text": "error: can not find Python specified in RETICULATE_PYTHON (/Library/Frameworks/Python.framework/Versions/3.12/bin/python3)\n\n\nwhich -a python python3\n\n\n\ngo to home folder by Command-Shift-H\nRETICULATE_PYTHON=\"/Library/Frameworks/Python.framework/Versions/3.13/bin/python3\"",
    "crumbs": [
      "Intro",
      "Error handling"
    ]
  },
  {
    "objectID": "intro/7 error handling.html#find-current-python-version",
    "href": "intro/7 error handling.html#find-current-python-version",
    "title": "Error handling",
    "section": "",
    "text": "which -a python python3",
    "crumbs": [
      "Intro",
      "Error handling"
    ]
  },
  {
    "objectID": "intro/7 error handling.html#change-python-version-in-.renviron-under-home-folder",
    "href": "intro/7 error handling.html#change-python-version-in-.renviron-under-home-folder",
    "title": "Error handling",
    "section": "",
    "text": "go to home folder by Command-Shift-H\nRETICULATE_PYTHON=\"/Library/Frameworks/Python.framework/Versions/3.13/bin/python3\"",
    "crumbs": [
      "Intro",
      "Error handling"
    ]
  },
  {
    "objectID": "intro/6 data analytic in R book.html",
    "href": "intro/6 data analytic in R book.html",
    "title": "Data analytic in R book",
    "section": "",
    "text": "R for Data Science\nby Garrett Grolemund, Hadley Wickham 2017\n\n\n\nHands on programming with R\nby Garrett Grolemund, Hadley Wickham\n\n\n\nTidy Modeling with R\nby Max Kuhn and Julia Silge\n\n(https://www.tmwr.org/)\n\n\nDeep Learning with R\nby François Chollet,J. J. Allaire\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Intro",
      "Data analytic in R book"
    ]
  },
  {
    "objectID": "intro/5 R boook.html",
    "href": "intro/5 R boook.html",
    "title": "R book",
    "section": "",
    "text": "The Art of R Programming\nby Norman Matloff 2011\n\n\n\nThe book of R\nby Tilman M. Davie 2016\n\n\n\nR in action\nby Robert I. Kabacoff 2011\n\n\n\nR Packages\nby Hadley Wickham Jennifer Bryan\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Intro",
      "R book"
    ]
  },
  {
    "objectID": "other/6 other/1 chromote.html",
    "href": "other/6 other/1 chromote.html",
    "title": "chromote",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(chromote)\n\n\n\n\nCode\npackageVersion(\"chromote\")\n\n\n\n1 create view\n\n\nCode\nlibrary(chromote)\n\nb &lt;- ChromoteSession$new()\n\n# In a web browser, open a viewer for the headless browser. Works best with\n# Chromium-based browsers.\nb$view()\n\n\n\n\nCode\nb$Browser$getVersion()\n\n\n\n\n2 go to page\n\n\nCode\nb$Page$navigate(\"https://www.r-project.org/\")\n\n\n\n\n3 take picture\n\n\nCode\n# Saves to screenshot.png\nb$screenshot()\n\n\n\n\nCode\n# Takes a screenshot of elements picked out by CSS selector\nis_interactive &lt;- interactive() # Display screenshot if interactive\nb$screenshot(\"sidebar.png\", selector = \"h1\" ,show = is_interactive)\n\n\n\n\n4 take picture as pdf\n\n\nCode\nb$screenshot_pdf(filename='page.pdf')\n\n\n\n\n5 Reference:\nhttps://rstudio.github.io/chromote/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "6 other",
      "chromote"
    ]
  },
  {
    "objectID": "other/2 web scrap/web scrap.html",
    "href": "other/2 web scrap/web scrap.html",
    "title": "web scrap",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(rvest)\n\n\n\n1 table\n\n\nCode\nlibrary(tidyverse)\ncontent &lt;- read_html(\"https://en.wikipedia.org/wiki/List_of_highest-grossing_films_in_the_United_States_and_Canada\")\ntables &lt;- content %&gt;% html_table(fill = TRUE)\nfirst_table &lt;- tables[[1]]\nfirst_table &lt;- first_table[-1,]\nfirst_table\n\n\n\n\n2 Reference:\nhttps://rvest.tidyverse.org/reference/read_html_live.html\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Other",
      "2 web scrap",
      "web scrap"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/1 shiny weight tracking.html",
    "href": "Publish/1 Shiny/1 shiny weight tracking.html",
    "title": "Shiny in R:weight tracking",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/weightshiny/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:weight tracking"
    ]
  },
  {
    "objectID": "Publish/1 Shiny/3 China accident map.html",
    "href": "Publish/1 Shiny/3 China accident map.html",
    "title": "Shiny in R:China accident map",
    "section": "",
    "text": "1 Shiny app:https://tduan.shinyapps.io/China_accident_map/\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "1 Shiny",
      "Shiny in R:China accident map"
    ]
  },
  {
    "objectID": "Publish/2 quarto/4 quarto presentation .html",
    "href": "Publish/2 quarto/4 quarto presentation .html",
    "title": "quarto presentation",
    "section": "",
    "text": "1 revealjs YAML\n\n\nCode\n---\ntitle: \"Habits\"\nauthor: \"John Doe\"\nformat: revealjs\n---\n\n\n\n\n2 pages\n\n\nCode\n# pages\n\n# In the morning\n\n## Getting up\n\n- Turn off alarm\n- Get out of bed\n\n## Breakfast\n\n- Eat eggs\n- Drink coffee\n\n\n\n\n3 YAML format setting\n\n\nCode\nformat:\n  revealjs:\n    controls: true\n    navigation-mode: vertical\n    height: 800\n    width: 1000    \n    fontsize: 20pt\n    page-layout: full\n    logo: images/logo.jpg\n    footer: \"This is footer(https://google.com/)\"\n    slide-number: c\n    show-slide-number: all\n    menu: false\n\n\n\n\n4 Main Title Slide Background YAML setting\n\n\nCode\n---\ntitle: My Slide Show\ntitle-slide-attributes:\n    data-background-image: /path/to/title_image.png\n    data-background-size: contain\n    data-background-opacity: \"0.5\"\n---\n\n\n\n\n5 Chalkboard YAML setting\n\n\nCode\n---\ntitle: \"Presentation\"\nformat:\n  revealjs:\n    chalkboard: true\n---\n\n\n\n\n6 center whole page\n\n\nCode\n# This will be centered {.center}\n\nThis text is moved as well\n\n\n\n\n7 reference:\nhttps://quarto.org/docs/presentations/revealjs/\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto presentation"
    ]
  },
  {
    "objectID": "Publish/2 quarto/5 quarto extensions.html",
    "href": "Publish/2 quarto/5 quarto extensions.html",
    "title": "quarto Extensioins",
    "section": "",
    "text": "Extensions are a powerful way to modify and extend the behavior of Quarto. Quarto v1.2 Required for Quarto Extensions.\n\n1 quarto extension： lightbox\nAn extension that uses the GLightbox javascript library to add lightbox styling and behavior to images in your HTML documents.\n\n\n2 Installation:\n\n\n\nCode\n\nTerminal\n\nquarto install extension quarto-ext/lightbox\n\n\n\n\n\n3 Usage:\nThe Lightbox extension can automatically give images in your web page a lightbox treatment. You can enable this like:\nin header yaml:\n\n\nCode\n---\ntitle: Simple Lightbox Example\nfilters:\n   - lightbox\nlightbox: auto\n---\n\n\nIn addition to simply providing a lightbox treatment for individual images, you can also group images into a ‘gallery’. When the user activates the lightbox, they will be able to page through the images in the gallery without returning to the main document.\nin content:\n\n\nCode\n![](images/image-562149792.png){group=\"my-gallery\"\ndescription=\"its a picture\"}\n\n\n\n\n4 quarto extension lightbox example:\ncode:example.qmd\nwebsite:example.qmd.\n\n\n5 list quarto extension\ngo to folder which have added quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto list extensions\n\n\n\n\n\n\n6 update quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto update quarto-ext/fontawesome\n\n\n\n\n\n7 remove quarto extension\n\n\n\nCode\n\nTerminal\n\n\nquarto remove quarto-ext/fontawesome\n\n\n\nIf you run the quarto remove extension command with no extension-id, you will be presented with a list of extensions that are present and you may select which extensions to remove.\n\n\n8 Reference\nhttps://quarto.org/docs/extensions/\nhttps://github.com/quarto-ext/lightbox\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto Extensioins"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html",
    "href": "Publish/2 quarto/1 quarto tips.html",
    "title": "quarto introduction",
    "section": "",
    "text": "https://quarto.org/docs/get-started/\n\n\n\n\n\nCode\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#install-quarto-cli",
    "href": "Publish/2 quarto/1 quarto tips.html#install-quarto-cli",
    "title": "quarto introduction",
    "section": "",
    "text": "https://quarto.org/docs/get-started/",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#install-quarto-pacakge",
    "href": "Publish/2 quarto/1 quarto tips.html#install-quarto-pacakge",
    "title": "quarto introduction",
    "section": "",
    "text": "Code\ninstall.packages(\"quarto\")",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-terminal",
    "href": "Publish/2 quarto/1 quarto tips.html#in-terminal",
    "title": "quarto introduction",
    "section": "in Terminal",
    "text": "in Terminal\n\n\n\nCode\n\nTerminal\n\nquarto check",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-r",
    "href": "Publish/2 quarto/1 quarto tips.html#in-r",
    "title": "quarto introduction",
    "section": "in R",
    "text": "in R\n\n\nCode\nlibrary(quarto)\nquarto_version()\n\n\n[1] '99.9.9'\n\n\nquarto location\n\n\nCode\nquarto_path()\n\n\n[1] \"/usr/local/bin/quarto\"",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#r",
    "href": "Publish/2 quarto/1 quarto tips.html#r",
    "title": "quarto introduction",
    "section": "R",
    "text": "R\n```{R}\nversion\n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#python",
    "href": "Publish/2 quarto/1 quarto tips.html#python",
    "title": "quarto introduction",
    "section": "Python",
    "text": "Python\n```{python}\nimport sys\nprint(sys.version)\n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#bath",
    "href": "Publish/2 quarto/1 quarto tips.html#bath",
    "title": "quarto introduction",
    "section": "Bath",
    "text": "Bath\n```{bash}\necho \"foo\" \n```",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-yaml-header",
    "href": "Publish/2 quarto/1 quarto tips.html#in-yaml-header",
    "title": "quarto introduction",
    "section": "in YAML header",
    "text": "in YAML header\n---\ntitle: \"My Document\"\nexecute:\n  echo: false\njupyter: python3\n---\n\neval： Evaluate the code chunk (if false, just echos the code into the output).\necho： Include the source code in output.\noutput： Include the results of executing the code in the output (true, false, or asis to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown).\nwarning： Include warnings in the output.\nerror： Evaluate the code chunk (if false, just echos the code into the output).\ninclude： Catch all for preventing any output (code or results) from being included (e.g. include: false suppresses all output from the code block).",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#in-code-chunk",
    "href": "Publish/2 quarto/1 quarto tips.html#in-code-chunk",
    "title": "quarto introduction",
    "section": "in code chunk",
    "text": "in code chunk\n\n\nCode\n #| eval: false",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#embed-youtube",
    "href": "Publish/2 quarto/1 quarto tips.html#embed-youtube",
    "title": "quarto introduction",
    "section": "embed youtube",
    "text": "embed youtube\n\n\nCode\n&lt;iframe width=\"640\" height=\"480\" src=\"https://www.youtube.com/embed/nku5zFMZAdU\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen&gt;\n&lt;/iframe&gt;",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#embed-local-video",
    "href": "Publish/2 quarto/1 quarto tips.html#embed-local-video",
    "title": "quarto introduction",
    "section": "embed local video",
    "text": "embed local video\n\n\nCode\n{{&lt; video images/vv.mp4 height=\"600\" &gt;}}",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  },
  {
    "objectID": "Publish/2 quarto/1 quarto tips.html#render-a-folder-or-file",
    "href": "Publish/2 quarto/1 quarto tips.html#render-a-folder-or-file",
    "title": "quarto introduction",
    "section": "render a folder or file",
    "text": "render a folder or file\n\n\n\nCode\n\nTerminal\n\nquarto render introduction.qmd\nquarto render subdir/\n\n\n\nsource:https://quarto.org/docs/projects/code-execution.html",
    "crumbs": [
      "Publish",
      "2 quarto",
      "quarto introduction"
    ]
  }
]